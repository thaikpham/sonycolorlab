<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alpha AI Color Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
            background-color: #f4f7fc;
            color: #212529;
            overflow-x: hidden;
            overflow-y: auto;
        }
        
        #bg-blurs { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; overflow: hidden; }
        .blur-circle { position: absolute; border-radius: 50%; filter: blur(180px); opacity: 0.15; transition: all 2s ease-in-out; }
        .blur-1 { width: 40vw; height: 40vw; max-width: 500px; max-height: 500px; background: #007AFF; top: 5%; left: 10%; animation: move-blur-1 30s infinite alternate; }
        .blur-2 { width: 50vw; height: 50vw; max-width: 600px; max-height: 600px; background: #FF9500; bottom: 5%; right: 10%; animation: move-blur-2 35s infinite alternate; }
        @keyframes move-blur-1 { from { transform: translate(0, 0) scale(1) rotate(0deg); } to { transform: translate(10vw, 5vh) scale(1.3) rotate(55deg); } }
        @keyframes move-blur-2 { from { transform: translate(0, 0) scale(1) rotate(0deg); } to { transform: translate(-8vw, -5vh) scale(1.2) rotate(-70deg); } }

        :root {
            --primary-accent: #007AFF;
            --primary-accent-darker: #0056B3;
            --glass-bg: rgba(255, 255, 255, 0.55);
            --glass-border: rgba(0, 0, 0, 0.07);
            --text-primary: #1d1d1f;
            --text-secondary: #6e6e73;
        }
        
        .glass-panel {    
            background: var(--glass-bg);    
            backdrop-filter: blur(40px) saturate(180%);    
            -webkit-backdrop-filter: blur(40px) saturate(180%);    
            border: 1px solid var(--glass-border);    
            box-shadow: 0 10px 35px rgba(0, 0, 0, 0.08);
            border-radius: 24px;
        }
        @media (min-width: 768px) {
            .glass-panel { border-radius: 28px; }
        }

        .recipe-item.selected {    
            background-color: rgba(0, 122, 255, 0.1);    
            border-left: 4px solid var(--primary-accent);    
            color: var(--text-primary);    
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(0, 122, 255, 0.1);
        }
        .recipe-item:hover:not(.selected) { background-color: rgba(0, 0, 0, 0.04); }
        .recipe-dot { transition: transform 0.2s ease-in-out; }
        .recipe-dot:hover { transform: scale(1.25); }

        .btn { border-radius: 9999px; font-weight: 600; transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1); display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem;}
        .btn-primary { background-color: var(--primary-accent); border: none; color: white; box-shadow: 0 4px 14px rgba(0, 118, 255, 0.39); }
        .btn-primary:hover:not(:disabled) { background-color: var(--primary-accent-darker); transform: translateY(-2px) scale(1.02); box-shadow: 0 6px 18px rgba(0, 118, 255, 0.45); }
        .btn:disabled { background-color: #b0bec5; cursor: not-allowed; opacity: 0.7; box-shadow: none; }
        
        .lang-btn { background: #e9ecef; border: none; border-radius: 9999px; padding: 0.25rem; transition: all 0.2s ease; }
        .lang-btn.active { box-shadow: 0 0 0 2.5px var(--primary-accent); }
        .lang-btn svg { width: 1.5rem; height: 1.5rem; }
        
        .landing-title { font-size: clamp(2.5rem, 8vw, 4.8rem); font-weight: 800; color: var(--text-primary); line-height: 1.1; letter-spacing: -0.025em; }
        .quiz-question-title { font-size: clamp(1.8rem, 6vw, 3.5rem); font-weight: 700; color: var(--text-primary); line-height: 1.15; letter-spacing: -0.02em; }
        .landing-subtitle { font-size: clamp(1rem, 4vw, 1.35rem); color: var(--text-secondary); margin-top: 1.25rem; max-width: 650px; line-height: 1.6; }
        
        .view-transition { animation: fadeInUp 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
        .view-transition-out { animation: fadeOutDown 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeOutDown { from { opacity: 1; transform: translateY(0); } to { opacity: 0; transform: translateY(-20px); } }

        .quiz-option { background-color: rgba(0,0,0,0.03); border: 2px solid transparent; padding: 1.25rem; border-radius: 1.25rem; cursor: pointer; transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1); font-weight: 600; font-size: 1.1rem; text-align: center; }
        .quiz-option:hover { transform: translateY(-4px); box-shadow: 0 10px 20px rgba(0,0,0,0.07); }
        .quiz-option.selected { border-color: var(--primary-accent); background-color: rgba(0, 122, 255, 0.1); color: var(--primary-accent); }
        
        .filter-btn { background-color: rgba(0,0,0,0.05); border: 1px solid transparent; transition: all 0.2s ease-in-out; }
        .filter-btn.active { background-color: rgba(0, 122, 255, 0.1); border-color: var(--primary-accent); color: var(--primary-accent); font-weight: 600; }
        
        .spinner { border: 3px solid rgba(0, 0, 0, 0.1); width: 20px; height: 20px; border-radius: 50%; border-left-color: currentColor; animation: spin 1s ease infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        .modal { z-index: 50; transition: opacity 0.3s ease; }
        .modal-content { transition: transform 0.3s ease; border-radius: 28px; }
        .modal.hidden { opacity: 0; pointer-events: none; }
        .modal.hidden .modal-content { transform: scale(0.95); }
        
        #comparisonModalContent { background-color: #f0f9ff; border-radius: 0 0 28px 28px; }
        .prose-comparison h3 { font-size: 1.5rem; margin-top: 1.5rem; margin-bottom: 0.5rem; color: var(--text-primary); border-bottom: 2px solid var(--primary-accent); padding-bottom: 0.5rem; }

        .quiz-choice-option { cursor: pointer; transition: transform 0.2s ease-out, box-shadow 0.2s ease-out; background: rgba(255,255,255,0.7); border-radius: 20px;}
        .quiz-choice-option:hover { transform: scale(1.03); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1); }

        .overflow-y-auto::-webkit-scrollbar { width: 10px; }
        .overflow-y-auto::-webkit-scrollbar-track { background-color: transparent; }
        .overflow-y-auto::-webkit-scrollbar-thumb { background-color: rgba(0, 0, 0, 0.2); border-radius: 10px; border: 3px solid transparent; background-clip: content-box; }
        .overflow-y-auto::-webkit-scrollbar-thumb:hover { background-color: rgba(0, 0, 0, 0.4); }
        .overflow-y-auto { scrollbar-width: auto; scrollbar-color: rgba(0, 0, 0, 0.2) transparent; }

        #mobileNavMenu { transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); }

        /* Lightbox Styles */
        #lightbox { z-index: 100; background-color: rgba(0, 0, 0, 0.8); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); }
        #lightbox.hidden { opacity: 0; pointer-events: none; }
        #lightbox .lightbox-content { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        #lightbox.hidden .lightbox-content { transform: scale(0.95); opacity: 0; }
        .lightbox-thumb { cursor: pointer; border: 2px solid transparent; transition: all 0.2s ease; }
        .lightbox-thumb.active { border-color: var(--primary-accent); transform: scale(1.05); box-shadow: 0 0 15px rgba(0, 122, 255, 0.5); }
        .lightbox-nav-btn { background-color: rgba(0,0,0,0.4); transition: background-color 0.2s ease; }
        .lightbox-nav-btn:hover { background-color: rgba(0,0,0,0.7); }
        #lightbox-main-image { transition: opacity 0.2s ease-in-out; }
        
        /* Explanation Tab Specifics */
        .param-card { background-color: white; border-radius: 1.5rem; box-shadow: 0 10px 25px -5px rgba(0,0,0,0.05), 0 8px 10px -6px rgba(0,0,0,0.05); overflow: hidden; }
        .infographic { background-color: #f8f9fa; }
        .flowchart-step { position: relative; padding: 1.5rem; background-color: white; border-radius: 1rem; box-shadow: 0 4px 15px rgba(0,0,0,0.06); }
        .flowchart-arrow { color: #cbd5e1; }
    </style>
</head>
<body>
    <div id="bg-blurs"><div class="blur-circle blur-1"></div><div class="blur-circle blur-2"></div></div>
    
    <div id="appContainer" class="min-h-screen w-screen p-4 md:p-6 flex flex-col">
        <header class="flex justify-between items-center w-full z-20 flex-shrink-0">
            <button id="homeBtn" class="text-xl md:text-2xl font-bold text-gray-800 flex items-center gap-2">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6.253v11.494m-5.747-8.662l11.494 5.747m-11.494 0l11.494-5.747M4.75 12A7.25 7.25 0 0112 4.75v0A7.25 7.25 0 0119.25 12v0a7.25 7.25 0 01-7.25 7.25v0A7.25 7.25 0 014.75 12v0z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                <span data-translate-key="headerTitle" class="hidden sm:inline"></span>
            </button>
            <div class="flex items-center gap-2 md:gap-4">
                 <nav id="mainNav" class="hidden md:flex items-center gap-6">
                    <button data-view="recipeFormulas" class="nav-btn font-semibold text-gray-600 hover:text-black transition-colors"></button>
                    <button data-view="featuredPhotos" class="nav-btn font-semibold text-gray-600 hover:text-black transition-colors"></button>
                    <button data-view="explain" class="nav-btn font-semibold text-gray-600 hover:text-black transition-colors"></button>
                 </nav>
                <div class="flex items-center gap-2">
                    <button id="langEN" class="lang-btn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30"><clipPath id="t"><path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/></clipPath><path d="M0,0 v30 h60 v-30 z" fill="#00247d"/><path d="M0,0 L60,30 M60,0 L0,30" stroke="#fff" stroke-width="6"/><path d="M0,0 L60,30 M60,0 L0,30" clip-path="url(#t)" stroke="#cf142b" stroke-width="4"/><path d="M30,0 v30 M0,15 h60" stroke="#fff" stroke-width="10"/><path d="M30,0 v30 M0,15 h60" stroke="#cf142b" stroke-width="6"/></svg></button>
                    <button id="langVI" class="lang-btn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600"><path fill="#da251d" d="M0 0h900v600H0z"/><path fill="#ff0" d="m450 186-86 266 226-164h-280l226 164z"/></svg></button>
                </div>
                <button id="hamburgerBtn" class="md:hidden p-2 rounded-full hover:bg-black/10 focus:outline-none focus:ring-2 focus:ring-gray-500">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                </button>
            </div>
        </header>
        
        <div id="mainContent" class="flex-grow min-h-0 relative mt-4 md:mt-6 mb-2"></div>
    </div>
    
    <div id="mobileNavMenu" class="fixed inset-0 bg-black/40 backdrop-blur-sm z-40 transform translate-x-full md:hidden">
        <div class="absolute top-0 right-0 h-full w-2/3 max-w-sm bg-white/80 backdrop-blur-xl shadow-2xl p-6">
            <button id="closeMobileNavBtn" class="absolute top-4 right-4 text-3xl p-2">&times;</button>
            <nav class="mt-16 flex flex-col gap-6 text-center">
                <button data-view="recipeFormulas" class="nav-btn-mobile text-2xl font-semibold text-gray-700 py-2"></button>
                <button data-view="featuredPhotos" class="nav-btn-mobile text-2xl font-semibold text-gray-700 py-2"></button>
                <button data-view="explain" class="nav-btn-mobile text-2xl font-semibold text-gray-700 py-2"></button>
            </nav>
        </div>
    </div>

    <div id="comparisonModal" class="modal hidden fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-50">
        <div class="modal-content glass-panel w-full max-w-4xl max-h-[90vh] flex flex-col">
            <div class="p-4 md:p-6 border-b border-black/10 flex justify-between items-center flex-shrink-0">
                <h2 id="comparisonModalTitle" class="text-xl md:text-2xl font-bold"></h2>
                <button id="closeComparisonModalBtn" class="text-3xl leading-none p-2 rounded-full hover:bg-black/10">&times;</button>
            </div>
            <div id="comparisonModalContent" class="p-6 md:p-8 overflow-y-auto prose-comparison"></div>
        </div>
    </div>
    
    <div id="lightbox" class="hidden fixed inset-0 flex items-center justify-center p-4 transition-opacity duration-300">
        <div id="lightbox-bg" class="absolute inset-0"></div>
        <div class="lightbox-content relative w-full max-w-4xl max-h-full">
            <button id="lightbox-close" class="absolute -top-4 -right-2 md:top-0 md:-right-12 text-white text-5xl font-bold z-10 leading-none p-2">&times;</button>
            <div class="relative">
                <img id="lightbox-main-image" src="" alt="Ảnh demo công thức" class="w-full h-auto max-h-[75vh] object-contain rounded-lg shadow-2xl bg-black/50">
                <button id="lightbox-prev" class="lightbox-nav-btn absolute top-1/2 left-2 md:-left-16 -translate-y-1/2 p-2 md:p-3 rounded-full text-white">
                    <svg class="w-6 h-6 md:w-8 md:h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                </button>
                <button id="lightbox-next" class="lightbox-nav-btn absolute top-1/2 right-2 md:-right-16 -translate-y-1/2 p-2 md:p-3 rounded-full text-white">
                    <svg class="w-6 h-6 md:w-8 md:h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                </button>
            </div>
            <div id="lightbox-thumbnails" class="flex justify-center items-center gap-2 md:gap-4 mt-4"></div>
        </div>
    </div>

    <script type="module">
        // --- STATE & CONFIGURATION ---
        const state = {
            currentLang: 'vi',
            currentView: 'home',
            selectedRecipeId: null,
            comparisonList: [],
            lastGeneratedAiRecipe: null,
            isAILoading: false,
            quizStep: 0,
            quizAnswers: {},
            activeFilters: { type: 'all', contrast: 'all', saturation: 'all' },
            isMobileDetailActive: false,
            lightbox: {
                isOpen: false,
                images: [],
                currentIndex: 0
            }
        };

        const mainContentEl = document.getElementById('mainContent');
        let activeCharts = {};

        const translations = {
            // General
            headerTitle: {vi: "Alpha AI Color Lab", en: "Alpha AI Color Lab"},
            navRecipeFormulas: {vi:"Công thức màu", en:"Color Recipes"},
            navFeaturedPhotos: {vi: "Ảnh nổi bật", en: "Featured Photos"},
            navExplain: {vi:"Giải thích", en:"Guide"},
            noteTitle: {vi:"Lưu ý quan trọng", en:"Important Note"},
            footerText: {vi: "Phát triển bởi Sony Alpha Vietnam. Tính năng AI cung cấp bởi Google Gemini.", en: "Developed by Sony Alpha Vietnam. AI features powered by Google Gemini."},

            // Home / Quiz
            landingTitle: {vi:"Tìm màu sắc của riêng bạn.", en:"Find Your Signature Color."},
            landingSubtitle: {vi:"Trả lời vài câu hỏi để khám phá công thức màu được AI tạo ra dành riêng cho tâm trạng và phong cách của bạn.", en:"Answer a few questions to discover a unique color recipe, tailored by AI to your mood and style."},
            startQuizBtn: {vi:"Khám phá màu của bạn", en:"Discover Your Color"},
            quizResultTitle: {vi: "AI đề xuất 2 lựa chọn cho bạn:", en: "AI suggests 2 options for you:"},
            viewInLibraryBtn: {vi: "Xem trong thư viện", en: "View in Library"},
            loadingAnalyze: {vi: "Đang phân tích lựa chọn...", en: "Analyzing your choices..."},
            
            // Recipe Formulas
            sidebarTitle: {vi: "Công thức màu", en: "Color Recipes"},
            searchInputPlaceholder: {vi: "🔍 Tìm công thức...", en: "🔍 Search recipes..."},
            filterType: {vi: "Loại", en: "Type"},
            filterTypeColor: {vi: "Màu", en: "Color"},
            filterTypeBW: {vi: "Trắng Đen", en: "B&W"},
            filterContrast: {vi: "Tương phản", en: "Contrast"},
            filterSaturation: {vi: "Bão hòa", en: "Saturation"},
            filterHigh: {vi: "Cao", en: "High"},
            filterMedium: {vi: "Vừa", en: "Med"},
            filterLow: {vi: "Thấp", en: "Low"},
            compareBtn: {vi: "So sánh bằng AI", en: "Compare with AI"},
            recipeDetailWelcomeTitle: {vi: "Thư viện màu Tương tác", en: "Interactive Color Library"},
            recipeDetailWelcomeText: {vi: "Khám phá các công thức màu một cách trực quan. Nhấp vào một điểm trên biểu đồ hoặc một công thức trong danh sách để xem chi tiết.", en: "Explore color recipes visually. Click a point on the chart or a recipe in the list to see details."},
            whiteBalanceTitle: {vi: "Cân bằng trắng (WB)", en: "White Balance (WB)"},
            recipeSettingsTitle: {vi: "Cài đặt Chính", en: "Main Settings"},
            colorDepthTitle: {vi: "Độ sâu màu", en: "Color Depth"},
            detailTitle: {vi: "Chi tiết", en: "Detail"},
            aiTuningTitle: {vi: "Tinh chỉnh bằng AI", en: "AI Fine-Tuning"},
            aiTuningPlaceholder: {vi: "Nhập yêu cầu của bạn ở đây... (ví dụ: 'làm cho màu ấm hơn và trong hơn')", en: "Enter your request here... (e.g., 'make it warmer and clearer')"},
            aiTuningBtn: {vi: "Tạo bằng AI", en: "Generate with AI"},
            aiResultTitle: {vi: "Công thức đã được AI tinh chỉnh:", en: "AI-Adjusted Recipe:"},
            compareWithOriginalBtn: {vi: "So sánh với bản gốc", en: "Compare with Original"},
            comparisonModalTitle: {vi: "So sánh Công thức", en: "Recipe Comparison"},
            comparisonLoading: {vi: "AI đang phân tích và so sánh...", en: "AI is analyzing and comparing..."},
            colorChartTitle: {vi: "Biểu đồ Màu", en: "Color Chart"},
            bwChartTitle: {vi: "Biểu đồ Đơn sắc (B&W)", en: "Monochrome (B&W) Chart"},
            backToListBtn: {vi: "← Quay lại danh sách", en: "← Back to list"},
            exploreMoreBtn: { vi: 'Khám phá Thư viện Màu', en: 'Explore Color Library' },

            // Featured Photos
            featuredTitle: {vi: "Ảnh Nổi Bật từ Cộng Đồng", en: "Featured Photos from the Community"},
            featuredCta: {vi: "Cùng nhau xây dựng một thư viện ảnh đầy cảm hứng! Hãy chia sẻ những tác phẩm bạn chụp bằng các công thức từ Alpha AI Color Lab. Ảnh được chọn sẽ xuất hiện tại đây để vinh danh.", en: "Let's build an inspiring gallery together! Share your creations shot with recipes from the Alpha AI Color Lab. Selected photos will be featured here."},
            featuredAlbumBtn: {vi: "Xem Album & Đóng góp Ảnh", en: "View Album & Contribute Photos"},
            
            // Tutorial & Explanation
            explainHeader: {vi: "Làm Chủ Màu Sắc Cùng Sony Alpha", en:"Mastering Color with Sony Alpha"},
            explainSubtitle: {vi: "Hướng dẫn toàn diện để tạo ra màu sắc đậm chất riêng cho ảnh tĩnh và video", en:"A comprehensive guide to creating your unique color signature for stills and video"},
            paramsDeepDiveTitle: {vi: "Lý giải thông số Picture Profile", en: "Picture Profile Parameter Deep Dive"},
            
            gammaTitle: { vi: "Gamma", en: "Gamma" },
            gammaDesc: { vi: "Quyết định độ tương phản tổng thể bằng cách điều chỉnh độ sáng của các tông màu. Gamma cao cho ảnh gắt, trong khi gamma thấp cho ảnh mềm mại, phẳng hơn.", en: "Determines the overall contrast by adjusting tonal brightness. High gamma gives a punchy image, while low gamma results in a softer, flatter look." },
            gammaGraphShadows: { vi: "Vùng Tối", en: "Shadows" },
            gammaGraphHighlights: { vi: "Vùng Sáng", en: "Highlights" },

            blackGammaTitle: { vi: "Black Gamma", en: "Black Gamma" },
            blackGammaDesc: { vi: "Tinh chỉnh riêng vùng tối nhất của ảnh. Kéo lên để làm vùng tối sáng hơn (tạo look 'faded'), hoặc kéo xuống để làm tối sâu hơn.", en: "Fine-tunes only the darkest parts of the image. Raise it to lift the blacks (for a 'faded' look), or lower it to deepen the shadows." },

            kneeTitle: { vi: "Knee", en: "Knee" },
            kneeDesc: { vi: "Nén vùng sáng để tránh bị 'cháy' (mất chi tiết). Giống như một chiếc gối mềm, nó làm mượt sự chuyển tiếp sang vùng trắng tinh, giữ lại chi tiết trên mây hoặc áo cưới.", en: "Compresses highlights to prevent 'clipping' (losing detail). Like a soft cushion, it smooths the transition to pure white, saving details in clouds or wedding dresses." },
            
            colorModeTitle: { vi: "Color Mode", en: "Color Mode" },
            colorModeDesc: { vi: "Hoạt động song song với Gamma để xác định đặc tính màu. Chế độ 'Pro' cho màu tự nhiên, trong khi 'S-Gamut3.Cine' cung cấp không gian màu rộng lớn cho hậu kỳ chuyên nghiệp.", en: "Works alongside Gamma to define the color characteristics. 'Pro' mode gives natural colors, while 'S-Gamut3.Cine' provides a wide color space for professional grading." },

            saturationTitle: { vi: "Saturation", en: "Saturation" },
            saturationDesc: { vi: "Điều khiển cường độ của tất cả các màu. Tăng để màu rực rỡ, sống động; giảm để màu trầm hơn, nhẹ nhàng hơn.", en: "Controls the intensity of all colors. Increase for vibrant, vivid colors; decrease for more subdued, gentle tones." },

            colorDepthTitleExplain: { vi: "Color Depth", en: "Color Depth" },
            colorDepthDesc: { vi: "Cho phép bạn tăng hoặc giảm độ 'giàu' của từng kênh màu riêng lẻ (Đỏ, Xanh lá, Xanh dương, Lục lam, Tím, Vàng). Đây là công cụ mạnh mẽ để tạo phong cách màu độc đáo.", en: "Lets you increase or decrease the richness of individual color channels (Red, Green, Blue, Cyan, Magenta, Yellow). A powerful tool for unique color styling." },

            detailTitleExplain: { vi: "Detail", en: "Detail" },
            detailDesc: { vi: "Kiểm soát độ sắc nét của hình ảnh. Giảm mạnh (ví dụ: -7) để có được vẻ ngoài mềm mại, hữu cơ, giống phim. Tăng lên nếu bạn cần hình ảnh cực kỳ sắc nét.", en: "Controls the image's sharpness. Decrease it dramatically (e.g., -7) for a soft, organic, film-like appearance. Increase it if you need a very sharp image." },
            
            practicalTitle: {vi:"Thực Hành: Tạo Dáng Vẻ Phim Ảnh (Film Look)", en:"Practical Application: Creating a Film Look"},
            practicalDesc: {vi:"Bằng cách kết hợp các công cụ trên, bạn có thể tạo ra vô số màu sắc độc đáo. Dưới đây là quy trình 4 bước để bắt đầu:", en:"By combining these tools, you can create countless unique color looks. Here is a 4-step process to get started:"},
            practicalStep1: {vi: "Nền Tảng", en:"Foundation"},
            practicalStep1Desc: {vi: "Chọn <strong>Gamma: Cine4</strong> & <strong>Color Mode: Pro</strong> để có một nền tảng điện ảnh, mềm mại.", en:"Select <strong>Gamma: Cine4</strong> & <strong>Color Mode: Pro</strong> for a soft, cinematic base."},
            practicalStep2: {vi: "Độ Phai Màu", en:"The Faded Look"},
            practicalStep2Desc: {vi: "Tinh chỉnh <strong>Black Level: +8</strong>. Thao tác này sẽ nâng vùng tối, tạo hiệu ứng phai màu (faded) đặc trưng của phim.", en:"Adjust <strong>Black Level: +8</strong>. This lifts the shadows, creating the characteristic faded film effect."},
            practicalStep3: {vi: "Định Hình Màu", en:"Color Shaping"},
            practicalStep3Desc: {vi: "Sử dụng <strong>Color Depth</strong>. Ví dụ: <strong>R: +3</strong> và <strong>Y: +2</strong> để có tông màu ấm kiểu Kodak.", en:"Use <strong>Color Depth</strong>. For example, <strong>R: +3</strong> and <strong>Y: +2</strong> for a warm, Kodak-like tone."},
            practicalStep4: {vi: "Hoàn Thiện", en:"Final Touches"},
            practicalStep4Desc: {vi: "Đặt <strong>Detail: -7</strong> để có hình ảnh mềm mại, không quá sắc nét kiểu kỹ thuật số. Điều chỉnh <strong>Saturation</strong> tổng thể theo ý thích.", en:"Set <strong>Detail: -7</strong> for a soft, non-digital look. Adjust overall <strong>Saturation</strong> to taste."},
            
            tutorialTitle: { vi: "Hướng dẫn Cài đặt Nhanh", en: "Quick Setup Guide" },
            tutorialStep1Title: { vi: "Bước 1: Tìm Picture Profile", en: "Step 1: Find Picture Profile" },
            tutorialStep1P1: { vi: "Trong Menu, tìm đến mục <strong>Color/Tone</strong> (biểu tượng hồng) → <strong>Picture Profile</strong>.", en: "In the Menu, navigate to the <strong>Color/Tone</strong> section (pink icon) → <strong>Picture Profile</strong>." },
            tutorialStep2Title: { vi: "Bước 2: Chọn và Reset", en: "Step 2: Select & Reset" },
            tutorialStep2P1: { vi: "Chọn một profile trống (ví dụ: PP10), đi vào trong và nhấn nút 'Xoá' để reset về mặc định.", en: "Choose an empty profile (e.g., PP10), enter it, and press the 'Delete' button to reset it to default." },
            tutorialStep3Title: { vi: "Bước 3: Nhập thông số", en: "Step 3: Enter Parameters" },
            tutorialStep3P1: { vi: "Cẩn thận nhập tất cả các thông số của công thức, từ Black Level đến Color Depth.", en: "Carefully enter all parameters from the recipe, from Black Level to Color Depth." },
            tutorialStep4Title: { vi: "Bước 4: Cài đặt White Balance", en: "Step 4: Set White Balance" },
            tutorialStep4P1: { vi: "Thoát khỏi Picture Profile, vào mục <strong>White Balance</strong> và chỉnh theo nhiệt độ K và WB Shift được ghi trong công thức.", en: "Exit Picture Profile, go to <strong>White Balance</strong>, and adjust the Kelvin temperature and WB Shift as specified in the recipe." },

            // Quiz Questions
            quizQ1: {vi: "Gu thẩm mỹ của bạn?", en: "Your aesthetic?"},    
            quizQ1A1: {vi: "Cổ điển", en: "Classic"},    
            quizQ1A2: {vi: "Hiện đại", en: "Modern"},    
            quizQ1A3: {vi: "Điện ảnh", en: "Cinematic"},    
            quizQ1A4: {vi: "Nghệ thuật", en: "Artistic"},
        };
        
        // --- API CALLS (MOCKS) ---
        async function callAIApi(prompt, delay = 1000) {
            if (state.isAILoading) return;
            state.isAILoading = true;
            try {
                await new Promise(resolve => setTimeout(resolve, delay));
                if (prompt.includes("Recommend TWO recipes")) {
                    const idx1 = Math.floor(Math.random() * recipesData.length);
                    let idx2 = Math.floor(Math.random() * recipesData.length);
                    while (idx1 === idx2) { idx2 = Math.floor(Math.random() * recipesData.length); }
                    const mockRecipe1 = recipesData[idx1]; const mockRecipe2 = recipesData[idx2];
                    return [
                        { recipeId: mockRecipe1.id, moodDescription: mockRecipe1.description[state.currentLang] },
                        { recipeId: mockRecipe2.id, moodDescription: mockRecipe2.description[state.currentLang] }
                    ];
                }
                if (prompt.includes("Original Recipe")) {
                    const originalId = prompt.match(/ID: (.*?)\)/)[1];
                    const originalRecipe = recipesData.find(r => r.id === originalId);
                    let adjustedRecipe = JSON.parse(JSON.stringify(originalRecipe));
                    adjustedRecipe.name = {vi: `${originalRecipe.name.vi} (AI Tinh chỉnh)`, en: `${originalRecipe.name.en} (AI Adjusted)`};
                    if (prompt.includes('ấm') || prompt.includes('warmer')) { adjustedRecipe.whiteBalance = "5500K, A6-M1"; }
                    if (prompt.includes('trong') || prompt.includes('clearer')) { if(adjustedRecipe.settings) adjustedRecipe.settings['Black level'] = '0'; }
                    return { recipe: adjustedRecipe };
                }
                if (prompt.includes("Compare the following two recipes")) {
                    const names = prompt.match(/\*(.*?)\* and \*(.*?)\*/);
                    return `### Cảm Giác & Phong Cách\n* **${names[1]}:** Mang lại cảm giác ấm áp, hoài cổ.\n* **${names[2]}:** Tạo ra cái nhìn lạnh hơn, hiện đại.\n\n### So Sánh Thông Số Chính\n| Thông số | ${names[1]} | ${names[2]} | Phân Tích |\n|---|---|---|---|\n| **White Balance** | Ấm (4000K) | Lạnh (8000K) | Đây là sự khác biệt chính. |\n| **Black Level** | -15 | -10 | Cả hai đều tăng tương phản, nhưng công thức 1 có vùng tối sâu hơn. |\n\n### Trường Hợp Sử Dụng\n* **Dùng ${names[1]} khi:** Chụp chân dung, hoàng hôn.\n* **Dùng ${names[2]} khi:** Chụp phong cảnh, kiến trúc.`;
                }
            } catch (error) {
                console.error("AI API call failed:", error); return null;
            } finally {
                state.isAILoading = false;
                updateUIAfterAILoading();
            }
        }
        
        // --- UTILITY & HELPER FUNCTIONS ---
        function t(key) { return translations[key]?.[state.currentLang] || key; }
        
        function applyTranslations() {
            document.querySelectorAll('[data-translate-key]').forEach(el => {
                const key = el.dataset.translateKey;
                if (translations[key] && translations[key][state.currentLang]) {
                    if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') { el.placeholder = t(key); }    
                    else { el.innerHTML = t(key); }
                }
            });
            document.querySelectorAll('#mainNav .nav-btn').forEach(btn => btn.textContent = t('nav'+btn.dataset.view.charAt(0).toUpperCase()+btn.dataset.view.slice(1)));
            document.querySelectorAll('#mobileNavMenu .nav-btn-mobile').forEach(btn => btn.textContent = t('nav'+btn.dataset.view.charAt(0).toUpperCase()+btn.dataset.view.slice(1)));
            document.getElementById('langVI').classList.toggle('active', state.currentLang === 'vi');
            document.getElementById('langEN').classList.toggle('active', state.currentLang === 'en');
        }

        function createSettingsGrid(settings) {
            if (!settings) return '';
            return Object.entries(settings).map(([key, value]) => `<div class="flex flex-col"><span class="text-xs text-neutral-500">${key}</span><span class="font-semibold text-lg">${value}</span></div>`).join('');
        };

        function createFullRecipeHTML(recipe, isMainView = false) {
            const titleClass = isMainView ? 'text-xl font-bold' : 'text-lg font-bold';
            const noteHTML = (recipe.notes && recipe.notes[state.currentLang])    
                ? `<div class="mt-4 p-4 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 rounded-xl">
                        <p class="font-bold" data-translate-key="noteTitle"></p>
                        <p>${recipe.notes[state.currentLang]}</p>
                      </div>` : '';

            return `${noteHTML}<div class="space-y-6 mt-6">
                <div><h4 class="${titleClass} mb-2" data-translate-key="whiteBalanceTitle"></h4><div class="p-4 bg-black/5 rounded-xl"><p class="font-semibold text-lg">${recipe.whiteBalance || ''}</p></div></div>
                <div><h4 class="${titleClass} mb-2" data-translate-key="recipeSettingsTitle"></h4><div class="grid grid-cols-2 sm:grid-cols-3 gap-x-6 gap-y-5 p-5 bg-black/5 rounded-xl">${createSettingsGrid(recipe.settings)}</div></div>
                ${recipe.colorDepth ? `<div><h4 class="${titleClass} mb-2" data-translate-key="colorDepthTitle"></h4><div class="grid grid-cols-3 sm:grid-cols-6 gap-x-6 gap-y-5 p-5 bg-black/5 rounded-xl">${createSettingsGrid(recipe.colorDepth)}</div></div>` : ''}
                ${recipe.detailSettings ? `<div><h4 class="${titleClass} mb-2" data-translate-key="detailTitle"></h4><div class="grid grid-cols-2 sm:grid-cols-3 gap-x-6 gap-y-5 p-5 bg-black/5 rounded-xl">${createSettingsGrid(recipe.detailSettings)}</div></div>` : ''}
            </div>`;
        }

        function updateUIAfterAILoading() {
            document.querySelectorAll('button:disabled').forEach(btn => {
                if (btn.querySelector('.spinner')) {
                    btn.innerHTML = btn.dataset.originalText || '';
                    btn.disabled = false;
                }
            });
        }
        
        // --- VIEW RENDERING LOGIC ---
        const viewTemplates = {
            home: () => `<div id="homeView" class="w-full h-full flex flex-col items-center justify-center text-center absolute inset-0 view-transition p-4">
                <h1 data-translate-key="landingTitle" class="landing-title"></h1>
                <p data-translate-key="landingSubtitle" class="landing-subtitle"></p>
                <button id="startQuizBtn" class="btn btn-primary mt-10 py-4 px-10 text-lg" data-translate-key="startQuizBtn"></button>
            </div>`,
            
            quiz: () => {
                if (state.quizStep >= 4) return '';
                const q = [
                    { id: 'aesthetic', title: 'quizQ1', options: ['quizQ1A1', 'quizQ1A2', 'quizQ1A3', 'quizQ1A4'], values: ['Vintage', 'Modern', 'Cinematic', 'Artistic'] }
                ][state.quizStep];
                const optionsHTML = q.options.map((optKey, index) => `<div class="quiz-option" data-value="${q.values[index]}"><span data-translate-key="${optKey}"></span></div>`).join('');
                return `<div id="quizView" class="w-full h-full flex flex-col items-center justify-center absolute inset-0 view-transition">
                    <div class="w-full max-w-4xl text-center px-4" data-quiz-group="${q.id}">
                        <h2 class="quiz-question-title" data-translate-key="${q.title}"></h2>
                        <div class="grid grid-cols-2 gap-4 sm:gap-5 mt-10 sm:mt-12">${optionsHTML}</div>
                    </div>
                </div>`;
            },
            
            recipeFormulas: () => `
                <div id="recipeFormulasView" class="w-full h-full flex flex-col md:flex-row gap-6 absolute inset-0 view-transition">
                    <aside id="recipeListPanel" class="w-full md:w-1/3 lg:w-[30%] xl:w-1/4 glass-panel p-4 md:p-6 flex flex-col flex-shrink-0 md:flex">
                        <h2 class="text-2xl md:text-3xl font-bold" data-translate-key="sidebarTitle"></h2>
                        <input type="search" id="searchInput" class="w-full p-3 my-4 rounded-xl bg-gray-200/50 border-2 border-transparent focus:border-blue-500 focus:bg-white transition-all" data-translate-key="searchInputPlaceholder">
                        <div id="filtersContainer" class="space-y-4 text-sm mb-4">
                             <div><h4 class="font-semibold mb-2" data-translate-key="filterType"></h4><div class="flex gap-2" data-filter-group="type"><button class="filter-btn flex-1 py-2 px-3 rounded-full active" data-filter-value="all">All</button><button class="filter-btn flex-1 py-2 px-3 rounded-full" data-translate-key="filterTypeColor" data-filter-value="color"></button><button class="filter-btn flex-1 py-2 px-3 rounded-full" data-translate-key="filterTypeBW" data-filter-value="bw"></button></div></div>
                             <div><h4 class="font-semibold mb-2" data-translate-key="filterContrast"></h4><div class="flex gap-2" data-filter-group="contrast"><button class="filter-btn flex-1 py-2 px-3 rounded-full active" data-filter-value="all">All</button><button class="filter-btn flex-1 py-2 px-3 rounded-full" data-translate-key="filterHigh" data-filter-value="high"></button><button class="filter-btn flex-1 py-2 px-3 rounded-full" data-translate-key="filterMedium" data-filter-value="medium"></button><button class="filter-btn flex-1 py-2 px-3 rounded-full" data-translate-key="filterLow" data-filter-value="low"></button></div></div>
                             <div><h4 class="font-semibold mb-2" data-translate-key="filterSaturation"></h4><div class="flex gap-2" data-filter-group="saturation"><button class="filter-btn flex-1 py-2 px-3 rounded-full active" data-filter-value="all">All</button><button class="filter-btn flex-1 py-2 px-3 rounded-full" data-translate-key="filterHigh" data-filter-value="high"></button><button class="filter-btn flex-1 py-2 px-3 rounded-full" data-translate-key="filterMedium" data-filter-value="medium"></button><button class="filter-btn flex-1 py-2 px-3 rounded-full" data-translate-key="filterLow" data-filter-value="low"></button></div></div>
                        </div>
                        <div id="recipeListContainer" class="space-y-2 pt-4 border-t flex-grow overflow-y-auto pr-2 -mr-3"></div>
                        <div id="compareBtnContainer" class="pt-4 flex-shrink-0"></div>
                    </aside>
                    <main id="recipeMainPanel" class="w-full md:w-2/3 lg:w-[70%] xl:w-3/4 flex-col min-h-0 hidden md:flex">
                        <div class="glass-panel flex-grow overflow-y-auto p-6 lg:p-10">
                           <div id="chartsContainer">
                               <div class="text-center mb-10">
                                   <h2 class="text-2xl md:text-3xl font-bold text-gray-700" data-translate-key="recipeDetailWelcomeTitle"></h2><p class="text-neutral-500 mt-2 max-w-xl mx-auto" data-translate-key="recipeDetailWelcomeText"></p>
                               </div>
                               <div class="grid grid-cols-1 xl:grid-cols-2 gap-8">
                                   <div><h3 class="text-xl font-bold text-center mb-4" data-translate-key="colorChartTitle"></h3><div class="chart-container"><canvas id="colorChart"></canvas></div></div>
                                   <div><h3 class="text-xl font-bold text-center mb-4" data-translate-key="bwChartTitle"></h3><div class="chart-container"><canvas id="bwChart"></canvas></div></div>
                               </div>
                           </div>
                           <div id="recipeContent" class="hidden"></div>
                        </div>
                    </main>
                    <div id="recipeDetailPanelMobile" class="w-full h-full absolute inset-0 bg-[#f4f7fc] p-4 overflow-y-auto hidden">
                        <button id="backToListBtn" class="btn bg-gray-200 text-gray-800 mb-4 p-4" data-translate-key="backToListBtn"></button>
                        <div class="glass-panel p-6 overflow-y-auto">
                           <div id="recipeContentMobile"></div>
                        </div>
                    </div>
                </div>`,
            
            featuredPhotos: () => `<div id="featuredPhotosView" class="w-full h-full absolute inset-0 overflow-y-auto view-transition p-4">
                <div class="glass-panel p-6 md:p-12 text-center max-w-5xl mx-auto">
                    <h2 class="text-2xl md:text-4xl font-bold" data-translate-key="featuredTitle"></h2>
                    <p class="text-base md:text-lg text-neutral-600 mt-4 max-w-3xl mx-auto" data-translate-key="featuredCta"></p>
                    <a href="https://photos.app.goo.gl/H8v1SQ68RSnn2r5Q6" target="_blank" rel="noopener noreferrer" class="btn btn-primary mt-8 py-3 px-8 text-base md:text-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M12 2L12 11M12 11L15 8M12 11L9 8"/><path d="M20 13.33V18C20 19.1046 19.1046 20 18 20H6C4.89543 20 4 19.1046 4 18V6C4 4.89543 4.89543 4 6 4H10.67" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                        <span data-translate-key="featuredAlbumBtn"></span>
                    </a>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mt-10">
                        ${recipesData.slice(0,6).map((recipe, index) => `
                            <div class="bg-gray-200 group rounded-xl overflow-hidden cursor-pointer lightbox-trigger-thumb"
                                data-recipe-id="${recipe.id}"
                                data-index="0">
                                <img src="${recipe.demoImages[0]}" alt="Ảnh demo công thức ${recipe.name[state.currentLang]}" class="aspect-video w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-300">
                            </div>
                        `).join('')}
                    </div>
                </div>
            </div>`,
            
            explain: () => `
            <div id="explainView" class="w-full h-full absolute inset-0 overflow-y-auto view-transition bg-slate-50 text-gray-800">
                <div class="container mx-auto p-4 sm:p-6 md:p-12">
                    <header class="text-center mb-12 md:mb-16 pt-4 md:pt-8">
                        <h1 class="text-3xl md:text-5xl font-extrabold text-slate-800 mb-2" data-translate-key="explainHeader"></h1>
                        <h2 class="text-lg md:text-xl text-slate-600 max-w-3xl mx-auto" data-translate-key="explainSubtitle"></h2>
                    </header>
            
                    <main class="space-y-16 md:space-y-24">
                        <section>
                            <h3 class="text-2xl md:text-4xl font-bold text-center mb-12" data-translate-key="paramsDeepDiveTitle"></h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                                <!-- Gamma -->
                                <div class="param-card flex flex-col">
                                    <div class="p-6"><h4 class="text-2xl font-bold" data-translate-key="gammaTitle"></h4><p class="text-gray-600 mt-1" data-translate-key="gammaDesc"></p></div>
                                    <div class="infographic p-6 flex-grow flex items-center justify-center mt-auto"><svg viewBox="0 0 100 100" class="w-full h-full max-h-48"><path d="M 10 90 Q 50 50 90 10" stroke="#007AFF" stroke-width="3" fill="none" stroke-linecap="round" stroke-dasharray="4" /><path d="M 10 90 Q 70 20 90 10" stroke="#34D399" stroke-width="4" fill="none" stroke-linecap="round" /><path d="M 10 90 L 90 10" stroke="#E5E7EB" stroke-width="2" fill="none" /><text x="12" y="80" font-size="8" class="fill-gray-500" data-translate-key="gammaGraphShadows"></text><text x="68" y="22" font-size="8" class="fill-gray-500" data-translate-key="gammaGraphHighlights"></text></svg></div>
                                </div>
                                <!-- Black Gamma -->
                                <div class="param-card flex flex-col">
                                    <div class="p-6"><h4 class="text-2xl font-bold" data-translate-key="blackGammaTitle"></h4><p class="text-gray-600 mt-1" data-translate-key="blackGammaDesc"></p></div>
                                    <div class="infographic p-6 flex-grow flex items-center justify-center mt-auto"><div class="w-full h-16 bg-gradient-to-r from-gray-800 via-gray-500 to-gray-200 rounded-lg shadow-inner"></div></div>
                                </div>
                                <!-- Knee -->
                                <div class="param-card flex flex-col">
                                     <div class="p-6"><h4 class="text-2xl font-bold" data-translate-key="kneeTitle"></h4><p class="text-gray-600 mt-1" data-translate-key="kneeDesc"></p></div>
                                    <div class="infographic p-6 flex-grow flex items-center justify-center mt-auto"><svg viewBox="0 0 100 80" class="w-full h-full max-h-48"><path d="M 10 70 L 60 20 L 90 20" stroke="#FECACA" stroke-width="3" fill="none" /><path d="M 10 70 L 50 30 Q 60 20 70 20 L 90 20" stroke="#F87171" stroke-width="4" fill="none" stroke-linecap="round"/><circle cx="60" cy="20" r="3" fill="red"/><text x="65" y="18" font-size="8" class="fill-red-700">Clip</text></svg></div>
                                </div>
                                <!-- Color Mode -->
                                <div class="param-card flex flex-col">
                                    <div class="p-6"><h4 class="text-2xl font-bold" data-translate-key="colorModeTitle"></h4><p class="text-gray-600 mt-1" data-translate-key="colorModeDesc"></p></div>
                                    <div class="infographic p-6 flex-grow flex items-center justify-center mt-auto"><div class="flex gap-2"><div class="w-12 h-12 rounded-full bg-blue-200"></div><div class="w-12 h-12 rounded-full bg-green-200"></div><div class="w-12 h-12 rounded-full bg-red-200"></div></div></div>
                                </div>
                                <!-- Saturation -->
                                <div class="param-card flex flex-col">
                                    <div class="p-6"><h4 class="text-2xl font-bold" data-translate-key="saturationTitle"></h4><p class="text-gray-600 mt-1" data-translate-key="saturationDesc"></p></div>
                                    <div class="infographic p-6 flex-grow flex items-center justify-center mt-auto"><div class="w-full h-12 rounded-lg bg-gradient-to-r from-gray-400 to-purple-500"></div></div>
                                </div>
                                <!-- Color Depth -->
                                <div class="param-card flex flex-col">
                                    <div class="p-6"><h4 class="text-2xl font-bold" data-translate-key="colorDepthTitleExplain"></h4><p class="text-gray-600 mt-1" data-translate-key="colorDepthDesc"></p></div>
                                    <div class="infographic p-6 flex-grow flex items-center justify-center mt-auto"><div class="flex justify-around w-full h-16 items-end gap-1"><div class="w-4 rounded-t-sm bg-red-500" style="height: 60%"></div><div class="w-4 rounded-t-sm bg-green-500" style="height: 80%"></div><div class="w-4 rounded-t-sm bg-blue-500" style="height: 50%"></div><div class="w-4 rounded-t-sm bg-cyan-500" style="height: 70%"></div><div class="w-4 rounded-t-sm bg-purple-500" style="height: 40%"></div><div class="w-4 rounded-t-sm bg-yellow-500" style="height: 90%"></div></div></div>
                                </div>
                                 <!-- Detail -->
                                <div class="param-card flex flex-col col-span-1 md:col-span-2 lg:col-span-1">
                                    <div class="p-6"><h4 class="text-2xl font-bold" data-translate-key="detailTitleExplain"></h4><p class="text-gray-600 mt-1" data-translate-key="detailDesc"></p></div>
                                    <div class="infographic p-6 flex-grow flex items-center justify-center mt-auto"><div class="w-full text-center"><span class="text-6xl font-serif text-gray-400">A</span><span class="text-6xl font-serif font-bold text-gray-800 ml-8">A</span></div></div>
                                </div>
                            </div>
                        </section>
            
                        <section>
                            <h3 class="text-2xl md:text-4xl font-bold text-center mb-4" data-translate-key="practicalTitle"></h3>
                            <p class="max-w-3xl mx-auto text-center text-gray-600 mt-2 mb-12" data-translate-key="practicalDesc"></p>
                             <div class="flex flex-col md:flex-row items-center justify-center gap-4 md:gap-0">
                                <!-- Step 1 -->
                                <div class="flowchart-step w-full md:w-auto"><div class="text-blue-500 font-bold mb-2">Bước 1</div><h4 class="text-lg font-bold mb-2" data-translate-key="practicalStep1"></h4><p class="text-sm text-gray-600" data-translate-key="practicalStep1Desc"></p></div>
                                <div class="flowchart-arrow transform -rotate-90 md:rotate-0"><svg width="48" height="48" viewBox="0 0 24 24"><path fill="currentColor" d="M16.01 11H4v2h12.01v3L20 12l-3.99-4z"></path></svg></div>
                                <!-- Step 2 -->
                                <div class="flowchart-step w-full md:w-auto"><div class="text-green-500 font-bold mb-2">Bước 2</div><h4 class="text-lg font-bold mb-2" data-translate-key="practicalStep2"></h4><p class="text-sm text-gray-600" data-translate-key="practicalStep2Desc"></p></div>
                                <div class="flowchart-arrow transform -rotate-90 md:rotate-0"><svg width="48" height="48" viewBox="0 0 24 24"><path fill="currentColor" d="M16.01 11H4v2h12.01v3L20 12l-3.99-4z"></path></svg></div>
                                <!-- Step 3 -->
                                <div class="flowchart-step w-full md:w-auto"><div class="text-purple-500 font-bold mb-2">Bước 3</div><h4 class="text-lg font-bold mb-2" data-translate-key="practicalStep3"></h4><p class="text-sm text-gray-600" data-translate-key="practicalStep3Desc"></p></div>
                                <div class="flowchart-arrow transform -rotate-90 md:rotate-0"><svg width="48" height="48" viewBox="0 0 24 24"><path fill="currentColor" d="M16.01 11H4v2h12.01v3L20 12l-3.99-4z"></path></svg></div>
                                 <!-- Step 4 -->
                                <div class="flowchart-step w-full md:w-auto"><div class="text-orange-500 font-bold mb-2">Bước 4</div><h4 class="text-lg font-bold mb-2" data-translate-key="practicalStep4"></h4><p class="text-sm text-gray-600" data-translate-key="practicalStep4Desc"></p></div>
                             </div>
                        </section>
                    </main>
                    <footer class="text-center text-sm text-gray-500 pt-8 mt-12 border-t">
                        <p data-translate-key="footerText"></p>
                    </footer>
                </div>
            </div>`
        };

        function renderView(viewName) {
            state.currentView = viewName;
            return new Promise(resolve => {
                const currentContent = mainContentEl.children[0];
                if (currentContent) {
                    currentContent.classList.add('view-transition-out');
                    currentContent.addEventListener('animationend', () => {
                        mainContentEl.innerHTML = viewTemplates[viewName]();
                        attachViewEventListeners(viewName);
                        applyTranslations();
                        resolve();
                    }, { once: true });
                } else {
                    mainContentEl.innerHTML = viewTemplates[viewName]();
                    attachViewEventListeners(viewName);
                    applyTranslations();
                    resolve();
                }
            });
        }
        
        function handleFilterClick(e) {
            const btn = e.target.closest('.filter-btn'); if (!btn) return;
            const group = btn.closest('[data-filter-group]').dataset.filterGroup;
            const value = btn.dataset.filterValue; state.activeFilters[group] = value;
            document.querySelectorAll(`[data-filter-group="${group}"] .filter-btn`).forEach(b => b.classList.remove('active'));
            btn.classList.add('active'); renderLibraryList();
        }

        function handleRecipeSelection(id, type) {
            if (type === 'checkbox') {
                const index = state.comparisonList.indexOf(id);
                if (index > -1) { state.comparisonList.splice(index, 1); } 
                else if (state.comparisonList.length < 2) { state.comparisonList.push(id); }
            } else {
                if (state.selectedRecipeId === id) {
                    state.selectedRecipeId = null;
                    state.isMobileDetailActive = false;
                } else {
                    state.selectedRecipeId = id;
                    state.isMobileDetailActive = true;
                }
                state.comparisonList = [];
            }
            renderLibraryList();
            renderLibraryDetails();
        }

        async function handleAiComparison(id1, id2, recipe2Obj = null) {
            const modal = document.getElementById('comparisonModal');
            const titleEl = document.getElementById('comparisonModalTitle');
            const contentEl = document.getElementById('comparisonModalContent');
            modal.classList.remove('hidden');
            titleEl.textContent = t('comparisonModalTitle');
            contentEl.innerHTML = `<div class="flex items-center justify-center p-8"><div class="spinner !w-12 !h-12 !border-4"></div><p class="ml-4 text-lg font-semibold">${t('comparisonLoading')}</p></div>`;
            const recipe1 = recipesData.find(r => r.id === id1);
            const recipe2 = recipe2Obj ? { ...recipe2Obj, id: 'ai-adjusted', name: recipe2Obj.name } : recipesData.find(r => r.id === id2);
            const prompt = `Compare the following two recipes: *${recipe1.name[state.currentLang]}* and *${recipe2.name[state.currentLang]}*. Analyze their overall feel, key parameter differences (like White Balance and Black Level), and suggest ideal use cases for each. Present the result in Markdown.`;
            const comparisonText = await callAIApi(prompt, 1200);
            contentEl.innerHTML = marked.parse(comparisonText || "Error loading comparison.");
            applyTranslations();
        }

        async function handleAiAdjustment(button) {
            const recipeId = button.dataset.recipeId;
            const textarea = document.getElementById('aiTuningTextarea');
            const resultContainer = document.getElementById('aiResultContainer');
            if (!textarea.value || !resultContainer || state.isAILoading) return;
            button.disabled = true; button.dataset.originalText = button.innerHTML;
            button.innerHTML = `<div class="spinner"></div> ${t('aiTuningBtn')}`;
            const originalRecipe = recipesData.find(r => r.id === recipeId);
            const prompt = `Original Recipe (ID: ${recipeId}): ${JSON.stringify(originalRecipe.settings)}. User request: "${textarea.value}". Please provide a new JSON object with adjusted settings.`;
            const aiResponse = await callAIApi(prompt);
            if (aiResponse && aiResponse.recipe) {
                state.lastGeneratedAiRecipe = aiResponse.recipe;
                resultContainer.innerHTML = `<div class="mt-6 border-t border-gray-200/50 pt-6"><h4 class="font-bold text-lg mb-2">${state.lastGeneratedAiRecipe.name[state.currentLang]}</h4><div class="p-4 rounded-xl bg-blue-50">${createFullRecipeHTML(state.lastGeneratedAiRecipe, false)}</div><button id="compareWithOriginalBtn" data-original-id="${recipeId}" class="btn btn-secondary w-full mt-4 py-3 bg-gray-200 text-black" data-translate-key="compareWithOriginalBtn"></button></div>`;
            } else { resultContainer.innerHTML = `<p class="text-red-500">Failed to generate adjustment.</p>`; }
            button.disabled = false; button.innerHTML = button.dataset.originalText; applyTranslations();
        }

        async function handleQuizSubmit() {
            await renderView('home');
            const homeView = document.getElementById('homeView');
            if (!homeView) { console.error("Quiz Submit Error: homeView not found after render."); return; }
            homeView.innerHTML = `<div class="flex flex-col items-center justify-center h-full"><div class="spinner !w-16 !h-16 !border-4"></div><h2 class="landing-title mt-8" data-translate-key="loadingAnalyze"></h2></div>`;
            applyTranslations();
            const prompt = `Based on user preferences: ${JSON.stringify(state.quizAnswers)}. Recommend TWO recipes from the available list. Respond with JSON array: [{"recipeId", "moodDescription" (in ${state.currentLang})}, ...].`;
            const aiResponse = await callAIApi(prompt);
            if (aiResponse && aiResponse.length >= 2) {
                const r1 = recipesData.find(r => r.id === aiResponse[0].recipeId);
                const r2 = recipesData.find(r => r.id === aiResponse[1].recipeId);
                if (r1 && r2) {
                    homeView.innerHTML = `<div class="w-full h-full flex items-center justify-center absolute inset-0 view-transition"><div class="quiz-result-container p-6 md:p-8 rounded-3xl w-full max-w-5xl mx-auto glass-panel"><h3 class="text-2xl md:text-3xl font-bold mb-6 md:mb-8 text-center" data-translate-key="quizResultTitle"></h3><div class="grid md:grid-cols-2 gap-6"><div class="quiz-choice-option p-6" data-recipe-id="${r1.id}"><h4 class="text-xl md:text-2xl font-bold mb-2">${r1.name[state.currentLang]}</h4><p class="text-base italic text-gray-600">"${r1.description[state.currentLang]}"</p></div><div class="quiz-choice-option p-6" data-recipe-id="${r2.id}"><h4 class="text-xl md:text-2xl font-bold mb-2">${r2.name[state.currentLang]}</h4><p class="text-base italic text-gray-600">"${r2.description[state.currentLang]}"</p></div></div></div></div>`;
                    applyTranslations();
                }
            } else { homeView.innerHTML = `<p class="text-red-500">Lỗi khi lấy đề xuất từ AI.</p>`; }
        }
        
        function attachViewEventListeners(viewName) {
            if (viewName === 'recipeFormulas') {
                renderLibraryList();    
                renderLibraryDetails();
            }
        }

        function renderLibraryList() {
            const container = document.getElementById('recipeListContainer'); if (!container) return;
            const searchTerm = (document.getElementById('searchInput')?.value || '').toLowerCase();
            let recipesToRender = recipesData.filter(recipe => (recipe.name.vi.toLowerCase().includes(searchTerm) || recipe.name.en.toLowerCase().includes(searchTerm) || recipe.description.vi.toLowerCase().includes(searchTerm) || recipe.description.en.toLowerCase().includes(searchTerm)) && (state.activeFilters.type === 'all' || recipe.type === state.activeFilters.type) && (state.activeFilters.contrast === 'all' || recipe.contrast === state.activeFilters.contrast) && (state.activeFilters.saturation === 'all' || recipe.saturation === state.activeFilters.saturation) );
            
            container.innerHTML = recipesToRender.map(recipe => {
                const isChecked = state.comparisonList.includes(recipe.id);
                const isSelected = recipe.id === state.selectedRecipeId;

                return `<div class="recipe-item p-3 rounded-xl transition-all duration-200 border-l-4 border-transparent flex items-start gap-4 ${isSelected ? 'selected' : ''}">
                            <input type="checkbox" class="recipe-compare-cb form-checkbox h-5 w-5 text-blue-600 rounded-md border-gray-300 focus:ring-blue-500 self-start mt-1 flex-shrink-0" data-recipe-id="${recipe.id}" ${isChecked ? 'checked' : ''} ${state.comparisonList.length >= 2 && !isChecked ? 'disabled' : ''}>
                             <div class="flex-grow cursor-pointer recipe-item-content" data-recipe-id="${recipe.id}">
                                <div class="flex items-start gap-3">
                                    <div class="recipe-dot w-5 h-5 rounded-full flex-shrink-0 mt-1" style="background-color: ${recipe.personalityColor}" title="${recipe.name[state.currentLang]}"></div>
                                    <div class="flex-grow">
                                        <span class="font-semibold text-primary">${recipe.name[state.currentLang]}</span>
                                        <p class="text-sm text-neutral-600 mt-1 leading-snug">${recipe.description[state.currentLang]}</p>
                                    </div>
                                </div>
                            </div>
                        </div>`;
            }).join('');

            const btnContainer = document.getElementById('compareBtnContainer');
            btnContainer.innerHTML = `<button id="compareBtn" class="btn btn-primary w-full mt-4 py-3" data-translate-key="compareBtn" ${state.comparisonList.length !== 2 ? 'disabled' : ''}></button>`;
            applyTranslations();
        }
        
        function renderLibraryDetails() {
            const isMobile = window.innerWidth < 768;
            const recipeListPanel = document.getElementById('recipeListPanel');
            const recipeMainPanel = document.getElementById('recipeMainPanel');
            const recipeDetailPanelMobile = document.getElementById('recipeDetailPanelMobile');

            if (isMobile) {
                if(state.isMobileDetailActive) {
                    recipeListPanel.classList.add('hidden');
                    recipeDetailPanelMobile.classList.remove('hidden');
                } else {
                    recipeListPanel.classList.remove('hidden');
                    recipeDetailPanelMobile.classList.add('hidden');
                }
            } else {
                recipeListPanel?.classList.remove('hidden');
                recipeDetailPanelMobile?.classList.add('hidden');
            }

            const recipe = recipesData.find(r => r.id === state.selectedRecipeId);

            let recipeContentContainer, chartsContainer;
            if (isMobile && state.isMobileDetailActive) {
                recipeContentContainer = document.getElementById('recipeContentMobile');
                chartsContainer = null;
            } else {
                recipeContentContainer = document.getElementById('recipeContent');
                chartsContainer = document.getElementById('chartsContainer');
            }

            if (!recipeContentContainer) return;

            if (!recipe) {    
                if (chartsContainer) chartsContainer.classList.remove('hidden');
                recipeContentContainer.classList.add('hidden');
                if(!isMobile) recipeMainPanel?.classList.remove('hidden');
                return;    
            }
            if (chartsContainer) chartsContainer.classList.add('hidden');
            recipeContentContainer.classList.remove('hidden');
            if(!isMobile) recipeMainPanel?.classList.remove('hidden');
            
            const thumbnailsHTML = (recipe.demoImages && recipe.demoImages.length > 0) ? `
                <div class="my-6">
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                        ${recipe.demoImages.map((imgSrc, index) => `
                            <div class="bg-gray-200 group rounded-xl overflow-hidden cursor-pointer lightbox-trigger-thumb"
                                 data-recipe-id="${recipe.id}"
                                 data-index="${index}">
                                <img src="${imgSrc}" alt="Ảnh demo công thức ${recipe.name[state.currentLang]} ${index + 1}" class="aspect-video w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-300">
                            </div>
                        `).join('')}
                    </div>
                </div>` : '';

            recipeContentContainer.innerHTML = `
                <h3 class="text-3xl md:text-4xl font-bold">${recipe.name[state.currentLang]}</h3>
                <p class="text-lg text-neutral-600 mt-2 italic">"${recipe.description[state.currentLang]}"</p>
                ${thumbnailsHTML}
                <div id="originalRecipeContainer" class="mt-8">${createFullRecipeHTML(recipe, true)}</div>
                <div class="mt-12 pt-8 border-t-2 border-gray-200/60">
                    <details open class="group">
                        <summary class="text-xl md:text-2xl font-bold cursor-pointer list-none flex justify-between items-center group-hover:text-blue-600 transition-colors">
                            <span data-translate-key="tutorialTitle"></span>
                            <svg class="w-6 h-6 transition-transform transform group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </summary>
                        <div class="prose max-w-none mt-6 space-y-4 text-base text-gray-700">
                            <div><h4 class="font-bold" data-translate-key="tutorialStep1Title"></h4><p data-translate-key="tutorialStep1P1"></p></div>
                            <div><h4 class="font-bold" data-translate-key="tutorialStep2Title"></h4><p data-translate-key="tutorialStep2P1"></p></div>
                            <div><h4 class="font-bold" data-translate-key="tutorialStep3Title"></h4><p data-translate-key="tutorialStep3P1"></p></div>
                            <div><h4 class="font-bold" data-translate-key="tutorialStep4Title"></h4><p data-translate-key="tutorialStep4P1"></p></div>
                        </div>
                    </details>
                </div>
                <div class="mt-12 pt-8 border-t-2 border-gray-200/60">
                    <h3 class="text-xl md:text-2xl font-bold mb-4" data-translate-key="aiTuningTitle"></h3>
                    <div class="glass-panel p-4 md:p-6 -mx-2">
                        <textarea id="aiTuningTextarea" class="w-full p-3 rounded-lg border-2 border-gray-200 focus:ring-2 focus:ring-blue-500 transition-shadow" rows="3" data-translate-key="aiTuningPlaceholder"></textarea>
                        <button id="aiTuningBtn" data-recipe-id="${recipe.id}" class="btn btn-primary w-full mt-4 py-3" data-translate-key="aiTuningBtn"></button>
                        <div id="aiResultContainer"></div>
                    </div>
                </div>`;
            applyTranslations();
        }

        function toggleMobileNav(show) {
            const menu = document.getElementById('mobileNavMenu');
            if (show) {
                menu.classList.remove('translate-x-full');
            } else {
                menu.classList.add('translate-x-full');
            }
        }

        function init() {
            document.body.addEventListener('click', async (e) => {
                const target = e.target;
                if (state.lightbox.isOpen) {
                    if (target.id === 'lightbox-bg' || target.closest('#lightbox-close')) { closeLightbox(); } 
                    else if (target.closest('#lightbox-next')) { navigateLightbox(1); } 
                    else if (target.closest('#lightbox-prev')) { navigateLightbox(-1); }
                    const thumb = target.closest('.lightbox-thumb');
                    if (thumb) {
                        state.lightbox.currentIndex = parseInt(thumb.dataset.index);
                        updateLightboxContent();
                    }
                    return; 
                }
                const lightboxTrigger = target.closest('.lightbox-trigger-thumb');
                if (lightboxTrigger) {
                    const recipeId = lightboxTrigger.dataset.recipeId;
                    const recipe = recipesData.find(r => r.id === recipeId);
                    if (recipe && recipe.demoImages) {
                         openLightbox(recipe.demoImages, parseInt(lightboxTrigger.dataset.index));
                    }
                    return;
                }
                const homeBtn = target.closest('#homeBtn');
                const navBtn = target.closest('.nav-btn');
                const mobileNavBtn = target.closest('.nav-btn-mobile');
                const langBtn = target.closest('.lang-btn');
                const startQuizBtn = target.closest('#startQuizBtn');
                const compareBtn = target.closest('#compareBtn');
                const compareWithOriginalBtn = target.closest('#compareWithOriginalBtn');
                const closeModalBtn = target.closest('#closeComparisonModalBtn');
                const aiTuningBtn = target.closest('#aiTuningBtn');
                const quizChoice = target.closest('.quiz-choice-option');
                const exploreMoreBtn = target.closest('#exploreMoreBtn');
                const hamburgerBtn = target.closest('#hamburgerBtn');
                const closeMobileNavBtn = target.closest('#closeMobileNavBtn');
                const recipeItemContent = target.closest('.recipe-item-content');
                const recipeCompareCb = target.closest('.recipe-compare-cb');
                const backToListBtn = target.closest('#backToListBtn');
                const quizOption = target.closest('.quiz-option');
                
                if (hamburgerBtn) { toggleMobileNav(true); return; }
                if (closeMobileNavBtn || (target.id === 'mobileNavMenu' && !target.closest('#mobileNavMenu > div'))) { toggleMobileNav(false); return; }
                if (mobileNavBtn) {
                    toggleMobileNav(false);
                    state.selectedRecipeId = null; state.isMobileDetailActive = false;
                    await renderView(mobileNavBtn.dataset.view); return;
                }
                if (homeBtn) { state.selectedRecipeId = null; state.isMobileDetailActive = false; await renderView('home'); return; }
                if (navBtn) { state.selectedRecipeId = null; state.isMobileDetailActive = false; await renderView(navBtn.dataset.view); return; }
                if (exploreMoreBtn) { state.selectedRecipeId = null; state.isMobileDetailActive = false; await renderView('recipeFormulas'); return; }
                if (backToListBtn) { state.isMobileDetailActive = false; renderLibraryDetails(); return; }
                
                if (langBtn) { state.currentLang = langBtn.id.replace('lang', '').toLowerCase(); await renderView(state.currentView); return; }
                
                if (startQuizBtn) { state.quizStep = 0; state.quizAnswers = {}; await renderView('quiz'); return; }
                if (compareBtn && !compareBtn.disabled) { handleAiComparison(state.comparisonList[0], state.comparisonList[1]); return; }
                if (compareWithOriginalBtn) { handleAiComparison(compareWithOriginalBtn.dataset.originalId, null, state.lastGeneratedAiRecipe); return; }
                if (closeModalBtn) { document.getElementById('comparisonModal').classList.add('hidden'); return; }
                if (aiTuningBtn) { handleAiAdjustment(aiTuningBtn); return; }
                if (quizChoice) { 
                    state.selectedRecipeId = quizChoice.dataset.recipeId; 
                    state.isMobileDetailActive = true;
                    await renderView('recipeFormulas'); return; 
                }

                if (quizOption) {
                    if(!quizOption.classList.contains('selected')) {
                        const group = quizOption.closest('[data-quiz-group]').dataset.quizGroup;
                        state.quizAnswers[group] = quizOption.dataset.value;
                        document.querySelectorAll(`[data-quiz-group="${group}"] .quiz-option`).forEach(opt => opt.classList.remove('selected'));
                        quizOption.classList.add('selected');
                        setTimeout(() => {
                            state.quizStep++;
                            if (state.quizStep >= 1) handleQuizSubmit(); else renderView('quiz');
                        }, 250);
                    }
                    return;
                }
                
                if (recipeItemContent) { handleRecipeSelection(recipeItemContent.dataset.recipeId, 'div'); return; }
                if (recipeCompareCb) { handleRecipeSelection(recipeCompareCb.dataset.recipeId, 'checkbox'); return; }
                if (document.getElementById('filtersContainer')?.contains(target)) { handleFilterClick(e); return; }
            });
            
            window.addEventListener('resize', () => { if(state.currentView === 'recipeFormulas') renderLibraryDetails(); });
            
            renderView('home');
        }

        document.addEventListener("DOMContentLoaded", init);

        const recipesData = [
            {"id":"vektro-100","name":{"vi":"Chiều Tàn","en":"Dusk / Twilight"},"description":{"vi":"Tái tạo sắc cam rực của lửa và vùng tối sâu thẳm.","en":"Vibrant orange of fire and deep shadows."},"type":"color","contrast":"high","saturation":"high","whiteBalance":"4000K, A5-M0.5","settings":{"Black level":"-10","Gamma":"Still","Black Gamma":"Wide -7","Knee":"Manual 92.5% +5","Color Mode":"S-Gamut3.Cine","Saturation":"+20"},"personalityColor":"#E57373","coords":{"x":7.8,"y":8.1}, "demoImages": ["https://placehold.co/800x600/E57373/ffffff?text=Vektro+1", "https://placehold.co/800x600/E57373/dddddd?text=Vektro+2", "https://placehold.co/800x600/E57373/bbbbbb?text=Vektro+3"]},
            {"id":"senova-light","name":{"vi":"Đà Lạt trong sương","en":"Da Lat Mist"},"description":{"vi":"Màu lam lạnh và tương phản cao, gợi cảm giác mờ ảo.","en":"Cool blue tone with high contrast, evoking a misty feeling."},"type":"color","contrast":"high","saturation":"medium","whiteBalance":"8000K, B2-M2","settings":{"Black level":"-15","Gamma":"Cine3","Black Gamma":"Wide +7","Knee":"Manual 85% +4","Color Mode":"S-Gamut3.Cine","Saturation":"+20"},"personalityColor":"#64B5F6","coords":{"x":8.5,"y":1.2}, "demoImages": ["https://placehold.co/800x600/64B5F6/ffffff?text=Senova+1", "https://placehold.co/800x600/64B5F6/dddddd?text=Senova+2", "https://placehold.co/800x600/64B5F6/bbbbbb?text=Senova+3"]},
            {"id":"fuji-400h","name":{"vi":"Đồng Cỏ Mộc Châu","en":"Moc Chau Meadow"},"description":{"vi":"Tôn vinh sắc xanh tươi mát của cỏ cây dưới nắng hạ.","en":"Honors the fresh green tones of plants under the summer sun."},"type":"color","contrast":"low","saturation":"low","whiteBalance":"3700K, A7-M0.5","settings":{"Black level":"0","Gamma":"Movie","Black Gamma":"Wide +7","Knee":"Manual 80% +4","Color Mode":"Still","Saturation":"+11"},"personalityColor":"#81C784","coords":{"x":-7.1,"y":-8.2}, "demoImages": ["https://placehold.co/800x600/81C784/ffffff?text=Fuji+1", "https://placehold.co/800x600/81C784/dddddd?text=Fuji+2", "https://placehold.co/800x600/81C784/bbbbbb?text=Fuji+3"]},
            {"id":"evpro-plus","name":{"vi":"Đông Dương","en":"Indochine"},"description":{"vi":"Màu vàng rực rỡ và bão hòa cao, nắm bắt năng lượng.","en":"Vibrant yellow, high saturation, captures energy."},"type":"color","contrast":"high","saturation":"high","whiteBalance":"4300K, A3.5","settings":{"Black level":"-10","Gamma":"Cine1","Black Gamma":"Middle +7","Knee":"Auto","Color Mode":"S-Gamut3.Cine","Saturation":"+32"},"personalityColor":"#FFD54F","coords":{"x":7.2,"y":7.5}, "demoImages": ["https://placehold.co/800x600/FFD54F/ffffff?text=Evpro+1", "https://placehold.co/800x600/FFD54F/dddddd?text=Evpro+2", "https://placehold.co/800x600/FFD54F/bbbbbb?text=Evpro+3"]},
            {"id":"ektar-100","name":{"vi":"Hoàng Hôn Sài Gòn","en":"Saigon Sunset"},"description":{"vi":"Sắc đỏ và cam đậm, bão hòa cao, tái hiện hoàng hôn.","en":"Rich red and orange hues, high saturation, recreating sunsets."},"type":"color","contrast":"low","saturation":"high","whiteBalance":"5000K, A2-M1","settings":{"Black level":"+6","Gamma":"Still","Black Gamma":"Wide -7","Knee":"Manual 75% +4","Color Mode":"S-Gamut3.Cine","Saturation":"+25"},"personalityColor":"#FF8A65","coords":{"x":-8.3,"y":8.8}, "demoImages": ["https://placehold.co/800x600/FF8A65/ffffff?text=Ektar+1", "https://placehold.co/800x600/FF8A65/dddddd?text=Ektar+2", "https://placehold.co/800x600/FF8A65/bbbbbb?text=Ektar+3"]},
            {"id":"kodak-gold-v1","name":{"vi":"Ký Ức Vàng Son","en":"Golden Memories"},"description":{"vi":"Ánh vàng ấm áp đặc trưng, gợi nhớ thập niên 90.","en":"A distinctive warm golden glow, reminiscent of the 90s."},"type":"color","contrast":"medium","saturation":"high","whiteBalance":"8500K, B3-M1.75","settings":{"Black level":"-5","Gamma":"Movie","Black Gamma":"Wide +7","Knee":"Manual 75% +4","Color Mode":"S-Gamut3/S-Gamut","Saturation":"+32"},"personalityColor":"#FFB74D","coords":{"x":-0.5,"y":7.9}, "demoImages": ["https://placehold.co/800x600/FFB74D/ffffff?text=Gold+1", "https://placehold.co/800x600/FFB74D/dddddd?text=Gold+2", "https://placehold.co/800x600/FFB74D/bbbbbb?text=Gold+3"]},
            {"id":"kodak-portra-400-v2","name":{"vi":"Ngọc Bích","en":"Jade Green"},"description":{"vi":"Tông màu dịu mát với sắc xanh ngọc bích nổi bật.","en":"A cool tone with prominent jade green hues."},"type":"color","contrast":"low","saturation":"low","whiteBalance":"3600K, A7-G1","settings":{"Black level":"+11","Gamma":"Movie","Black Gamma":"Narrow -7","Knee":"Manual 85% +4","Color Mode":"Still","Saturation":"+11"},"personalityColor":"#4DB6AC","coords":{"x":-8.8,"y":-7.2}, "demoImages": ["https://placehold.co/800x600/4DB6AC/ffffff?text=Portra+1", "https://placehold.co/800x600/4DB6AC/dddddd?text=Portra+2", "https://placehold.co/800x600/4DB6AC/bbbbbb?text=Portra+3"]},
            {"id":"acros-x","name":{"vi":"Than Chì","en":"Graphite Sketch"},"description":{"vi":"Tương phản mạnh và chi tiết sắc nét, như bút than chì.","en":"Strong contrast and sharp details, like a graphite sketch."},"type":"bw","contrast":"high","saturation":"low","whiteBalance":"AWB","settings":{"Black level":"-11","Gamma":"Still","Black Gamma":"Middle -3","Knee":"Manual 85% +5","Color Mode":"Black & White","Saturation":"+15"},"personalityColor":"#9E9E9E","coords":{"x":8.2,"y":-7.5}, "demoImages": ["https://placehold.co/800x600/9E9E9E/ffffff?text=Acros+1", "https://placehold.co/800x600/9E9E9E/dddddd?text=Acros+2", "https://placehold.co/800x600/9E9E9E/bbbbbb?text=Acros+3"]},
            {"id":"acros-xy","name":{"vi":"Đá Cuội","en":"Pebble Monochrome"},"description":{"vi":"Dải tông màu xám phong phú với độ chuyển mượt mà.","en":"Rich range of gray tones with smooth transitions."},"type":"bw","contrast":"high","saturation":"low","whiteBalance":"AWB","settings":{"Black level":"-10","Gamma":"Still","Black Gamma":"Middle -3","Knee":"Manual 85% +4","Color Mode":"Black & White","Saturation":"+15"},"personalityColor":"#BDBDBD","coords":{"x":7.1,"y":-3.1}, "demoImages": []},
            {"id":"acros-xr","name":{"vi":"Bóng Tối","en":"Deep Shadow"},"description":{"vi":"Tăng cường độ sâu cho vùng tối, tạo cái nhìn kịch tính.","en":"Enhances the depth of shadows for a dramatic look."},"type":"bw","contrast":"high","saturation":"low","whiteBalance":"AWB","settings":{"Black level":"-15","Gamma":"Still","Black Gamma":"Middle +5","Knee":"Manual 85% +5","Color Mode":"Black & White","Saturation":"+15"},"personalityColor":"#757575","coords":{"x":9.0,"y":5.5}, "demoImages": []},
            {"id":"acros-xg","name":{"vi":"Tương Phản Gắt","en":"Harsh Contrast"},"description":{"vi":"Tương phản cực cao, làm nổi bật đường nét, hình khối.","en":"Extremely high contrast, emphasizing lines and shapes."},"type":"bw","contrast":"high","saturation":"low","whiteBalance":"AWB","settings":{"Black level":"-15","Gamma":"Still","Black Gamma":"Wide -7","Knee":"Manual 85% +5","Color Mode":"Black & White","Saturation":"+15"},"personalityColor":"#616161","coords":{"x":9.5,"y":-8.0}, "demoImages": []},
            {"id":"ilford-hp5","name":{"vi":"Khoảnh khắc quyết định","en":"The Decisive Moment"},"description":{"vi":"Tương phản cao, phù hợp nhiếp ảnh tài liệu, nhấn mạnh cảm xúc.","en":"High contrast for documentary, emphasizing emotion."},"type":"bw","contrast":"high","saturation":"low","whiteBalance":"AWB, A3","settings":{"Black level":"-12","Gamma":"Movie","Black Gamma":"Middle -5","Knee":"Manual 75% +4","Color Mode":"Black & White","Saturation":"0"},"personalityColor":"#90A4AE","coords":{"x":7.6,"y":-1.8}, "demoImages": []},
            {"id":"kodak-tri-x-400","name":{"vi":"Ảnh Cũ","en":"Weathered Photograph"},"description":{"vi":"Tương phản thấp và hạt mịn, tạo cảm giác ảnh cũ.","en":"Low contrast and fine grain, creating the feel of an old photo."},"type":"bw","contrast":"low","saturation":"high","whiteBalance":"5500K, A3-G2","settings":{"Black level":"+3","Gamma":"Cine1","Black Gamma":"Narrow +5","Knee":"Manual 75% +3","Color Mode":"Black & White","Saturation":"+24"},"personalityColor":"#B0BEC5","coords":{"x":-8.1,"y":-6.4}, "demoImages": []},
            {"id":"classic-chrome","name":{"vi":"Đô Thị","en":"Urban Chrome"},"description":{"vi":"Tông màu trầm, bão hòa thấp và tương phản cao, gai góc.","en":"Subdued tone, low saturation, high contrast for a gritty feel."},"type":"color","contrast":"high","saturation":"low","whiteBalance":"4000K, A7-M0.5","settings":{"Black level":"-7","Gamma":"Still","Black Gamma":"Middle -7","Knee":"Manual 75% +4","Color Mode":"Still","Saturation":"-5"},"personalityColor":"#78909C","coords":{"x":8.1,"y":-8.5}, "demoImages": []},
            {"id":"fuji-eterna","name":{"vi":"Điệp Vụ Melancholy","en":"Melancholy Mission"},"description":{"vi":"Màu sắc trầm, bão hòa rất thấp, tạo cảm giác điện ảnh.","en":"Subdued colors, very low saturation for a cinematic feel."},"type":"color","contrast":"low","saturation":"low","whiteBalance":"4000K, A7-M0.25","settings":{"Black level":"+7","Gamma":"Movie","Black Gamma":"Wide -5","Knee":"Manual 75% +4","Color Mode":"Still","Saturation":"-5"},"personalityColor":"#A1887F","coords":{"x":-9.2,"y":-9.1}, "demoImages": []}
        ];
    </script>
</body>
</html>
