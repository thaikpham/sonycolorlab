<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alpha AI Color Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
            background-color: #f4f7fc;
            color: #212529;
            overflow-x: hidden;
            overflow-y: auto;
        }
        
        #bg-blurs { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; overflow: hidden; }
        .blur-circle { position: absolute; border-radius: 50%; filter: blur(180px); opacity: 0.15; transition: all 2s ease-in-out; }
        .blur-1 { width: 40vw; height: 40vw; max-width: 500px; max-height: 500px; background: #007AFF; top: 5%; left: 10%; animation: move-blur-1 30s infinite alternate; }
        .blur-2 { width: 50vw; height: 50vw; max-width: 600px; max-height: 600px; background: #FF9500; bottom: 5%; right: 10%; animation: move-blur-2 35s infinite alternate; }
        @keyframes move-blur-1 { from { transform: translate(0, 0) scale(1) rotate(0deg); } to { transform: translate(10vw, 5vh) scale(1.3) rotate(55deg); } }
        @keyframes move-blur-2 { from { transform: translate(0, 0) scale(1) rotate(0deg); } to { transform: translate(-8vw, -5vh) scale(1.2) rotate(-70deg); } }

        :root {
            --primary-accent: #007AFF;
            --primary-accent-darker: #0056B3;
            --glass-bg: rgba(255, 255, 255, 0.55);
            --glass-border: rgba(0, 0, 0, 0.07);
            --text-primary: #1d1d1f;
            --text-secondary: #6e6e73;
        }
        
        .glass-panel {    
            background: var(--glass-bg);    
            backdrop-filter: blur(40px) saturate(180%);    
            -webkit-backdrop-filter: blur(40px) saturate(180%);    
            border: 1px solid var(--glass-border);    
            box-shadow: 0 10px 35px rgba(0, 0, 0, 0.08);
            border-radius: 24px;
        }
        @media (min-width: 768px) {
            .glass-panel { border-radius: 28px; }
        }

        .recipe-item.selected {    
            background-color: rgba(0, 122, 255, 0.1);    
            border-left: 4px solid var(--primary-accent);    
            color: var(--text-primary);    
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(0, 122, 255, 0.1);
        }
        .recipe-item:hover:not(.selected) { background-color: rgba(0, 0, 0, 0.04); }
        .recipe-dot { transition: transform 0.2s ease-in-out; }
        .recipe-dot:hover { transform: scale(1.25); }

        .btn { border-radius: 9999px; font-weight: 600; transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1); display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem;}
        .btn-primary { background-color: var(--primary-accent); border: none; color: white; box-shadow: 0 4px 14px rgba(0, 118, 255, 0.39); }
        .btn-primary:hover:not(:disabled) { background-color: var(--primary-accent-darker); transform: translateY(-2px) scale(1.02); box-shadow: 0 6px 18px rgba(0, 118, 255, 0.45); }
        .btn:disabled { background-color: #b0bec5; cursor: not-allowed; opacity: 0.7; box-shadow: none; }
        
        .lang-btn { background: #e9ecef; border: none; border-radius: 9999px; padding: 0.25rem; transition: all 0.2s ease; }
        .lang-btn.active { box-shadow: 0 0 0 2.5px var(--primary-accent); }
        .lang-btn svg { width: 1.5rem; height: 1.5rem; }
        
        .landing-title { font-size: clamp(2.5rem, 8vw, 4.8rem); font-weight: 800; color: var(--text-primary); line-height: 1.1; letter-spacing: -0.025em; }
        .quiz-question-title { font-size: clamp(1.8rem, 6vw, 3.5rem); font-weight: 700; color: var(--text-primary); line-height: 1.15; letter-spacing: -0.02em; }
        .landing-subtitle { font-size: clamp(1rem, 4vw, 1.35rem); color: var(--text-secondary); margin-top: 1.25rem; max-width: 650px; line-height: 1.6; }
        
        .view-transition { animation: fadeInUp 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
        .view-transition-out { animation: fadeOutDown 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeOutDown { from { opacity: 1; transform: translateY(0); } to { opacity: 0; transform: translateY(-20px); } }

        .quiz-option { background-color: rgba(0,0,0,0.03); border: 2px solid transparent; padding: 1.25rem; border-radius: 1.25rem; cursor: pointer; transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1); font-weight: 600; font-size: 1.1rem; text-align: center; }
        .quiz-option:hover { transform: translateY(-4px); box-shadow: 0 10px 20px rgba(0,0,0,0.07); }
        .quiz-option.selected { border-color: var(--primary-accent); background-color: rgba(0, 122, 255, 0.1); color: var(--primary-accent); }
        
        .filter-btn { background-color: rgba(0,0,0,0.05); border: 1px solid transparent; transition: all 0.2s ease-in-out; }
        .filter-btn.active { background-color: rgba(0, 122, 255, 0.1); border-color: var(--primary-accent); color: var(--primary-accent); font-weight: 600; }
        
        .spinner { border: 3px solid rgba(0, 0, 0, 0.1); width: 20px; height: 20px; border-radius: 50%; border-left-color: currentColor; animation: spin 1s ease infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        .modal { z-index: 50; transition: opacity 0.3s ease; }
        .modal-content { transition: transform 0.3s ease; border-radius: 28px; }
        .modal.hidden { opacity: 0; pointer-events: none; }
        .modal.hidden .modal-content { transform: scale(0.95); }
        
        #comparisonModalContent { background-color: #f0f9ff; border-radius: 0 0 28px 28px; }
        .prose-comparison h3 { font-size: 1.5rem; margin-top: 1.5rem; margin-bottom: 0.5rem; color: var(--text-primary); border-bottom: 2px solid var(--primary-accent); padding-bottom: 0.5rem; }

        .quiz-choice-option { cursor: pointer; transition: transform 0.2s ease-out, box-shadow 0.2s ease-out; background: rgba(255,255,255,0.7); border-radius: 20px;}
        .quiz-choice-option:hover { transform: scale(1.03); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1); }

        .overflow-y-auto::-webkit-scrollbar { width: 10px; }
        .overflow-y-auto::-webkit-scrollbar-track { background-color: transparent; }
        .overflow-y-auto::-webkit-scrollbar-thumb { background-color: rgba(0, 0, 0, 0.2); border-radius: 10px; border: 3px solid transparent; background-clip: content-box; }
        .overflow-y-auto::-webkit-scrollbar-thumb:hover { background-color: rgba(0, 0, 0, 0.4); }
        .overflow-y-auto { scrollbar-width: auto; scrollbar-color: rgba(0, 0, 0, 0.2) transparent; }

        .chart-container { position: relative; margin: auto; height: 280px; width: 100%;}
        @media (min-width: 768px) { .chart-container { height: 320px; } }
        #colorChart, #bwChart { cursor: pointer; }
        
        #mobileNavMenu { transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); }

        #lightbox { z-index: 100; background-color: rgba(0, 0, 0, 0.8); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); }
        #lightbox.hidden { opacity: 0; pointer-events: none; }
        #lightbox .lightbox-content { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        #lightbox.hidden .lightbox-content { transform: scale(0.95); opacity: 0; }
        .lightbox-thumb { cursor: pointer; border: 2px solid transparent; transition: all 0.2s ease; }
        .lightbox-thumb.active { border-color: var(--primary-accent); transform: scale(1.05); box-shadow: 0 0 15px rgba(0, 122, 255, 0.5); }
        .lightbox-nav-btn { background-color: rgba(0,0,0,0.4); transition: background-color 0.2s ease; }
        .lightbox-nav-btn:hover { background-color: rgba(0,0,0,0.7); }
        #lightbox-main-image { transition: opacity 0.2s ease-in-out; }
        
        /* --- Explanation Tab & Interactive Grid Styles --- */
        #abgm-grid-interactive-container {
            width: 100%;
            max-width: 300px;
            margin: auto;
            touch-action: none; /* Prevent scrolling on touch devices */
        }
        #abgm-grid {
            position: relative;
            width: 100%;
            aspect-ratio: 1 / 1;
            border-radius: 0.5rem;
            cursor: pointer;
            background-image: 
                linear-gradient(to right, rgba(0, 128, 0, 0.2), rgba(255, 255, 255, 0), rgba(255, 0, 255, 0.2)),
                linear-gradient(to bottom, rgba(255, 165, 0, 0.2), rgba(255, 255, 255, 0), rgba(0, 0, 255, 0.2));
            box-shadow: inset 0 0 0 1px rgba(0,0,0,0.1);
        }
        #abgm-pointer {
            position: absolute;
            width: 1rem;
            height: 1rem;
            background-color: #ef4444;
            border: 2px solid white;
            border-radius: 9999px;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            transform: translate(-50%, -50%);
            pointer-events: none; /* So it doesn't interfere with grid clicks */
        }
        .pp-infographic-item {
            background-color: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .pp-infographic-item h5 {
            color: var(--primary-accent);
            font-weight: 700;
            font-size: 1.125rem;
        }
        .pp-infographic-item .param-list li {
            position: relative;
            padding-left: 1.5rem;
        }
         .pp-infographic-item .param-list li::before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #16a34a;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="bg-blurs"><div class="blur-circle blur-1"></div><div class="blur-circle blur-2"></div></div>
    
    <div id="appContainer" class="min-h-screen w-screen p-4 md:p-6 flex flex-col">
        <header class="flex justify-between items-center w-full z-20 flex-shrink-0">
            <button id="homeBtn" class="text-xl md:text-2xl font-bold text-gray-800 flex items-center gap-2">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6.253v11.494m-5.747-8.662l11.494 5.747m-11.494 0l11.494-5.747M4.75 12A7.25 7.25 0 0112 4.75v0A7.25 7.25 0 0119.25 12v0a7.25 7.25 0 01-7.25 7.25v0A7.25 7.25 0 014.75 12v0z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                <span data-translate-key="headerTitle" class="hidden sm:inline"></span>
            </button>
            <div class="flex items-center gap-2 md:gap-4">
                 <nav id="mainNav" class="hidden md:flex items-center gap-6">
                    <button data-view="recipeFormulas" class="nav-btn font-semibold text-gray-600 hover:text-black transition-colors"></button>
                    <button data-view="creativeLooks" class="nav-btn font-semibold text-gray-600 hover:text-black transition-colors"></button>
                    <button data-view="featuredPhotos" class="nav-btn font-semibold text-gray-600 hover:text-black transition-colors"></button>
                    <button data-view="explain" class="nav-btn font-semibold text-gray-600 hover:text-black transition-colors"></button>
                 </nav>
                <div class="flex items-center gap-2">
                    <button id="langEN" class="lang-btn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30"><clipPath id="t"><path d="M30,15 h30 v15 z v15 h-30 z h-30 v-15 z v-15 h30 z"/></clipPath><path d="M0,0 v30 h60 v-30 z" fill="#00247d"/><path d="M0,0 L60,30 M60,0 L0,30" stroke="#fff" stroke-width="6"/><path d="M0,0 L60,30 M60,0 L0,30" clip-path="url(#t)" stroke="#cf142b" stroke-width="4"/><path d="M30,0 v30 M0,15 h60" stroke="#fff" stroke-width="10"/><path d="M30,0 v30 M0,15 h60" stroke="#cf142b" stroke-width="6"/></svg></button>
                    <button id="langVI" class="lang-btn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600"><path fill="#da251d" d="M0 0h900v600H0z"/><path fill="#ff0" d="m450 186-86 266 226-164h-280l226 164z"/></svg></button>
                </div>
                <button id="hamburgerBtn" class="md:hidden p-2 rounded-full hover:bg-black/10 focus:outline-none focus:ring-2 focus:ring-gray-500">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                </button>
            </div>
        </header>
        
        <div id="mainContent" class="flex-grow min-h-0 relative mt-4 md:mt-6 mb-2"></div>
    </div>
    
    <div id="mobileNavMenu" class="fixed inset-0 bg-black/40 backdrop-blur-sm z-40 transform translate-x-full md:hidden">
        <div class="absolute top-0 right-0 h-full w-2/3 max-w-sm bg-white/80 backdrop-blur-xl shadow-2xl p-6">
            <button id="closeMobileNavBtn" class="absolute top-4 right-4 text-3xl p-2">&times;</button>
            <nav class="mt-16 flex flex-col gap-6 text-center">
                <button data-view="recipeFormulas" class="nav-btn-mobile text-2xl font-semibold text-gray-700 py-2"></button>
                <button data-view="creativeLooks" class="nav-btn-mobile text-2xl font-semibold text-gray-700 py-2"></button>
                <button data-view="featuredPhotos" class="nav-btn-mobile text-2xl font-semibold text-gray-700 py-2"></button>
                <button data-view="explain" class="nav-btn-mobile text-2xl font-semibold text-gray-700 py-2"></button>
            </nav>
        </div>
    </div>

    <div id="comparisonModal" class="modal hidden fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-50">
        <div class="modal-content glass-panel w-full max-w-4xl max-h-[90vh] flex flex-col">
            <div class="p-4 md:p-6 border-b border-black/10 flex justify-between items-center flex-shrink-0">
                <h2 id="comparisonModalTitle" class="text-xl md:text-2xl font-bold"></h2>
                <button id="closeComparisonModalBtn" class="text-3xl leading-none p-2 rounded-full hover:bg-black/10">&times;</button>
            </div>
            <div id="comparisonModalContent" class="p-6 md:p-8 overflow-y-auto prose-comparison"></div>
        </div>
    </div>

    <div id="lightbox" class="hidden fixed inset-0 flex items-center justify-center p-4 transition-opacity duration-300">
        <div id="lightbox-bg" class="absolute inset-0"></div>
        <div class="lightbox-content relative w-full max-w-4xl max-h-full">
            <button id="lightbox-close" class="absolute -top-4 -right-2 md:top-0 md:-right-12 text-white text-5xl font-bold z-10 leading-none p-2">&times;</button>
            <div class="relative">
                <img id="lightbox-main-image" src="" alt="Ảnh demo công thức" class="w-full h-auto max-h-[75vh] object-contain rounded-lg shadow-2xl bg-black/50">
                <button id="lightbox-prev" class="lightbox-nav-btn absolute top-1/2 left-2 md:-left-16 -translate-y-1/2 p-2 md:p-3 rounded-full text-white">
                    <svg class="w-6 h-6 md:w-8 md:h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                </button>
                <button id="lightbox-next" class="lightbox-nav-btn absolute top-1/2 right-2 md:-right-16 -translate-y-1/2 p-2 md:p-3 rounded-full text-white">
                    <svg class="w-6 h-6 md:w-8 md:h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                </button>
            </div>
            <div id="lightbox-thumbnails" class="flex justify-center items-center gap-2 md:gap-4 mt-4"></div>
        </div>
    </div>

    <script type="module">
        // --- STATE & CONFIGURATION ---
        const state = {
            currentLang: 'vi',
            currentView: 'home',
            selectedRecipeId: null,
            comparisonList: [],
            lastGeneratedAiRecipe: null,
            isAILoading: false,
            quizStep: 0,
            quizAnswers: {},
            activeFilters: { type: 'all', contrast: 'all', saturation: 'all' },
            isMobileDetailActive: false,
            lightbox: { isOpen: false, images: [], currentIndex: 0 }
        };

        const mainContentEl = document.getElementById('mainContent');
        let activeCharts = {};

        const translations = {
            // General
            headerTitle: {vi: "Alpha AI Color Lab", en: "Alpha AI Color Lab"},
            navRecipeFormulas: {vi:"Công thức màu", en:"Color Recipes"},
            navCreativeLooks: {vi:"Creative Look", en:"Creative Look"},
            navFeaturedPhotos: {vi: "Ảnh nổi bật", en: "Featured Photos"},
            navExplain: {vi:"Giải thích (PP)", en:"Guide (PP)"},
            noteTitle: {vi:"Lưu ý quan trọng", en:"Important Note"},
            footerText: {vi: "Phát triển bởi Sony Alpha Vietnam. Tính năng AI cung cấp bởi Google Gemini.", en: "Developed by Sony Alpha Vietnam. AI features powered by Google Gemini."},

            // Home / Quiz
            landingTitle: {vi:"Tìm màu sắc của riêng bạn.", en:"Find Your Signature Color."},
            landingSubtitle: {vi:"Trả lời vài câu hỏi để khám phá công thức màu được AI tạo ra dành riêng cho tâm trạng và phong cách của bạn.", en:"Answer a few questions to discover a unique color recipe, tailored by AI to your mood and style."},
            startQuizBtn: {vi:"Khám phá màu của bạn", en:"Discover Your Color"},
            quizResultTitle: {vi: "AI đề xuất 2 lựa chọn cho bạn:", en: "AI suggests 2 options for you:"},
            viewInLibraryBtn: {vi: "Xem trong thư viện", en: "View in Library"},
            loadingAnalyze: {vi: "Đang phân tích lựa chọn...", en: "Analyzing your choices..."},
            
            // Recipe Formulas
            sidebarTitle: {vi: "Công thức Picture Profile", en: "Picture Profile Recipes"},
            searchInputPlaceholder: {vi: "🔍 Tìm công thức...", en: "🔍 Search recipes..."},
            filterType: {vi: "Loại", en: "Type"},
            filterTypeColor: {vi: "Màu", en: "Color"},
            filterTypeBW: {vi: "Trắng Đen", en: "B&W"},
            filterContrast: {vi: "Tương phản", en: "Contrast"},
            filterSaturation: {vi: "Bão hòa", en: "Saturation"},
            filterHigh: {vi: "Cao", en: "High"},
            filterMedium: {vi: "Vừa", en: "Med"},
            filterLow: {vi: "Thấp", en: "Low"},
            filterSort: {vi: "Sắp xếp theo", en: "Sort by"},
            sortDefault: {vi: "Mặc định", en: "Default"},
            sortNameAZ: {vi: "Tên A-Z", en: "Name A-Z"},
            sortContrastHL: {vi: "Tương phản: Cao-Thấp", en: "Contrast: High-Low"},
            sortSaturationHL: {vi: "Bão hòa: Cao-Thấp", en: "Saturation: High-Low"},
            compareBtn: {vi: "So sánh bằng AI", en: "Compare with AI"},
            recipeDetailWelcomeTitle: {vi: "Thư viện màu Tương tác", en: "Interactive Color Library"},
            recipeDetailWelcomeText: {vi: "Khám phá các công thức màu Picture Profile một cách trực quan. Nhấp vào một điểm trên biểu đồ hoặc một công thức trong danh sách để xem chi tiết.", en: "Explore Picture Profile color recipes visually. Click a point on the chart or a recipe in the list to see details."},
            whiteBalanceTitle: {vi: "Cân bằng trắng (WB)", en: "White Balance (WB)"},
            recipeSettingsTitle: {vi: "Cài đặt Chính", en: "Main Settings"},
            colorDepthTitle: {vi: "Độ sâu màu", en: "Color Depth"},
            detailTitle: {vi: "Chi tiết", en: "Detail"},
            aiTuningTitle: {vi: "Tinh chỉnh bằng AI", en: "AI Fine-Tuning"},
            aiTuningPlaceholder: {vi: "Nhập yêu cầu của bạn ở đây... (ví dụ: 'làm cho màu ấm hơn và trong hơn')", en: "Enter your request here... (e.g., 'make it warmer and clearer')"},
            aiTuningBtn: {vi: "Tạo bằng AI", en: "Generate with AI"},
            aiResultTitle: {vi: "Công thức đã được AI tinh chỉnh:", en: "AI-Adjusted Recipe:"},
            compareWithOriginalBtn: {vi: "So sánh với bản gốc", en: "Compare with Original"},
            aiSuggestionTitle: {vi: "Gợi ý của AI:", en: "AI Suggestion:"},
            aiSuggestionText: {vi: "Dựa trên yêu cầu của bạn, công thức này có vẻ phù hợp hơn: ", en: "Based on your request, this recipe might be a better fit: "},
            comparisonModalTitle: {vi: "So sánh Công thức", en: "Recipe Comparison"},
            comparisonLoading: {vi: "AI đang phân tích và so sánh...", en: "AI is analyzing and comparing..."},
            colorChartTitle: {vi: "Biểu đồ Màu", en: "Color Chart"},
            bwChartTitle: {vi: "Biểu đồ Đơn sắc (B&W)", en: "Monochrome (B&W) Chart"},
            axisTonality: {vi: "Tương phản (← Mềm | Cứng →)", en: "Tonality (← Soft | Hard →)"},
            axisSaturation: {vi: "Độ bão hòa (← Thấp | Cao →)", en: "Saturation (← Low | High →)"},
            axisChroma: {vi: "Độ sâu màu (← Thấp | Cao →)", en: "Chroma Depth (← Low | High →)"},
            backToListBtn: {vi: "← Quay lại danh sách", en: "← Back to list"},

            // Featured Photos
            featuredTitle: {vi: "Ảnh Nổi Bật từ Cộng Đồng", en: "Featured Photos from the Community"},
            featuredCta: {vi: "Cùng nhau xây dựng một thư viện ảnh đầy cảm hứng! Hãy chia sẻ những tác phẩm bạn chụp bằng các công thức từ Alpha AI Color Lab. Ảnh được chọn sẽ xuất hiện tại đây để vinh danh.", en: "Let's build an inspiring gallery together! Share your creations shot with recipes from the Alpha AI Color Lab. Selected photos will be featured here."},
            featuredAlbumBtn: {vi: "Xem Album & Đóng góp Ảnh", en: "View Album & Contribute Photos"},
            contributeTitle: {vi: "Hoặc Tải lên Ảnh của Bạn", en: "Or Upload Your Photo"},
            contributeDesc: {vi: "Tải lên ảnh của bạn để chia sẻ ẩn danh. (Chỉ mang tính minh hoạ, ảnh sẽ không được lưu trữ).", en: "Upload your photo to share anonymously. (For demonstration purposes only, photos will not be saved)."},
            uploadBtn: {vi: "Chọn Ảnh từ Máy tính", en: "Choose Photo From Computer"},
            
            // Creative Looks
            creativeLookHeader: {vi: "Khám Phá Creative Look", en: "Exploring Creative Looks"},
            creativeLookSubtitle: {vi: "Tạo nên thần thái cho bức ảnh ngay tại máy với 10 tuỳ chọn Creative Look có sẵn và khả năng tuỳ chỉnh sâu. Đây là tính năng mới hơn so với Creative Style trên các dòng máy cũ.", en: "Instantly create the mood for your photos in-camera with 10 pre-set Creative Looks and deep customization options. This is a newer feature compared to Creative Style on older models."},
            customParamsTitle: {vi: "Các thông số tuỳ chỉnh", en: "Customizable Parameters"},
            cl_ST_name: {vi: "ST: Tiêu chuẩn", en:"ST: Standard"},
            cl_ST_desc: {vi: "Màu tiêu chuẩn cho đa dạng chủ thể và bối cảnh.", en:"The standard finish for a wide range of subjects and scenes."},
            cl_PT_name: {vi: "PT: Chân dung", en:"PT: Portrait"},
            cl_PT_desc: {vi: "Tái tạo tông màu da mềm mại, lý tưởng cho chụp chân dung.", en:"For capturing skin in a soft tone, ideally suited for shooting portraits."},
            cl_NT_name: {vi: "NT: Trung tính", en:"NT: Neutral"},
            cl_NT_desc: {vi: "Độ bão hòa và sắc nét thấp hơn, phù hợp cho ảnh cần hậu kỳ.", en:"Lower saturation and sharpness for shooting images before they are to be processed."},
            cl_VV_name: {vi: "VV: Rực rỡ", en:"VV: Vivid"},
            cl_VV_desc: {vi: "Tăng cường độ bão hòa và tương phản để tạo ấn tượng mạnh.", en:"Saturation and contrast are heightened for a striking impression of colorful scenes and subjects."},
            cl_VV2_name: {vi: "VV2: Rực rỡ 2", en:"VV2: Vivid 2"},
            cl_VV2_desc: {vi: "Tạo ra ảnh trong và sáng với màu sắc sống động. Hiệu quả với chủ thể nhiều màu sắc.", en:"Creates a highly clear image with bright and vibrant colours. Effective for colourful subjects."},
            cl_FL_name: {vi: "FL: Giả lập phim", en:"FL: Film-like"},
            cl_FL_desc: {vi: "Tạo cảm giác như phim điện ảnh với màu sắc điềm tĩnh và bầu trời ấn tượng.", en:"For a film-like expression with calm colours and a stunning sky."},
            cl_IN_name: {vi: "IN: Chụp lấy ngay", en:"IN: Instant Camera"},
            cl_IN_desc: {vi: "Tạo cảm giác hoài cổ như ảnh chụp từ máy ảnh lấy liền.", en:"For a nostalgic expression like photos from an instant camera."},
            cl_SH_name: {vi: "SH: Soft High-key", en:"SH: Soft High-key"},
            cl_SH_desc: {vi: "Tạo không khí trong trẻo, tươi sáng, mềm mại và nhẹ nhàng.", en:"For creating a bright, transparent, soft, and gentle atmosphere."},
            cl_BW_name: {vi: "BW: Đen trắng", en:"BW: Black & White"},
            cl_BW_desc: {vi: "Tạo ảnh đơn sắc không bao giờ lỗi thời.", en:"For creating a timeless Black & White image."},
            cl_SE_name: {vi: "SE: Nâu đỏ", en:"SE: Sepia"},
            cl_SE_desc: {vi: "Tạo ảnh màu nâu đỏ cổ điển.", en:"For creating an archaic Sepia image."},
            cl_param_contrast: {vi: "Tương phản (Contrast)", en: "Contrast"},
            cl_param_contrast_desc: {vi: "Giá trị càng cao, sự khác biệt giữa vùng sáng và tối càng được nhấn mạnh.", en:"The higher the value, the more the difference between light and dark is emphasized."},
            cl_param_highlights: {vi: "Vùng sáng (Highlights)", en: "Highlights"},
            cl_param_highlights_desc: {vi: "Điều chỉnh độ sáng của các vùng sáng.", en:"Adjusts the brightness of the bright areas."},
            cl_param_shadows: {vi: "Vùng tối (Shadows)", en: "Shadows"},
            cl_param_shadows_desc: {vi: "Điều chỉnh độ tối của các vùng tối.", en:"Adjusts the darkness of the dark areas."},
            cl_param_fading: {vi: "Độ bạc màu (Fading)", en: "Fading"},
            cl_param_fading_desc: {vi: "Giá trị càng cao, hiệu ứng bạc màu càng rõ rệt.", en:"The higher the value, the more the faded-out effect is applied."},
            cl_param_saturation: {vi: "Bão hòa (Saturation)", en: "Saturation"},
            cl_param_saturation_desc: {vi: "Giá trị càng cao, màu sắc càng sống động.", en:"The higher the value, the more vivid the colours."},
            cl_param_sharpness: {vi: "Độ nét (Sharpness)", en: "Sharpness"},
            cl_param_sharpness_desc: {vi: "Điều chỉnh đường viền. Giá trị càng cao, đường viền càng được làm nổi bật.", en:"Adjusts the outline. The higher the value, the more the outlines are accentuated."},
            cl_param_sharpness_range: {vi: "Phạm vi nét (Sharpness Range)", en: "Sharpness Range"},
            cl_param_sharpness_range_desc: {vi: "Điều chỉnh phạm vi áp dụng độ nét.", en:"Adjusts the range to which sharpness is applied."},
            cl_param_clarity: {vi: "Độ trong (Clarity)", en: "Clarity"},
            cl_param_clarity_desc: {vi: "Giá trị càng cao, độ trong của ảnh càng được tăng cường.", en:"The higher the value, the more the clarity is enhanced."},

            // Explanation Tab
            explainHeader: {vi: "Làm Chủ Màu Sắc Cùng Sony Alpha", en:"Mastering Color with Sony Alpha"},
            explainSubtitle: {vi: "Hướng dẫn toàn diện để tạo ra màu sắc đậm chất riêng cho ảnh tĩnh", en:"A comprehensive guide to creating your unique color signature for stills"},
            pillarsTitle: {vi: "Hai Trụ Cột Sáng Tạo Màu Sắc", en:"The Two Pillars of Color Creation"},
            wbPillarTitle: {vi: "Trụ cột 1: White Balance - Nền Tảng Cảm Xúc", en:"Pillar 1: White Balance - The Emotional Foundation"},
            ppPillarTitle: {vi: "Trụ cột 2: Picture Profile - Tạo Dáng Vẻ Phim Ảnh", en:"Pillar 2: Picture Profile - Crafting the Film Look"},
            wbKelvinTitle: {vi: "Nhiệt Độ Kelvin (K): Tạo Tông Màu Chủ Đạo", en: "Kelvin Temperature (K): Creating the Main Tone"},
            wbKelvinDesc: {vi: 'Sử dụng thang đo Kelvin như một nét cọ lớn để "nhuộm" toàn bộ khung hình bằng tông màu ấm hoặc lạnh, định hình "mood" cho bức ảnh.', en: 'Use the Kelvin scale like a broad brush to "tint" the entire frame with warm or cool tones, shaping the photo\'s mood.'},
            wbShiftTitle: {vi: "Lưới Tinh Chỉnh (A-B/G-M Shift): Thêm Sắc Thái Tinh Vi", en:"Fine-Tuning Grid (A-B/G-M Shift): Adding Subtle Hues"},
            wbShiftDesc: {vi: 'Nếu Kelvin là nét cọ lớn, lưới tinh chỉnh là cọ tỉa. Đây là chìa khóa để mô phỏng các loại phim đặc trưng bằng cách thêm các sắc thái Hổ phách/Xanh hoặc Xanh lá/Tím.', en: 'If Kelvin is the broad brush, the grid is the fine-detail brush. It\'s key to simulating specific films by adding Amber/Blue or Green/Magenta tints.'},
            ppInfographicTitle: {vi: "Quy trình Tinh chỉnh Picture Profile", en:"Picture Profile Adjustment Workflow"},
            ppInfographicDesc: {vi: "Làm theo các bước sau để thiết lập Picture Profile từ đầu, cho phép bạn kiểm soát hoàn toàn giao diện cuối cùng của hình ảnh.", en:"Follow these steps to set up a Picture Profile from scratch, giving you full control over the final look of your image."},
            ppItemBlackLevel: {vi: "Black Level", en: "Black Level"},
            ppItemBlackLevelDesc: {vi: "Điều chỉnh điểm đen. Tăng (+) để nâng vùng tối (tạo look 'faded'), giảm (-) để vùng tối sâu hơn (tăng tương phản).", en: "Adjusts the black point. Increase (+) to lift shadows (for a 'faded' look), decrease (-) for deeper blacks (more contrast)."},
            ppItemGamma: {vi: "Gamma", en: "Gamma"},
            ppItemGammaDesc: {vi: "Xác định đường cong tương phản & dải nhạy sáng. Đây là nền tảng cho 'look' của bạn.", en: "Defines the contrast curve & dynamic range. This is the foundation of your look."},
            ppItemBlackGamma: {vi: "Black Gamma", en: "Black Gamma"},
            ppItemBlackGammaDesc: {vi: "Tinh chỉnh tương phản ở vùng tối. 'Wide' ảnh hưởng vùng rộng hơn, 'Narrow' ảnh hưởng vùng hẹp hơn.", en: "Fine-tunes contrast in the shadow areas. 'Wide' affects a broader range, 'Narrow' affects a smaller range."},
            ppItemKnee: {vi: "Knee", en: "Knee"},
            ppItemKneeDesc: {vi: "Kiểm soát vùng sáng (highlight) để tránh bị 'cháy'. Chế độ tự động (Auto) hoạt động tốt, chế độ thủ công (Manual) cho phép kiểm soát chính xác hơn.", en: "Controls the highlights to prevent 'clipping'. Auto mode works well; Manual mode gives precise control."},
            ppItemColorMode: {vi: "Color Mode", en: "Color Mode"},
            ppItemColorModeDesc: {vi: "Xác định cách màu sắc được tái tạo. Nên chọn chế độ phù hợp với Gamma đã chọn (ví dụ: Cine4 với Pro/Cinema).", en: "Determines how colors are reproduced. Should be matched with the chosen Gamma (e.g., Cine4 with Pro/Cinema)."},
            ppItemSaturation: {vi: "Saturation", en: "Saturation"},
            ppItemSaturationDesc: {vi: "Điều chỉnh độ bão hòa tổng thể của tất cả các màu.", en: "Adjusts the overall intensity of all colors."},
            ppItemColorPhase: {vi: "Color Phase", en: "Color Phase"},
            ppItemColorPhaseDesc: {vi: "Xoay trục màu sắc tổng thể. Hữu ích để tinh chỉnh nhẹ toàn bộ tông màu.", en: "Shifts the overall hue of all colors. Useful for subtle, global color tone adjustments."},
            ppItemColorDepth: {vi: "Color Depth", en: "Color Depth"},
            ppItemColorDepthDesc: {vi: "Công cụ mạnh mẽ nhất. Tăng/giảm độ bão hòa của từng kênh màu riêng lẻ (Đỏ, Lục, Lam, Lục lam, Tím, Vàng).", en: "The most powerful tool. Increases/decreases the saturation of individual color channels (R, G, B, C, M, Y)."},
            ppItemDetail: {vi: "Detail", en: "Detail"},
            ppItemDetailDesc: {vi: "Kiểm soát độ sắc nét. Để có 'look' phim mềm mại, hãy giảm mạnh (ví dụ: -7).", en: "Controls the sharpening. For a soft, filmic look, decrease it significantly (e.g., -7)."},
            recallTitle: { vi: 'Lưu Trữ & Tái Sử Dụng: Làm Chủ Memory Recall', en: 'Save & Reuse: Mastering Memory Recall' },
            recallDesc: { vi: 'Đừng lãng phí công sức! Lưu lại các công thức của bạn vào bộ nhớ của máy ảnh để gọi ra nhanh chóng chỉ bằng một thao tác xoay nút.', en: 'Don\'t waste your effort! Save your recipes to the camera\'s memory for quick recall with a simple turn of a dial.' },
            recallInternalTitle: { vi: 'Bộ Nhớ Trong (1, 2, 3)', en: 'Internal Memory (1, 2, 3)' },
            recallInternalDesc: { vi: 'Lưu trực tiếp vào máy. Truy cập nhanh nhất bằng cách xoay vòng xoay chế độ. Lý tưởng cho các công thức bạn sử dụng hàng ngày.', en: 'Saves directly to the camera. Quickest access via the mode dial. Ideal for your daily-use recipes.' },
            recallCardTitle: { vi: 'Thẻ Nhớ (M1, M2, M3, M4)', en: 'Memory Card (M1, M2, M3, M4)' },
            recallCardDesc: { vi: 'Lưu dưới dạng file trên thẻ nhớ. Cực kỳ hữu ích để sao lưu an toàn hoặc chuyển công thức sang một thân máy Sony khác.', en: 'Saves as a file on your memory card. Extremely useful for backups or transferring recipes to another Sony camera body.' },
            tutorialTitle: { vi: "Hướng dẫn Cài đặt Nhanh", en: "Quick Setup Guide" },
            tutorialStep1Title: { vi: "Bước 1: Tìm Picture Profile", en: "Step 1: Find Picture Profile" },
            tutorialStep1P1: { vi: "Trong Menu, tìm đến mục <strong>Color/Tone</strong> (biểu tượng hồng) → <strong>Picture Profile</strong>.", en: "In the Menu, navigate to the <strong>Color/Tone</strong> section (pink icon) → <strong>Picture Profile</strong>." },
            tutorialStep2Title: { vi: "Bước 2: Chọn và Reset", en: "Step 2: Select & Reset" },
            tutorialStep2P1: { vi: "Chọn một profile trống (ví dụ: PP10), đi vào trong và nhấn nút 'Xoá' để reset về mặc định.", en: "Choose an empty profile (e.g., PP10), enter it, and press the 'Delete' button to reset it to default." },
            tutorialStep3Title: { vi: "Bước 3: Nhập thông số", en: "Step 3: Enter Parameters" },
            tutorialStep3P1: { vi: "Cẩn thận nhập tất cả các thông số của công thức, từ Black Level đến Color Depth.", en: "Carefully enter all parameters from the recipe, from Black Level to Color Depth." },
            tutorialStep4Title: { vi: "Bước 4: Cài đặt White Balance", en: "Step 4: Set White Balance" },
            tutorialStep4P1: { vi: "Thoát khỏi Picture Profile, vào mục <strong>White Balance</strong> và chỉnh theo nhiệt độ K và WB Shift được ghi trong công thức.", en: "Exit Picture Profile, go to <strong>White Balance</strong>, and adjust the Kelvin temperature and WB Shift as specified in the recipe." },

            // Quiz Questions
            quizQ1: {vi: "Gu thẩm mỹ của bạn?", en: "Your aesthetic?"},    
            quizQ1A1: {vi: "Cổ điển", en: "Classic"},    
            quizQ1A2: {vi: "Hiện đại", en: "Modern"},    
            quizQ1A3: {vi: "Điện ảnh", en: "Cinematic"},    
            quizQ1A4: {vi: "Nghệ thuật", en: "Artistic"},
            quizQ2: {vi: "Kế hoạch chụp hôm nay?", en: "Today's shoot plan?"},    
            quizQ2A1: {vi: "Chân dung", en: "Portraits"},    
            quizQ2A2: {vi: "Phong cảnh", en: "Landscapes"},    
            quizQ2A3: {vi: "Đường phố", en: "Street"},    
            quizQ2A4: {vi: "Đời thường", en: "Everyday"},
            quizQ3: {vi: "Tâm trạng lúc này?", en: "Current mood?"},    
            quizQ3A1: {vi: "Vui vẻ", en: "Happy"},    
            quizQ3A2: {vi: "Trầm tư", en: "Contemplative"},    
            quizQ3A3: {vi: "Năng động", en: "Dynamic"},    
            quizQ3A4: {vi: "Bình yên", en: "Peaceful"},
            quizQ4: {vi: "Bạn thích du lịch đến đâu?", en: "Where do you like to travel?"},
            quizQ4A1: {vi: "Biển xanh", en: "Beaches"},
            quizQ4A2: {vi: "Núi rừng", en: "Mountains"},
            quizQ4A3: {vi: "Thành phố đô thị", en: "Urban Cities"},
            quizQ4A4: {vi: "Phố cổ", en: "Old Towns"},
            quizQ5: {vi: "Bạn thích tone màu nào?", en: "Which color tone do you prefer?"},
            quizQ5A1: {vi: "Tone ấm", en: "Warm Tones"},
            quizQ5A2: {vi: "Tone lạnh", en: "Cool Tones"},
            quizQ5A3: {vi: "Trung tính", en: "Neutral"},
            quizQ6: {vi: "Xu hướng hình ảnh của bạn là gì?", en: "What is your image trend?"},
            quizQ6A1: {vi: "Hơi thở Á Đông", en: "Eastern Vibe"},
            quizQ6A2: {vi: "Cảm hứng Phương Tây", en: "Western Inspiration"},
            quizQ7: {vi: "Bạn thích độ tương phản ra sao?", en: "How do you like the contrast?"},
            quizQ7A1: {vi: "Cao (Gắt)", en: "High (Punchy)"},
            quizQ7A2: {vi: "Thấp (Mềm mại)", en: "Low (Soft)"},
            quizQ7A3: {vi: "Trung bình", en: "Medium"},
            quizQ8: {vi: "Bạn thích độ bão hòa màu sắc như thế nào?", en: "How do you like your color saturation?"},
            quizQ8A1: {vi: "Cao (Rực rỡ)", en: "High (Vibrant)"},
            quizQ8A2: {vi: "Thấp (Nhẹ nhàng)", en: "Low (Subtle)"},
            quizQ8A3: {vi: "Trung bình", en: "Medium"},
        };
        
        const quizQuestions = [
            { id: 'aesthetic', title: 'quizQ1', options: ['quizQ1A1', 'quizQ1A2', 'quizQ1A3', 'quizQ1A4'], values: ['Vintage', 'Modern', 'Cinematic', 'Artistic'] },
            { id: 'plan', title: 'quizQ2', options: ['quizQ2A1', 'quizQ2A2', 'quizQ2A3', 'quizQ2A4'], values: ['Portrait', 'Landscape', 'Street', 'Everyday'] },
            { id: 'mood', title: 'quizQ3', options: ['quizQ3A1', 'quizQ3A2', 'quizQ3A3', 'quizQ3A4'], values: ['Happy', 'Contemplative', 'Dynamic', 'Peaceful'] },
            { id: 'location', title: 'quizQ4', options: ['quizQ4A1', 'quizQ4A2', 'quizQ4A3', 'quizQ4A4'], values: ['Beach', 'Mountain', 'Urban', 'Old Town'] },
            { id: 'tone', title: 'quizQ5', options: ['quizQ5A1', 'quizQ5A2', 'quizQ5A3'], values: ['Warm', 'Cool', 'Neutral'] },
            { id: 'style', title: 'quizQ6', options: ['quizQ6A1', 'quizQ6A2'], values: ['Eastern', 'Western'] },
            { id: 'contrast', title: 'quizQ7', options: ['quizQ7A1', 'quizQ7A2', 'quizQ7A3'], values: ['High', 'Low', 'Medium'] },
            { id: 'saturation', title: 'quizQ8', options: ['quizQ8A1', 'quizQ8A2', 'quizQ8A3'], values: ['High', 'Low', 'Medium'] }
        ];
        
        // --- API CALLS (MOCKS) ---
        async function callAIApi(prompt, delay = 1000) {
            if (state.isAILoading) return;
            state.isAILoading = true;
            try {
                await new Promise(resolve => setTimeout(resolve, delay));
                if (prompt.includes("Recommend TWO recipes")) {
                    const idx1 = Math.floor(Math.random() * recipesData.length);
                    let idx2 = Math.floor(Math.random() * recipesData.length);
                    while (idx1 === idx2) { idx2 = Math.floor(Math.random() * recipesData.length); }
                    const mockRecipe1 = recipesData[idx1]; const mockRecipe2 = recipesData[idx2];
                    return [
                        { recipeId: mockRecipe1.id, moodDescription: mockRecipe1.description[state.currentLang] },
                        { recipeId: mockRecipe2.id, moodDescription: mockRecipe2.description[state.currentLang] }
                    ];
                }
                if (prompt.includes("Original Recipe")) {
                    const originalId = prompt.match(/ID: (.*?)\)/)[1];
                    const originalRecipe = recipesData.find(r => r.id === originalId);
                    let adjustedRecipe = JSON.parse(JSON.stringify(originalRecipe));
                    adjustedRecipe.name = {vi: `${originalRecipe.name.vi} (AI Tinh chỉnh)`, en: `${originalRecipe.name.en} (AI Adjusted)`};
                    if (prompt.includes('ấm') || prompt.includes('warmer')) { adjustedRecipe.whiteBalance = "5500K, A6-M1"; }
                    if (prompt.includes('trong') || prompt.includes('clearer')) { if(adjustedRecipe.settings) adjustedRecipe.settings['Black level'] = '0'; }
                    return { recipe: adjustedRecipe };
                }
                if (prompt.includes("Compare the following two recipes")) {
                    const names = prompt.match(/\*(.*?)\* and \*(.*?)\*/);
                    return `### Cảm Giác & Phong Cách\n* **${names[1]}:** Mang lại cảm giác ấm áp, hoài cổ.\n* **${names[2]}:** Tạo ra cái nhìn lạnh hơn, hiện đại.\n\n### So Sánh Thông Số Chính\n| Thông số | ${names[1]} | ${names[2]} | Phân Tích |\n|---|---|---|---|\n| **White Balance** | Ấm (4000K) | Lạnh (8000K) | Đây là sự khác biệt chính. |\n| **Black Level** | -15 | -10 | Cả hai đều tăng tương phản, nhưng công thức 1 có vùng tối sâu hơn. |\n\n### Trường Hợp Sử Dụng\n* **Dùng ${names[1]} khi:** Chụp chân dung, hoàng hôn.\n* **Dùng ${names[2]} khi:** Chụp phong cảnh, kiến trúc.`;
                }
            } catch (error) {
                console.error("AI API call failed:", error); return null;
            } finally {
                state.isAILoading = false;
                updateUIAfterAILoading();
            }
        }
        
        // --- UTILITY & HELPER FUNCTIONS ---
        function t(key) { return translations[key]?.[state.currentLang] || key; }
        
        function applyTranslations() {
            document.querySelectorAll('[data-translate-key]').forEach(el => {
                const key = el.dataset.translateKey;
                if (translations[key] && translations[key][state.currentLang]) {
                    if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') { el.placeholder = t(key); }    
                    else if (el.tagName === 'OPTION') { el.textContent = t(key); }    
                    else { el.innerHTML = t(key); }
                }
            });
            document.querySelectorAll('#mainNav .nav-btn').forEach(btn => btn.textContent = t('nav'+btn.dataset.view.charAt(0).toUpperCase()+btn.dataset.view.slice(1)));
            document.querySelectorAll('#mobileNavMenu .nav-btn-mobile').forEach(btn => btn.textContent = t('nav'+btn.dataset.view.charAt(0).toUpperCase()+btn.dataset.view.slice(1)));
            document.getElementById('langVI').classList.toggle('active', state.currentLang === 'vi');
            document.getElementById('langEN').classList.toggle('active', state.currentLang === 'en');
        }

        function createSettingsGrid(settings) {
            if (!settings) return '';
            return Object.entries(settings).map(([key, value]) => `<div class="flex flex-col"><span class="text-xs text-neutral-500">${key}</span><span class="font-semibold text-lg">${value}</span></div>`).join('');
        };

        function createFullRecipeHTML(recipe, isMainView = false) {
            const titleClass = isMainView ? 'text-xl font-bold' : 'text-lg font-bold';
            const noteHTML = (recipe.notes && recipe.notes[state.currentLang])    
                ? `<div class="mt-4 p-4 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 rounded-xl">
                        <p class="font-bold" data-translate-key="noteTitle"></p>
                        <p>${recipe.notes[state.currentLang]}</p>
                      </div>` : '';

            return `${noteHTML}<div class="space-y-6 mt-6">
                <div><h4 class="${titleClass} mb-2" data-translate-key="whiteBalanceTitle"></h4><div class="p-4 bg-black/5 rounded-xl"><p class="font-semibold text-lg">${recipe.whiteBalance || ''}</p></div></div>
                <div><h4 class="${titleClass} mb-2" data-translate-key="recipeSettingsTitle"></h4><div class="grid grid-cols-2 sm:grid-cols-3 gap-x-6 gap-y-5 p-5 bg-black/5 rounded-xl">${createSettingsGrid(recipe.settings)}</div></div>
                ${recipe.colorDepth ? `<div><h4 class="${titleClass} mb-2" data-translate-key="colorDepthTitle"></h4><div class="grid grid-cols-3 sm:grid-cols-6 gap-x-6 gap-y-5 p-5 bg-black/5 rounded-xl">${createSettingsGrid(recipe.colorDepth)}</div></div>` : ''}
                ${recipe.detailSettings ? `<div><h4 class="${titleClass} mb-2" data-translate-key="detailTitle"></h4><div class="grid grid-cols-2 sm:grid-cols-3 gap-x-6 gap-y-5 p-5 bg-black/5 rounded-xl">${createSettingsGrid(recipe.detailSettings)}</div></div>` : ''}
            </div>`;
        }

        function updateUIAfterAILoading() {
            document.querySelectorAll('button:disabled').forEach(btn => {
                if (btn.querySelector('.spinner')) {
                    btn.innerHTML = btn.dataset.originalText || '';
                    btn.disabled = false;
                }
            });
        }
        
        // --- VIEW RENDERING LOGIC ---
        const viewTemplates = {
            home: () => `<div id="homeView" class="w-full h-full flex flex-col items-center justify-center text-center absolute inset-0 view-transition p-4">
                <h1 data-translate-key="landingTitle" class="landing-title"></h1>
                <p data-translate-key="landingSubtitle" class="landing-subtitle"></p>
                <button id="startQuizBtn" class="btn btn-primary mt-10 py-4 px-10 text-lg" data-translate-key="startQuizBtn"></button>
            </div>`,
            
            quiz: () => {
                if (state.quizStep >= quizQuestions.length) return '';
                const q = quizQuestions[state.quizStep];
                const optionsHTML = q.options.map((optKey, index) => `<div class="quiz-option" data-value="${q.values[index]}"><span data-translate-key="${optKey}"></span></div>`).join('');
                const gridCols = q.options.length > 2 ? 'grid-cols-2' : 'grid-cols-1 sm:grid-cols-2';
                return `<div id="quizView" class="w-full h-full flex flex-col items-center justify-center absolute inset-0 view-transition">
                    <div class="w-full max-w-4xl text-center px-4" data-quiz-group="${q.id}">
                        <h2 class="quiz-question-title" data-translate-key="${q.title}"></h2>
                        <div class="grid ${gridCols} gap-4 sm:gap-5 mt-10 sm:mt-12">${optionsHTML}</div>
                    </div>
                </div>`;
            },
            
            recipeFormulas: () => `
                <div id="recipeFormulasView" class="w-full h-full flex flex-col md:flex-row gap-6 absolute inset-0 view-transition">
                    <aside id="recipeListPanel" class="w-full md:w-1/3 lg:w-[30%] xl:w-1/4 glass-panel p-4 md:p-6 flex flex-col flex-shrink-0 md:flex">
                        <h2 class="text-2xl md:text-3xl font-bold" data-translate-key="sidebarTitle"></h2>
                        <input type="search" id="searchInput" class="w-full p-3 my-4 rounded-xl bg-gray-200/50 border-2 border-transparent focus:border-blue-500 focus:bg-white transition-all" data-translate-key="searchInputPlaceholder">
                        <div id="filtersContainer" class="space-y-4 text-sm mb-4">
                             <div><h4 class="font-semibold mb-2" data-translate-key="filterType"></h4><div class="flex gap-2" data-filter-group="type"><button class="filter-btn flex-1 py-2 px-3 rounded-full active" data-filter-value="all">All</button><button class="filter-btn flex-1 py-2 px-3 rounded-full" data-translate-key="filterTypeColor" data-filter-value="color"></button><button class="filter-btn flex-1 py-2 px-3 rounded-full" data-translate-key="filterTypeBW" data-filter-value="bw"></button></div></div>
                             <div><h4 class="font-semibold mb-2" data-translate-key="filterContrast"></h4><div class="flex gap-2" data-filter-group="contrast"><button class="filter-btn flex-1 py-2 px-3 rounded-full active" data-filter-value="all">All</button><button class="filter-btn flex-1 py-2 px-3 rounded-full" data-translate-key="filterHigh" data-filter-value="high"></button><button class="filter-btn flex-1 py-2 px-3 rounded-full" data-translate-key="filterMedium" data-filter-value="medium"></button><button class="filter-btn flex-1 py-2 px-3 rounded-full" data-translate-key="filterLow" data-filter-value="low"></button></div></div>
                             <div><h4 class="font-semibold mb-2" data-translate-key="filterSaturation"></h4><div class="flex gap-2" data-filter-group="saturation"><button class="filter-btn flex-1 py-2 px-3 rounded-full active" data-filter-value="all">All</button><button class="filter-btn flex-1 py-2 px-3 rounded-full" data-translate-key="filterHigh" data-filter-value="high"></button><button class="filter-btn flex-1 py-2 px-3 rounded-full" data-translate-key="filterMedium" data-filter-value="medium"></button><button class="filter-btn flex-1 py-2 px-3 rounded-full" data-translate-key="filterLow" data-filter-value="low"></button></div></div>
                        </div>
                        <div id="recipeListContainer" class="space-y-2 pt-4 border-t flex-grow overflow-y-auto pr-2 -mr-3"></div>
                        <div id="compareBtnContainer" class="pt-4 flex-shrink-0"></div>
                    </aside>
                    <main id="recipeMainPanel" class="w-full md:w-2/3 lg:w-[70%] xl:w-3/4 flex-col min-h-0 hidden md:flex">
                        <div class="glass-panel flex-grow overflow-y-auto p-6 lg:p-10">
                           <div id="chartsContainer">
                               <div class="text-center mb-10">
                                   <h2 class="text-2xl md:text-3xl font-bold text-gray-700" data-translate-key="recipeDetailWelcomeTitle"></h2><p class="text-neutral-500 mt-2 max-w-xl mx-auto" data-translate-key="recipeDetailWelcomeText"></p>
                               </div>
                               <div class="grid grid-cols-1 xl:grid-cols-2 gap-8">
                                   <div><h3 class="text-xl font-bold text-center mb-4" data-translate-key="colorChartTitle"></h3><div class="chart-container"><canvas id="colorChart"></canvas></div></div>
                                   <div><h3 class="text-xl font-bold text-center mb-4" data-translate-key="bwChartTitle"></h3><div class="chart-container"><canvas id="bwChart"></canvas></div></div>
                               </div>
                           </div>
                           <div id="recipeContent" class="hidden"></div>
                        </div>
                    </main>
                    <div id="recipeDetailPanelMobile" class="w-full h-full absolute inset-0 bg-[#f4f7fc] p-4 overflow-y-auto hidden">
                        <button id="backToListBtn" class="btn bg-gray-200 text-gray-800 mb-4 p-4" data-translate-key="backToListBtn"></button>
                        <div class="glass-panel p-6 overflow-y-auto">
                           <div id="recipeContentMobile"></div>
                        </div>
                    </div>
                </div>`,
            
            creativeLooks: () => {
                const looks = ['ST', 'PT', 'NT', 'VV', 'VV2', 'FL', 'IN', 'SH', 'BW', 'SE'];
                const params = ['contrast', 'highlights', 'shadows', 'fading', 'saturation', 'sharpness', 'sharpness_range', 'clarity'];
                const lookColors = { ST: '888888', PT: 'E5B4B4', NT: 'AAAAAA', VV: 'FF4444', VV2: 'FF6600', FL: '6CA6C1', IN: 'D6C6B2', SH: 'F0EAD6', BW: '444444', SE: 'A07C5B' };

                const looksHTML = looks.map(look => `
                    <div class="bg-white rounded-xl shadow-md overflow-hidden transform hover:-translate-y-1 transition-transform duration-300">
                        <img src="https://placehold.co/600x400/${lookColors[look]}/FFFFFF?text=${look}" alt="Creative Look ${look}" class="w-full h-48 object-cover">
                        <div class="p-5">
                            <h4 class="font-bold text-lg" data-translate-key="cl_${look}_name"></h4>
                            <p class="text-sm text-gray-600 mt-1" data-translate-key="cl_${look}_desc"></p>
                        </div>
                    </div>`).join('');

                const paramsHTML = params.map(param => `
                    <div class="bg-blue-50/50 p-4 rounded-lg">
                        <h5 class="font-semibold text-blue-800" data-translate-key="cl_param_${param.replace('_', '')}"></h5>
                        <p class="text-sm text-blue-700/80" data-translate-key="cl_param_${param.replace('_', '')}_desc"></p>
                    </div>`).join('');

                return `
                <div id="creativeLooksView" class="w-full h-full absolute inset-0 overflow-y-auto view-transition p-4 md:p-8">
                    <div class="max-w-7xl mx-auto">
                        <header class="text-center mb-10 md:mb-12">
                            <h1 class="text-3xl md:text-5xl font-extrabold text-slate-800 mb-2" data-translate-key="creativeLookHeader"></h1>
                            <h2 class="text-base md:text-lg text-slate-600 max-w-3xl mx-auto" data-translate-key="creativeLookSubtitle"></h2>
                        </header>

                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                            ${looksHTML}
                        </div>

                        <section class="mt-12 md:mt-16 bg-white rounded-2xl shadow-lg p-6 md:p-8">
                            <h3 class="text-2xl md:text-3xl font-bold text-center mb-8" data-translate-key="customParamsTitle"></h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-5">
                               ${paramsHTML}
                            </div>
                        </section>
                         <footer class="text-center text-sm text-gray-500 pt-8 mt-12 border-t">
                            <p data-translate-key="footerText"></p>
                        </footer>
                    </div>
                </div>`;
            },
            
            featuredPhotos: () => `<div id="featuredPhotosView" class="w-full h-full absolute inset-0 overflow-y-auto view-transition p-4">
                <div class="glass-panel p-6 md:p-12 text-center max-w-5xl mx-auto">
                    <h2 class="text-2xl md:text-4xl font-bold" data-translate-key="featuredTitle"></h2>
                    <p class="text-base md:text-lg text-neutral-600 mt-4 max-w-3xl mx-auto" data-translate-key="featuredCta"></p>
                    <a href="https://photos.app.goo.gl/H8v1SQ68RSnn2r5Q6" target="_blank" rel="noopener noreferrer" class="btn btn-primary mt-8 py-3 px-8 text-base md:text-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M12 2L12 11M12 11L15 8M12 11L9 8"/><path d="M20 13.33V18C20 19.1046 19.1046 20 18 20H6C4.89543 20 4 19.1046 4 18V6C4 4.89543 4.89543 4 6 4H10.67" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                        <span data-translate-key="featuredAlbumBtn"></span>
                    </a>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mt-10">
                        ${recipesData.slice(0,6).map((recipe) => {
                            const hasDemoImages = recipe.demoImages && recipe.demoImages.length > 0;
                            const imgSrc = hasDemoImages ? recipe.demoImages[0] : `https://placehold.co/800x600/${recipe.personalityColor.substring(1)}/ffffff?text=${encodeURIComponent(recipe.name[state.currentLang])}`;
                            return `<div class="bg-gray-200 group rounded-xl overflow-hidden cursor-pointer lightbox-trigger-thumb" data-recipe-id="${recipe.id}" data-index="0">
                                <img src="${imgSrc}" alt="Ảnh demo công thức ${recipe.name[state.currentLang]}" class="aspect-video w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-300">
                            </div>`;
                        }).join('')}
                    </div>
                    <div class="mt-12 pt-10 border-t border-gray-900/10">
                      <h3 class="text-xl md:text-2xl font-bold" data-translate-key="contributeTitle"></h3>
                      <p class="text-neutral-600 mt-2 max-w-xl mx-auto" data-translate-key="contributeDesc"></p>
                      <label class="btn btn-secondary mt-6 py-3 px-8 bg-gray-200 text-black hover:bg-gray-300 cursor-pointer">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
                        <span data-translate-key="uploadBtn"></span>
                        <input type="file" class="hidden" accept="image/jpeg, image/png" id="photoUploadInput">
                      </label>
                    </div>
                </div>
            </div>`,
            
            explain: () => `
            <div id="explainView" class="w-full h-full absolute inset-0 overflow-y-auto view-transition bg-slate-50 text-gray-800">
                <div class="container mx-auto p-4 sm:p-6 md:p-12">
                    <header class="text-center mb-12 md:mb-16 pt-4 md:pt-8">
                        <h1 class="text-3xl md:text-5xl font-extrabold text-slate-800 mb-2" data-translate-key="explainHeader"></h1>
                        <h2 class="text-lg md:text-xl text-slate-600 max-w-3xl mx-auto" data-translate-key="explainSubtitle"></h2>
                    </header>
            
                    <main class="space-y-12 md:space-y-20">
                        <section>
                            <h3 class="text-2xl md:text-3xl font-bold text-center mb-8" data-translate-key="pillarsTitle"></h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <!-- Pillar 1: White Balance -->
                                <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                                    <h4 class="text-xl font-bold mb-6 text-center" data-translate-key="wbPillarTitle"></h4>
                                    <div class="mb-8">
                                        <h5 class="font-bold text-lg" data-translate-key="wbKelvinTitle"></h5>
                                        <p class="text-sm text-gray-600 mb-3" data-translate-key="wbKelvinDesc"></p>
                                        <div class="w-full h-8 rounded-full bg-gradient-to-r from-blue-400 via-white to-orange-400 flex justify-between items-center px-2 text-xs font-bold text-gray-700">
                                            <span>2500K</span>
                                            <span>5500K</span>
                                            <span>9900K</span>
                                        </div>
                                    </div>
                                    <div>
                                        <h5 class="font-bold text-lg" data-translate-key="wbShiftTitle"></h5>
                                        <p class="text-sm text-gray-600 mb-3" data-translate-key="wbShiftDesc"></p>
                                        <div id="abgm-grid-interactive-container">
                                            <div id="abgm-grid" class="relative">
                                                <!-- Axes Labels -->
                                                <span class="absolute top-1/2 -left-5 -translate-y-1/2 font-bold text-blue-600">B</span>
                                                <span class="absolute top-1/2 -right-5 -translate-y-1/2 font-bold text-amber-600">A</span>
                                                <span class="absolute left-1/2 -top-5 -translate-x-1/2 font-bold text-green-600">G</span>
                                                <span class="absolute left-1/2 -bottom-5 -translate-x-1/2 font-bold text-purple-600">M</span>
                                                <!-- Draggable Pointer -->
                                                <div id="abgm-pointer" style="top: 50%; left: 50%;"></div>
                                            </div>
                                            <div id="abgm-values" class="text-center mt-2 font-mono font-semibold bg-slate-100 p-2 rounded-md">A-B: 0, G-M: 0</div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Pillar 2: Picture Profile (Placeholder for Infographic) -->
                                <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                                    <h4 class="text-xl font-bold mb-6 text-center" data-translate-key="ppPillarTitle"></h4>
                                    <p class="text-sm text-gray-700 mb-6 text-center" data-translate-key="ppInfographicDesc"></p>
                                     <div class="space-y-4">
                                        <details class="pp-infographic-item"><summary class="font-bold cursor-pointer">1. <span data-translate-key="ppItemBlackLevel"></span></summary><p class="text-sm text-gray-600 mt-2" data-translate-key="ppItemBlackLevelDesc"></p></details>
                                        <details class="pp-infographic-item"><summary class="font-bold cursor-pointer">2. <span data-translate-key="ppItemGamma"></span></summary><p class="text-sm text-gray-600 mt-2" data-translate-key="ppItemGammaDesc"></p></details>
                                        <details class="pp-infographic-item"><summary class="font-bold cursor-pointer">3. <span data-translate-key="ppItemBlackGamma"></span></summary><p class="text-sm text-gray-600 mt-2" data-translate-key="ppItemBlackGammaDesc"></p></details>
                                        <details class="pp-infographic-item"><summary class="font-bold cursor-pointer">4. <span data-translate-key="ppItemKnee"></span></summary><p class="text-sm text-gray-600 mt-2" data-translate-key="ppItemKneeDesc"></p></details>
                                     </div>
                                </div>
                            </div>
                        </section>
                        
                        <!-- NEW UNIFIED PICTURE PROFILE SECTION -->
                        <section class="bg-gradient-to-b from-slate-100 to-white rounded-2xl shadow-lg p-6 md:p-8">
                           <h3 class="text-2xl md:text-3xl font-bold text-center" data-translate-key="ppInfographicTitle"></h3>
                           <p class="max-w-3xl mx-auto text-center text-gray-700 mt-2 mb-10" data-translate-key="ppInfographicDesc"></p>

                           <div class="space-y-6">
                                <div class="pp-infographic-item">
                                    <h5 data-translate-key="ppItemBlackLevel"></h5>
                                    <p class="text-sm text-gray-600 mt-1" data-translate-key="ppItemBlackLevelDesc"></p>
                                </div>
                                <div class="text-center text-gray-400 font-bold">↓</div>
                                <div class="pp-infographic-item">
                                    <h5 data-translate-key="ppItemGamma"></h5>
                                    <p class="text-sm text-gray-600 mt-1 mb-3" data-translate-key="ppItemGammaDesc"></p>
                                    <ul class="text-sm list-none space-y-2 param-list">
                                        <li><strong>Cine1-4:</strong> Look điện ảnh, tăng dải nhạy sáng. Cine4 phổ biến nhất.</li>
                                        <li><strong>S-Log2/3:</strong> Phẳng, tối đa hóa DR, CẦN hậu kỳ. S-Log3 tối ưu hơn.</li>
                                        <li><strong>HLG:</strong> Chuẩn HDR, xem trực tiếp trên TV HDR.</li>
                                        <li><strong>Still/Movie:</strong> Gamma tiêu chuẩn, tương phản tốt, dùng ngay.</li>
                                    </ul>
                                </div>
                                <div class="text-center text-gray-400 font-bold">↓</div>
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                    <div class="pp-infographic-item">
                                        <h5 data-translate-key="ppItemBlackGamma"></h5>
                                        <p class="text-sm text-gray-600 mt-1" data-translate-key="ppItemBlackGammaDesc"></p>
                                    </div>
                                    <div class="pp-infographic-item">
                                        <h5 data-translate-key="ppItemKnee"></h5>
                                        <p class="text-sm text-gray-600 mt-1" data-translate-key="ppItemKneeDesc"></p>
                                    </div>
                                </div>
                                <div class="text-center text-gray-400 font-bold">↓</div>
                                <div class="pp-infographic-item">
                                    <h5 data-translate-key="ppItemColorMode"></h5>
                                    <p class="text-sm text-gray-600 mt-1 mb-3" data-translate-key="ppItemColorModeDesc"></p>
                                     <ul class="text-sm list-none space-y-2 param-list">
                                        <li><strong>Pro / Cinema:</strong> Màu sắc chân thực hoặc điện ảnh, dùng với Cine Gamma.</li>
                                        <li><strong>S-Gamut3.Cine:</strong> Không gian màu rộng cho S-Log, dễ hậu kỳ.</li>
                                        <li><strong>BT.2020:</strong> Chuẩn màu HDR, dùng với HLG.</li>
                                     </ul>
                                </div>
                                <div class="text-center text-gray-400 font-bold">↓</div>
                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                    <div class="pp-infographic-item">
                                        <h5 data-translate-key="ppItemSaturation"></h5>
                                        <p class="text-sm text-gray-600 mt-1" data-translate-key="ppItemSaturationDesc"></p>
                                    </div>
                                    <div class="pp-infographic-item">
                                        <h5 data-translate-key="ppItemColorPhase"></h5>
                                        <p class="text-sm text-gray-600 mt-1" data-translate-key="ppItemColorPhaseDesc"></p>
                                    </div>
                                    <div class="pp-infographic-item">
                                        <h5 data-translate-key="ppItemDetail"></h5>
                                        <p class="text-sm text-gray-600 mt-1" data-translate-key="ppItemDetailDesc"></p>
                                    </div>
                                </div>
                                <div class="text-center text-gray-400 font-bold">↓</div>
                                 <div class="pp-infographic-item">
                                    <h5 data-translate-key="ppItemColorDepth"></h5>
                                    <p class="text-sm text-gray-600 mt-1" data-translate-key="ppItemColorDepthDesc"></p>
                                </div>
                           </div>
                           <div class="text-center mt-12">
                                <button id="exploreMoreBtn" class="btn btn-primary py-3 px-8 text-base md:text-lg" data-translate-key="navRecipeFormulas"></button>
                            </div>
                        </section>

                         <section class="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                            <h3 class="text-2xl md:text-3xl font-bold text-center mb-4" data-translate-key="recallTitle"></h3>
                             <p class="max-w-3xl mx-auto text-center text-gray-700 mb-8" data-translate-key="recallDesc"></p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                                <div class="bg-slate-100 rounded-lg p-6 text-center">
                                    <h4 class="text-xl font-bold text-slate-700 mb-2" data-translate-key="recallInternalTitle"></h4>
                                    <p class="text-sm" data-translate-key="recallInternalDesc"></p>
                                </div>
                                <div class="bg-slate-100 rounded-lg p-6 text-center">
                                    <h4 class="text-xl font-bold text-slate-700 mb-2" data-translate-key="recallCardTitle"></h4>
                                    <p class="text-sm" data-translate-key="recallCardDesc"></p>
                                </div>
                            </div>
                         </section>
            
                    </main>
                    <footer class="text-center text-sm text-gray-500 pt-8 mt-12 border-t">
                        <p data-translate-key="footerText"></p>
                    </footer>
                </div>
            </div>`
        };

        // --- Lightbox Functions ---
        function openLightbox(images, initialIndex = 0) {
            if (!images || images.length === 0) return;
            state.lightbox.isOpen = true;
            state.lightbox.images = images;
            state.lightbox.currentIndex = initialIndex;
            const lightboxEl = document.getElementById('lightbox');
            lightboxEl.classList.remove('hidden');
            updateLightboxContent();
        }

        function closeLightbox() {
            state.lightbox.isOpen = false;
            document.getElementById('lightbox').classList.add('hidden');
        }

        function updateLightboxContent() {
            if (!state.lightbox.isOpen) return;
            const mainImageEl = document.getElementById('lightbox-main-image');
            const thumbnailsContainer = document.getElementById('lightbox-thumbnails');
            const newSrc = state.lightbox.images[state.lightbox.currentIndex];
            mainImageEl.style.opacity = '0';
            setTimeout(() => {
                mainImageEl.src = newSrc;
                mainImageEl.onload = () => { mainImageEl.style.opacity = '1'; };
            }, 150);
            
            thumbnailsContainer.innerHTML = state.lightbox.images.map((imgSrc, index) => `
                <img src="${imgSrc}" class="lightbox-thumb w-16 h-16 md:w-20 md:h-20 object-cover rounded-md ${index === state.lightbox.currentIndex ? 'active' : ''}" data-index="${index}">
            `).join('');
        }

        function navigateLightbox(direction) {
            if (!state.lightbox.isOpen) return;
            const imageCount = state.lightbox.images.length;
            let newIndex = state.lightbox.currentIndex + direction;
            if (newIndex < 0) newIndex = imageCount - 1;
            else if (newIndex >= imageCount) newIndex = 0;
            state.lightbox.currentIndex = newIndex;
            updateLightboxContent();
        }

        function destroyAllCharts() {
            Object.values(activeCharts).forEach(chart => { if(chart && typeof chart.destroy === 'function') chart.destroy(); });
            activeCharts = {};
        }

        function initInteractiveGrid() {
            const grid = document.getElementById('abgm-grid');
            const pointer = document.getElementById('abgm-pointer');
            const valuesDisplay = document.getElementById('abgm-values');
            if (!grid || !pointer || !valuesDisplay) return;

            let isDragging = false;

            function updatePosition(clientX, clientY) {
                const rect = grid.getBoundingClientRect();
                let x = clientX - rect.left;
                let y = clientY - rect.top;

                // Clamp position within the grid
                x = Math.max(0, Math.min(x, rect.width));
                y = Math.max(0, Math.min(y, rect.height));

                pointer.style.left = `${x}px`;
                pointer.style.top = `${y}px`;

                // Convert pixel position to A-B/G-M values (-9 to +9)
                const abValue = Math.round((x / rect.width) * 18 - 9);
                const gmValue = Math.round(((rect.height - y) / rect.height) * 18 - 9); // Invert Y-axis

                const abLabel = abValue > 0 ? `A${abValue}` : (abValue < 0 ? `B${Math.abs(abValue)}` : '0');
                const gmLabel = gmValue > 0 ? `G${gmValue}` : (gmValue < 0 ? `M${Math.abs(gmValue)}` : '0');

                valuesDisplay.textContent = `${abLabel}, ${gmLabel}`;
            }

            grid.addEventListener('mousedown', (e) => {
                isDragging = true;
                updatePosition(e.clientX, e.clientY);
            });
            
            grid.addEventListener('touchstart', (e) => {
                isDragging = true;
                updatePosition(e.touches[0].clientX, e.touches[0].clientY);
                e.preventDefault();
            });

            document.addEventListener('mousemove', (e) => {
                if (isDragging) updatePosition(e.clientX, e.clientY);
            });
            
             document.addEventListener('touchmove', (e) => {
                if (isDragging) updatePosition(e.touches[0].clientX, e.touches[0].clientY);
            });

            document.addEventListener('mouseup', () => { isDragging = false; });
            document.addEventListener('touchend', () => { isDragging = false; });
        }


        function renderView(viewName) {
            state.currentView = viewName;
            return new Promise(resolve => {
                const currentContent = mainContentEl.children[0];
                if (currentContent) {
                    currentContent.classList.add('view-transition-out');
                    destroyAllCharts();
                    currentContent.addEventListener('animationend', () => {
                        mainContentEl.innerHTML = viewTemplates[viewName]();
                        attachViewEventListeners(viewName);
                        applyTranslations();
                        resolve();
                    }, { once: true });
                } else {
                    mainContentEl.innerHTML = viewTemplates[viewName]();
                    attachViewEventListeners(viewName);
                    applyTranslations();
                    resolve();
                }
            });
        }
        
        function handleFilterClick(e) {
            const btn = e.target.closest('.filter-btn'); if (!btn) return;
            const group = btn.closest('[data-filter-group]').dataset.filterGroup;
            const value = btn.dataset.filterValue; state.activeFilters[group] = value;
            document.querySelectorAll(`[data-filter-group="${group}"] .filter-btn`).forEach(b => b.classList.remove('active'));
            btn.classList.add('active'); renderLibraryList();
        }

        function handleRecipeSelection(id, type) {
            if (type === 'checkbox') {
                const index = state.comparisonList.indexOf(id);
                if (index > -1) { state.comparisonList.splice(index, 1); } 
                else if (state.comparisonList.length < 2) { state.comparisonList.push(id); }
            } else {
                if (state.selectedRecipeId === id) {
                    state.selectedRecipeId = null;
                    state.isMobileDetailActive = false;
                } else {
                    state.selectedRecipeId = id;
                    state.isMobileDetailActive = true;
                }
                state.comparisonList = [];
            }
            renderLibraryList();
            renderLibraryDetails();
            
            if (activeCharts.color && typeof activeCharts.color.update === 'function') { activeCharts.color.update(); }
            if (activeCharts.bw && typeof activeCharts.bw.update === 'function') { activeCharts.bw.update(); }
        }

        async function handleAiComparison(id1, id2, recipe2Obj = null) {
            const modal = document.getElementById('comparisonModal');
            const titleEl = document.getElementById('comparisonModalTitle');
            const contentEl = document.getElementById('comparisonModalContent');
            modal.classList.remove('hidden');
            titleEl.textContent = t('comparisonModalTitle');
            contentEl.innerHTML = `<div class="flex items-center justify-center p-8"><div class="spinner !w-12 !h-12 !border-4"></div><p class="ml-4 text-lg font-semibold">${t('comparisonLoading')}</p></div>`;
            const recipe1 = recipesData.find(r => r.id === id1);
            const recipe2 = recipe2Obj ? { ...recipe2Obj, id: 'ai-adjusted', name: recipe2Obj.name } : recipesData.find(r => r.id === id2);
            const prompt = `Compare the following two recipes: *${recipe1.name[state.currentLang]}* and *${recipe2.name[state.currentLang]}*. Analyze their overall feel, key parameter differences (like White Balance and Black Level), and suggest ideal use cases for each. Present the result in Markdown.`;
            const comparisonText = await callAIApi(prompt, 1200);
            contentEl.innerHTML = marked.parse(comparisonText || "Error loading comparison.");
            applyTranslations();
        }

        async function handleAiAdjustment(button) {
            const recipeId = button.dataset.recipeId;
            const textarea = document.getElementById('aiTuningTextarea');
            const resultContainer = document.getElementById('aiResultContainer');
            if (!textarea.value || !resultContainer || state.isAILoading) return;
            button.disabled = true; button.dataset.originalText = button.innerHTML;
            button.innerHTML = `<div class="spinner"></div> ${t('aiTuningBtn')}`;
            const originalRecipe = recipesData.find(r => r.id === recipeId);
            const prompt = `Original Recipe (ID: ${recipeId}): ${JSON.stringify(originalRecipe.settings)}. User request: "${textarea.value}". Please provide a new JSON object with adjusted settings.`;
            const aiResponse = await callAIApi(prompt);
            if (aiResponse && aiResponse.recipe) {
                state.lastGeneratedAiRecipe = aiResponse.recipe;
                resultContainer.innerHTML = `<div class="mt-6 border-t border-gray-200/50 pt-6"><h4 class="font-bold text-lg mb-2">${state.lastGeneratedAiRecipe.name[state.currentLang]}</h4><div class="p-4 rounded-xl bg-blue-50">${createFullRecipeHTML(state.lastGeneratedAiRecipe, false)}</div><button id="compareWithOriginalBtn" data-original-id="${recipeId}" class="btn btn-secondary w-full mt-4 py-3 bg-gray-200 text-black" data-translate-key="compareWithOriginalBtn"></button></div>`;
            } else { resultContainer.innerHTML = `<p class="text-red-500">Failed to generate adjustment.</p>`; }
            button.disabled = false; button.innerHTML = button.dataset.originalText; applyTranslations();
        }

        async function handleQuizSubmit() {
            await renderView('home');
            const homeView = document.getElementById('homeView');
            if (!homeView) { console.error("Quiz Submit Error: homeView not found after render."); return; }
            homeView.innerHTML = `<div class="flex flex-col items-center justify-center h-full"><div class="spinner !w-16 !h-16 !border-4"></div><h2 class="landing-title mt-8" data-translate-key="loadingAnalyze"></h2></div>`;
            applyTranslations();
            const prompt = `Based on user preferences: ${JSON.stringify(state.quizAnswers)}. Recommend TWO recipes from the available list. Respond with JSON array: [{"recipeId", "moodDescription" (in ${state.currentLang})}, ...].`;
            const aiResponse = await callAIApi(prompt);
            if (aiResponse && aiResponse.length >= 2) {
                const r1 = recipesData.find(r => r.id === aiResponse[0].recipeId);
                const r2 = recipesData.find(r => r.id === aiResponse[1].recipeId);
                if (r1 && r2) {
                    homeView.innerHTML = `<div class="w-full h-full flex items-center justify-center absolute inset-0 view-transition"><div class="quiz-result-container p-6 md:p-8 rounded-3xl w-full max-w-5xl mx-auto glass-panel"><h3 class="text-2xl md:text-3xl font-bold mb-6 md:mb-8 text-center" data-translate-key="quizResultTitle"></h3><div class="grid md:grid-cols-2 gap-6"><div class="quiz-choice-option p-6" data-recipe-id="${r1.id}"><h4 class="text-xl md:text-2xl font-bold mb-2">${r1.name[state.currentLang]}</h4><p class="text-base italic text-gray-600">"${r1.description[state.currentLang]}"</p></div><div class="quiz-choice-option p-6" data-recipe-id="${r2.id}"><h4 class="text-xl md:text-2xl font-bold mb-2">${r2.name[state.currentLang]}</h4><p class="text-base italic text-gray-600">"${r2.description[state.currentLang]}"</p></div></div></div></div>`;
                    applyTranslations();
                }
            } else { homeView.innerHTML = `<p class="text-red-500">Lỗi khi lấy đề xuất từ AI.</p>`; }
        }
        
        function attachViewEventListeners(viewName) {
            if (viewName === 'recipeFormulas') {
                renderLibraryList();    
                renderLibraryDetails();
                renderInteractiveCharts(state.currentLang);
            } else if (viewName === 'explain') {
                initInteractiveGrid();
            }
        }

        // --- RENDER & INITIALIZATION ---
        function renderLibraryList() {
            const container = document.getElementById('recipeListContainer'); if (!container) return;
            const searchTerm = (document.getElementById('searchInput')?.value || '').toLowerCase();
            let recipesToRender = recipesData.filter(recipe => (recipe.name.vi.toLowerCase().includes(searchTerm) || recipe.name.en.toLowerCase().includes(searchTerm) || recipe.description.vi.toLowerCase().includes(searchTerm) || recipe.description.en.toLowerCase().includes(searchTerm)) && (state.activeFilters.type === 'all' || recipe.type === state.activeFilters.type) && (state.activeFilters.contrast === 'all' || recipe.contrast === state.activeFilters.contrast) && (state.activeFilters.saturation === 'all' || recipe.saturation === state.activeFilters.saturation) );
            
            container.innerHTML = recipesToRender.map(recipe => {
                const isChecked = state.comparisonList.includes(recipe.id);
                const isSelected = recipe.id === state.selectedRecipeId;

                return `<div class="recipe-item p-3 rounded-xl transition-all duration-200 border-l-4 border-transparent flex items-start gap-4 ${isSelected ? 'selected' : ''}">
                            <input type="checkbox" class="recipe-compare-cb form-checkbox h-5 w-5 text-blue-600 rounded-md border-gray-300 focus:ring-blue-500 self-start mt-1 flex-shrink-0" data-recipe-id="${recipe.id}" ${isChecked ? 'checked' : ''} ${state.comparisonList.length >= 2 && !isChecked ? 'disabled' : ''}>
                             <div class="flex-grow cursor-pointer recipe-item-content" data-recipe-id="${recipe.id}">
                                <div class="flex items-start gap-3">
                                    <div class="recipe-dot w-5 h-5 rounded-full flex-shrink-0 mt-1" style="background-color: ${recipe.personalityColor}" title="${recipe.name[state.currentLang]}"></div>
                                    <div class="flex-grow">
                                        <span class="font-semibold text-primary">${recipe.name[state.currentLang]}</span>
                                        <p class="text-sm text-neutral-600 mt-1 leading-snug">${recipe.description[state.currentLang]}</p>
                                    </div>
                                </div>
                            </div>
                        </div>`;
            }).join('');

            const btnContainer = document.getElementById('compareBtnContainer');
            btnContainer.innerHTML = `<button id="compareBtn" class="btn btn-primary w-full mt-4 py-3" data-translate-key="compareBtn" ${state.comparisonList.length !== 2 ? 'disabled' : ''}></button>`;
            applyTranslations();
        }
        
        function renderLibraryDetails() {
            const isMobile = window.innerWidth < 768;
            const recipeListPanel = document.getElementById('recipeListPanel');
            const recipeMainPanel = document.getElementById('recipeMainPanel');
            const recipeDetailPanelMobile = document.getElementById('recipeDetailPanelMobile');

            if (isMobile) {
                if(state.isMobileDetailActive) {
                    recipeListPanel.classList.add('hidden');
                    recipeDetailPanelMobile.classList.remove('hidden');
                } else {
                    recipeListPanel.classList.remove('hidden');
                    recipeDetailPanelMobile.classList.add('hidden');
                }
            } else {
                recipeListPanel?.classList.remove('hidden');
                recipeDetailPanelMobile?.classList.add('hidden');
            }

            const recipe = recipesData.find(r => r.id === state.selectedRecipeId);

            let recipeContentContainer, chartsContainer;
            if (isMobile && state.isMobileDetailActive) {
                recipeContentContainer = document.getElementById('recipeContentMobile');
                chartsContainer = null;
            } else {
                recipeContentContainer = document.getElementById('recipeContent');
                chartsContainer = document.getElementById('chartsContainer');
            }

            if (!recipeContentContainer) return;

            if (!recipe) {    
                if (chartsContainer) chartsContainer.classList.remove('hidden');
                recipeContentContainer.classList.add('hidden');
                if(!isMobile) recipeMainPanel?.classList.remove('hidden');
                return;    
            }
            if (chartsContainer) chartsContainer.classList.add('hidden');
            recipeContentContainer.classList.remove('hidden');
            if(!isMobile) recipeMainPanel?.classList.remove('hidden');
            
            // --- NEW Thumbnail Logic ---
            let thumbnailsHTML = '';
            const images = recipe.demoImages || [];
            let imageElements = [];
            // Use existing demo images first
            images.forEach((imgSrc, index) => {
                imageElements.push(`<div class="bg-gray-200 group rounded-xl overflow-hidden cursor-pointer lightbox-trigger-thumb" data-recipe-id="${recipe.id}" data-index="${index}"><img src="${imgSrc}" alt="Ảnh demo ${index + 1}" class="aspect-[4/3] w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-300"></div>`);
            });
            // Fill up to 3 with placeholders
            const placeholdersNeeded = 3 - imageElements.length;
            const placeholderColor = recipe.personalityColor ? recipe.personalityColor.substring(1) : 'cccccc';
            for (let i = 0; i < placeholdersNeeded; i++) {
                const placeholderIndex = images.length + i;
                 imageElements.push(`<div class="bg-gray-200 group rounded-xl overflow-hidden"><img src="https://placehold.co/400x300/${placeholderColor}/ffffff?text=Sample+${placeholderIndex + 1}" alt="Ảnh minh họa ${placeholderIndex + 1}" class="aspect-[4/3] w-full h-full object-cover"></div>`);
            }
            thumbnailsHTML = `<div class="my-6"><div class="grid grid-cols-3 gap-2 md:gap-4">${imageElements.join('')}</div></div>`;
            // --- END Thumbnail Logic ---

            recipeContentContainer.innerHTML = `
                <h3 class="text-3xl md:text-4xl font-bold">${recipe.name[state.currentLang]}</h3>
                <p class="text-lg text-neutral-600 mt-2 italic">"${recipe.description[state.currentLang]}"</p>
                ${thumbnailsHTML}
                <div id="originalRecipeContainer" class="mt-8">${createFullRecipeHTML(recipe, true)}</div>
                <div class="mt-12 pt-8 border-t-2 border-gray-200/60">
                    <details open class="group">
                        <summary class="text-xl md:text-2xl font-bold cursor-pointer list-none flex justify-between items-center group-hover:text-blue-600 transition-colors">
                            <span data-translate-key="tutorialTitle"></span>
                            <svg class="w-6 h-6 transition-transform transform group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </summary>
                        <div class="prose max-w-none mt-6 space-y-4 text-base text-gray-700">
                            <div><h4 class="font-bold" data-translate-key="tutorialStep1Title"></h4><p data-translate-key="tutorialStep1P1"></p></div>
                            <div><h4 class="font-bold" data-translate-key="tutorialStep2Title"></h4><p data-translate-key="tutorialStep2P1"></p></div>
                            <div><h4 class="font-bold" data-translate-key="tutorialStep3Title"></h4><p data-translate-key="tutorialStep3P1"></p></div>
                            <div><h4 class="font-bold" data-translate-key="tutorialStep4Title"></h4><p data-translate-key="tutorialStep4P1"></p></div>
                        </div>
                    </details>
                </div>
                <div class="mt-12 pt-8 border-t-2 border-gray-200/60">
                    <h3 class="text-xl md:text-2xl font-bold mb-4" data-translate-key="aiTuningTitle"></h3>
                    <div class="glass-panel p-4 md:p-6 -mx-2">
                        <textarea id="aiTuningTextarea" class="w-full p-3 rounded-lg border-2 border-gray-200 focus:ring-2 focus:ring-blue-500 transition-shadow" rows="3" data-translate-key="aiTuningPlaceholder"></textarea>
                        <button id="aiTuningBtn" data-recipe-id="${recipe.id}" class="btn btn-primary w-full mt-4 py-3" data-translate-key="aiTuningBtn"></button>
                        <div id="aiResultContainer"></div>
                    </div>
                </div>`;
            applyTranslations();
        }

        function renderInteractiveCharts(lang) {
            destroyAllCharts();
            const chartDefaultOptions = (yAxisTitleKey) => ({
                responsive: true,
                maintainAspectRatio: false,
                onClick: (e) => {
                    const chart = e.chart;
                    const elements = chart.getElementsAtEventForMode(e, 'nearest', { intersect: true }, true);
                    if (elements.length) {
                        const firstPoint = elements[0];
                        const recipeId = chart.data.datasets[firstPoint.datasetIndex].data[firstPoint.index].id;
                        if (recipeId) { handleRecipeSelection(recipeId, 'chart'); }
                    }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: 'rgba(0,0,0,0.8)',
                        titleFont: { size: 14 },
                        bodyFont: { size: 13 },
                        padding: 10,
                        callbacks: { label: function(context) { return context.raw.name; } }
                    }
                },
                scales: {
                    x: { min: -10, max: 10, grid: { color: 'rgba(0,0,0,0.05)' }, ticks: { display: false }, border: { dash: [4, 4] }, title: { display: true, text: t('axisTonality') } },
                    y: { min: -10, max: 10, grid: { color: 'rgba(0,0,0,0.05)' }, ticks: { display: false }, border: { dash: [4, 4] }, title: { display: true, text: t(yAxisTitleKey) } }
                }
            });
            
            const colorCtx = document.getElementById('colorChart')?.getContext('2d');
            if (colorCtx) {
                const colorData = recipesData.filter(r => r.type === 'color' && r.coords && typeof r.coords.x === 'number' && typeof r.coords.y === 'number' && r.personalityColor).map(r => ({ ...r.coords, id: r.id, name: r.name[lang] }));
                activeCharts.color = new Chart(colorCtx, {
                    type: 'scatter',
                    data: {
                        datasets: [{
                            data: colorData,
                            pointBackgroundColor: colorData.map(d => {
                                const recipe = recipesData.find(r => r.id === d.id);
                                return recipe ? recipe.personalityColor : '#CCCCCC';
                            }),
                            pointBorderColor: (ctx) => (ctx.raw?.id === state.selectedRecipeId ? '#007AFF' : 'rgba(255, 255, 255, 0.8)'),
                            pointBorderWidth: (ctx) => (ctx.raw?.id === state.selectedRecipeId ? 4 : 2),
                            pointRadius: (ctx) => (ctx.raw?.id === state.selectedRecipeId ? 11 : 7),
                            pointHoverRadius: 11
                        }]
                    },
                    options: chartDefaultOptions('axisSaturation')
                });
            }

            const bwCtx = document.getElementById('bwChart')?.getContext('2d');
            if (bwCtx) {
                const bwData = recipesData.filter(r => r.type === 'bw' && r.coords && typeof r.coords.x === 'number' && typeof r.coords.y === 'number').map(r => ({ ...r.coords, id: r.id, name: r.name[lang] }));
                activeCharts.bw = new Chart(bwCtx, {
                    type: 'scatter',
                    data: {
                        datasets: [{
                            data: bwData,
                            pointBackgroundColor: '#475569',
                            pointBorderColor: (ctx) => (ctx.raw?.id === state.selectedRecipeId ? '#007AFF' : 'rgba(255, 255, 255, 0.8)'),
                            pointBorderWidth: (ctx) => (ctx.raw?.id === state.selectedRecipeId ? 4 : 2),
                            pointRadius: (ctx) => (ctx.raw?.id === state.selectedRecipeId ? 11 : 7),
                            pointHoverRadius: 11,
                            pointHoverBorderWidth: 3
                        }]
                    },
                    options: chartDefaultOptions('axisChroma')
                });
            }
        }

        function toggleMobileNav(show) {
            const menu = document.getElementById('mobileNavMenu');
            menu.classList.toggle('translate-x-full', !show);
        }

        function init() {
            // Main click handler using event delegation
            document.body.addEventListener('click', async (e) => {
                const target = e.target;
                
                // Lightbox navigation
                if (state.lightbox.isOpen) {
                    if (target.id === 'lightbox-bg' || target.closest('#lightbox-close')) { closeLightbox(); } 
                    else if (target.closest('#lightbox-next')) { navigateLightbox(1); } 
                    else if (target.closest('#lightbox-prev')) { navigateLightbox(-1); }
                    const thumb = target.closest('.lightbox-thumb');
                    if (thumb) {
                        state.lightbox.currentIndex = parseInt(thumb.dataset.index);
                        updateLightboxContent();
                    }
                    return; // Prevent other handlers when lightbox is open
                }

                // --- General Navigation & Actions ---
                const lightboxTrigger = target.closest('.lightbox-trigger-thumb');
                const homeBtn = target.closest('#homeBtn');
                const navBtn = target.closest('.nav-btn');
                const mobileNavBtn = target.closest('.nav-btn-mobile');
                const langBtn = target.closest('.lang-btn');
                const startQuizBtn = target.closest('#startQuizBtn');
                const exploreMoreBtn = target.closest('#exploreMoreBtn');
                const hamburgerBtn = target.closest('#hamburgerBtn');
                const closeMobileNavBtn = target.closest('#closeMobileNavBtn');
                
                if (hamburgerBtn) { toggleMobileNav(true); return; }
                if (closeMobileNavBtn || (target.id === 'mobileNavMenu' && !target.closest('#mobileNavMenu > div'))) { toggleMobileNav(false); return; }
                if (mobileNavBtn) {
                    toggleMobileNav(false);
                    state.selectedRecipeId = null; state.isMobileDetailActive = false;
                    await renderView(mobileNavBtn.dataset.view); return;
                }
                if (homeBtn) { state.selectedRecipeId = null; state.isMobileDetailActive = false; await renderView('home'); return; }
                if (navBtn) { state.selectedRecipeId = null; state.isMobileDetailActive = false; await renderView(navBtn.dataset.view); return; }
                if (exploreMoreBtn) { state.selectedRecipeId = null; state.isMobileDetailActive = false; await renderView('recipeFormulas'); return; }
                if (langBtn) { state.currentLang = langBtn.id.replace('lang', '').toLowerCase(); await renderView(state.currentView); return; }

                // --- View-specific Actions ---

                // Quiz Actions
                const quizOption = target.closest('.quiz-option');
                const quizChoice = target.closest('.quiz-choice-option');
                if (startQuizBtn) { state.quizStep = 0; state.quizAnswers = {}; await renderView('quiz'); return; }
                if (quizOption) {
                    if(!quizOption.classList.contains('selected')) {
                        const group = quizOption.closest('[data-quiz-group]').dataset.quizGroup;
                        state.quizAnswers[group] = quizOption.dataset.value;
                        document.querySelectorAll(`[data-quiz-group="${group}"] .quiz-option`).forEach(opt => opt.classList.remove('selected'));
                        quizOption.classList.add('selected');
                        setTimeout(() => {
                            state.quizStep++;
                            if (state.quizStep >= quizQuestions.length) handleQuizSubmit(); else renderView('quiz');
                        }, 250);
                    }
                    return;
                }
                 if (quizChoice) { 
                    state.selectedRecipeId = quizChoice.dataset.recipeId; 
                    state.isMobileDetailActive = true;
                    await renderView('recipeFormulas'); return; 
                }

                // Recipe Library Actions
                const recipeItemContent = target.closest('.recipe-item-content');
                const recipeDot = target.closest('.recipe-dot');
                const recipeCompareCb = target.closest('.recipe-compare-cb');
                const compareBtn = target.closest('#compareBtn');
                const compareWithOriginalBtn = target.closest('#compareWithOriginalBtn');
                const aiTuningBtn = target.closest('#aiTuningBtn');
                const backToListBtn = target.closest('#backToListBtn');
                const closeModalBtn = target.closest('#closeComparisonModalBtn');

                if (recipeItemContent || recipeDot) { handleRecipeSelection(target.closest('[data-recipe-id]').dataset.recipeId, 'div'); return; }
                if (recipeCompareCb) { handleRecipeSelection(recipeCompareCb.dataset.recipeId, 'checkbox'); return; }
                if (compareBtn && !compareBtn.disabled) { handleAiComparison(state.comparisonList[0], state.comparisonList[1]); return; }
                if (compareWithOriginalBtn) { handleAiComparison(compareWithOriginalBtn.dataset.originalId, null, state.lastGeneratedAiRecipe); return; }
                if (aiTuningBtn) { handleAiAdjustment(aiTuningBtn); return; }
                if (backToListBtn) { state.isMobileDetailActive = false; renderLibraryDetails(); return; }
                if (closeModalBtn) { document.getElementById('comparisonModal').classList.add('hidden'); return; }
                if (lightboxTrigger) {
                    const recipeId = lightboxTrigger.dataset.recipeId;
                    const recipe = recipesData.find(r => r.id === recipeId);
                    if (recipe && recipe.demoImages && recipe.demoImages.length > 0) {
                         openLightbox(recipe.demoImages, parseInt(lightboxTrigger.dataset.index));
                    }
                    return;
                }

                // Filters
                if (document.getElementById('filtersContainer')?.contains(target)) { handleFilterClick(e); return; }
            });
            
            // Search input listener
            document.body.addEventListener('input', (e) => {
                if (e.target.id === 'searchInput') {
                    renderLibraryList();
                }
            });
            
            // Resize listener
            window.addEventListener('resize', () => { if(state.currentView === 'recipeFormulas') renderLibraryDetails(); });
            
            // Initial render
            renderView('home');
        }

        document.addEventListener("DOMContentLoaded", init);

const recipesData = [
    {
        "id": "pro-portrait",
        "name": { "vi": "1. Chân Dung Hoàn Hảo", "en": "1. Pro Portrait" },
        "description": { "vi": "Màu sắc trung thực, tông da đẹp, lựa chọn tin cậy cho chân dung.", "en": "True colors, beautiful skin tones, a reliable choice for portraits." },
        "type": "color", "contrast": "medium", "saturation": "high",
        "whiteBalance": "4000K, A7-G0",
        "settings": { "Black level": "+6", "Gamma": "S-Cinetone/Cine4", "Black Gamma": "Narrow -7", "Knee": "Auto", "Color Mode": "Still", "Saturation": "+25", "Color Phase": "-2" },
        "colorDepth": { "R": "+2", "G": "+7", "B": "+3", "C": "+5", "M": "+3", "Y": "-7" },
        "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#FFB74D", "coords": { "x": 5.0, "y": 5.0 }
    },
    {
        "id": "classic-ortho",
        "name": { "vi": "2. Khuôn Vàng Cổ Điển", "en": "2. Classic Ortho" },
        "description": { "vi": "Giả lập phim đen trắng cổ điển không nhạy với màu đỏ.", "en": "Simulates classic orthochromatic B&W film, not sensitive to red." },
        "type": "bw", "contrast": "high", "saturation": "medium",
        "whiteBalance": "AWB, A3-M2.75",
        "settings": { "Black level": "-12", "Gamma": "Movie", "Black Gamma": "Narrow -7", "Knee": "105% +5", "Color Mode": "Still", "Saturation": "+15", "Color Phase": "0" },
        "colorDepth": { "R": "+7", "G": "+7", "B": "-7", "C": "-7", "M": "+7", "Y": "+7" },
        "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#BDBDBD", "coords": { "x": 7.4, "y": -4.5 }
    },
   {
        "id": "emerald-night",
        "name": { "vi": "3. Ngọc Lục Bảo Đêm*", "en": "3. Emerald Night*" },
        "description": { "vi": "Tông xanh lục bảo đậm, bão hòa cao dưới đèn đêm, sang trọng.", "en": "Deep, highly saturated emerald green under night lights, luxurious." },
        "type": "color", "contrast": "high", "saturation": "high",
        "whiteBalance": "3000K, A7-G7",
        "settings": { "Black level": "-15", "Gamma": "Still", "Black Gamma": "Wide +7", "Knee": "Manual 105% +4", "Color Mode": "S-Gamut3.Cine", "Saturation": "+32", "Color Phase": "+5" },
        "colorDepth": { "R": "+5", "G": "-1", "B": "+2", "C": "+5", "M": "+5", "Y": "+3" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#00695C", "coords": { "x": 7.7, "y": -6.5 },
        "demoImages": [
            "https://lh3.googleusercontent.com/pw/AP1GczM2sFMrd25QZ47mMD2JRphoHLCSDvxCrQj1P2n8G-dxfeydqoiSQDO7JzQJYgQPpyrmmWPZJ7vLhOQlJTljP3KnXQHaDM8V7hgRcs7dj0vlbB_qUvLv8kjXvyIhyJVr9GItBUkT8TdhU4EezcEpaubBnA=w1505-h1003-s-no?authuser=0",
            "https://lh3.googleusercontent.com/pw/AP1GczNq5QwTbXiZc8PrWaNa3WCQaMureNLeOTDNmS6Lz2Y2-3PWc6XPpsNxwilNPqfAdUIuMPjP3v3GjWyQzeLA_cHurcj7pzeT33cNIst66PulgKz27ZD-QtQMb0j5tLrBqR2wJesDs92XUGEQRTP_Yas34A=w1505-h1003-s-no?authuser=0",
            "https://lh3.googleusercontent.com/pw/AP1GczPp8E62y90FOS3aD7a6EZ4MgZWmn9rFq64hsMOFz7ezrYMQtarOaryCYv0OJJm2bFQclB-v0nib3LlJK5_9IUeke_ozuiw41QR61Y_qIMjE3ADd0i2ma9BmmPBtJiGS4l1sVzrnMi8HCfQWp4vcEKv-UA=w669-h1003-s-no?authuser=0"
        ]
    },
    {
        "id": "deep-ink",
        "name": { "vi": "4. Mực Đen Sâu Thẳm", "en": "4. Deep Ink" },
        "description": { "vi": "Tăng cường độ sâu cho vùng tối, tạo cái nhìn kịch tính.", "en": "Enhances the depth of shadows for a dramatic look." },
        "type": "bw", "contrast": "high", "saturation": "low",
        "whiteBalance": "AWB",
        "settings": { "Black level": "-15", "Gamma": "Still", "Black Gamma": "Middle +5", "Knee": "Manual 85% +5", "Color Mode": "Black & White", "Saturation": "+15", "Color Phase": "0" },
        "colorDepth": { "R": "-6", "G": "+1", "B": "+5", "C": "+4", "M": "-6", "Y": "-2" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#757575", "coords": { "x": 9.0, "y": 5.5 }
    },
    {
        "id": "acid-green",
        "name": { "vi": "5. Xanh Acid", "en": "5. Acid Green" },
        "description": { "vi": "Xanh lá cây và vàng chanh nổi bật, hiệu ứng thị giác mạnh.", "en": "Prominent green and lime-yellow, strong visual effect." },
        "type": "color", "contrast": "medium", "saturation": "high",
        "whiteBalance": "3400K, A7-M1.75",
        "settings": { "Black level": "-6", "Gamma": "Still", "Black Gamma": "Wide +7", "Knee": "Auto", "Color Mode": "Still", "Saturation": "+20", "Color Phase": "0" },
        "colorDepth": { "R": "+3", "G": "+7", "B": "+2", "C": "+7", "M": "-5", "Y": "-4" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#8BC34A", "coords": { "x": 1.5, "y": -8.0 }
    },
    {
        "id": "timeworn-grain",
        "name": { "vi": "6. Bụi Thời Gian", "en": "6. Timeworn Grain" },
        "description": { "vi": "Tương phản thấp, hạt mịn, tạo cảm giác ảnh cũ.", "en": "Low contrast, fine grain, feel of an old photo." },
        "type": "bw", "contrast": "low", "saturation": "high",
        "whiteBalance": "5500K, A3-G2",
        "notes": { "vi": "Bật Giảm nhiễu cho JPG & đặt thành Thấp. Chụp ISO 1600+ để tăng hạt.", "en": "Turn On NR for JPG & Set to Low. Shoot ISO 1600+ to increase Granularity." },
        "settings": { "Black level": "+3", "Gamma": "Cine1", "Black Gamma": "Narrow +5", "Knee": "Manual 75% +3", "Color Mode": "Black & White", "Saturation": "+24", "Color Phase": "0" },
        "colorDepth": { "R": "+3", "G": "+3", "B": "+3", "C": "+2", "M": "+3", "Y": "+2" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#B0BEC5", "coords": { "x": -8.1, "y": -6.4 }
    },
    {
        "id": "jungle-jade",
        "name": { "vi": "7. Rừng Già Cúc Phương", "en": "7. Jungle Jade" },
        "description": { "vi": "Màu xanh lá cây đậm và bão hòa, cảm giác sâu thẳm của rừng già.", "en": "Deep, saturated green, profound feeling of an ancient forest." },
        "type": "color", "contrast": "high", "saturation": "high",
        "whiteBalance": "3500K, A7-G0.25",
        "settings": { "Black level": "-2", "Gamma": "Still", "Black Gamma": "Middle -7", "Knee": "Manual 75% +5", "Color Mode": "ITU709Matrix", "Saturation": "+18", "Color Phase": "-3" },
        "colorDepth": { "R": "+2", "G": "+7", "B": "+7", "C": "+7", "M": "+7", "Y": "-4" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#2E7D32", "coords": { "x": 7.5, "y": -7.0 }
    },
    {
        "id": "classic-negative",
        "name": { "vi": "8. Âm Bản Cổ Điển", "en": "8. Classic Negative" },
        "description": { "vi": "Tông màu lạnh, ám xanh, tái tạo cảm giác phim âm bản xưa.", "en": "Cool, blue-tinted tone, recreating the feel of old negative film." },
        "type": "color", "contrast": "high", "saturation": "medium",
        "whiteBalance": "8200K, B4.5-G1.75",
        "settings": { "Black level": "-10", "Gamma": "S-Cinetone", "Black Gamma": "Narrow -7", "Knee": "Auto", "Color Mode": "S-Cinetone", "Saturation": "+16", "Color Phase": "+2" },
        "colorDepth": { "R": "+5", "G": "+7", "B": "-6", "C": "-5", "M": "+7", "Y": "-4" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#2196F3", "coords": { "x": 6.5, "y": 3.0 }
    },
    {
        "id": "autumn-portrait",
        "name": { "vi": "9. Chân Dung Mùa Thu", "en": "9. Autumn Portrait" },
        "description": { "vi": "Màu sắc ấm áp, lý tưởng cho chụp chân dung trong điều kiện ánh sáng yếu.", "en": "Warm colors, ideal for portraits in low light conditions." },
        "type": "color", "contrast": "medium", "saturation": "medium",
        "whiteBalance": "4500K, A7-M1",
        "notes": { "vi": "Tắt Gamma Assist!", "en": "Turn Off Gamma Assist!" },
        "settings": { "Black level": "-15", "Gamma": "S-Log2/S-Log3", "Black Gamma": "Middle -7", "Knee": "Manual 75% +5", "Color Mode": "Still", "Saturation": "+20", "Color Phase": "+3" },
        "colorDepth": { "R": "+3", "G": "+5", "B": "+5", "C": "+7", "M": "+7", "Y": "-3" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#D7CCC8", "coords": { "x": -2.2, "y": 6.5 }
    },
    {
        "id": "blue-velvet",
        "name": { "vi": "10. Nhung Xanh", "en": "10. Blue Velvet" },
        "description": { "vi": "Tông màu xanh dương lạnh, mềm mại như nhung, sang trọng và bí ẩn.", "en": "A cool, soft blue tone like velvet, luxurious and mysterious." },
        "type": "color", "contrast": "low", "saturation": "medium",
        "whiteBalance": "7400K, B4-M1",
        "settings": { "Black level": "0", "Gamma": "Still", "Black Gamma": "Middle +7", "Knee": "Manual 75% +4", "Color Mode": "Still", "Saturation": "+10", "Color Phase": "-3" },
        "colorDepth": { "R": "+4", "G": "+5", "B": "-4", "C": "-4", "M": "+5", "Y": "+2" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#5C6BC0", "coords": { "x": -7.5, "y": 2.5 }
    },
    {
        "id": "urban-drama",
        "name": { "vi": "11. Kịch Tính Đô Thị", "en": "11. Urban Drama" },
        "description": { "vi": "Tương phản cực cao, làm nổi bật đường nét, hình khối.", "en": "Extremely high contrast, emphasizing lines and shapes." },
        "type": "bw", "contrast": "high", "saturation": "low",
        "whiteBalance": "AWB",
        "settings": { "Black level": "-15", "Gamma": "Still", "Black Gamma": "Wide -7", "Knee": "Manual 85% +5", "Color Mode": "Black & White", "Saturation": "+15", "Color Phase": "0" },
        "colorDepth": { "R": "+2", "G": "-4", "B": "-1", "C": "+2", "M": "-1", "Y": "+2" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#616161", "coords": { "x": 9.5, "y": -8.0 }
    },
    {
        "id": "sandy-street",
        "name": { "vi": "12. Phố Cát", "en": "12. Sandy Street" },
        "description": { "vi": "Màu sắc ấm áp, ngả vàng cát, hoài niệm và bụi bặm.", "en": "Warm, sandy-yellow hue, nostalgic and dusty feel." },
        "type": "color", "contrast": "low", "saturation": "high",
        "whiteBalance": "4400K, A7-G1",
        "settings": { "Black level": "0", "Gamma": "Cine1", "Black Gamma": "Middle +7", "Knee": "Manual 75% +5", "Color Mode": "Still", "Saturation": "+25", "Color Phase": "+3" },
        "colorDepth": { "R": "+3", "G": "+7", "B": "0", "C": "0", "M": "+5", "Y": "+3" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#FFD54F", "coords": { "x": -6.5, "y": 7.7 }
    },
    {
        "id": "berlin-tone",
        "name": { "vi": "13. Bảng màu Berlin", "en": "13. Berlin Tone" },
        "description": { "vi": "Lấy cảm hứng từ màu sắc đặc trưng của máy ảnh Leica, với tông màu ấm và dễ chịu.", "en": "Inspired by the characteristic colors of Leica cameras, with warm and pleasant tones." },
        "type": "color", "contrast": "medium", "saturation": "low",
        "whiteBalance": "7000K, B5-M0.25",
        "settings": { "Black level": "-9", "Gamma": "Still", "Black Gamma": "Middle +7", "Knee": "Manual 75% +4", "Color Mode": "Still", "Saturation": "+6", "Color Phase": "+2" },
        "colorDepth": { "R": "+3", "G": "+7", "B": "+3", "C": "-5", "M": "+3", "Y": "-2" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#8D6E63", "coords": { "x": 1.5, "y": 2.5 }
    },
    {
        "id": "indochine-sunshine",
        "name": { "vi": "14. Nắng Vàng Đông Dương", "en": "14. Indochine Sunshine" },
        "description": { "vi": "Màu vàng rực rỡ và bão hòa cao, nắm bắt năng lượng.", "en": "Vibrant yellow, high saturation, captures energy." },
        "type": "color", "contrast": "high", "saturation": "high",
        "whiteBalance": "4300K, A3.5",
        "settings": { "Black level": "-10", "Gamma": "Cine1", "Black Gamma": "Middle +7", "Knee": "Auto", "Color Mode": "S-Gamut3.Cine", "Saturation": "+32", "Color Phase": "+5" },
        "colorDepth": { "R": "-3", "G": "+4", "B": "+3", "C": "+3", "M": "-2", "Y": "+2" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#FFD54F", "coords": { "x": 7.2, "y": 7.5 }
    },
    {
        "id": "lemon-peel",
        "name": { "vi": "15. Vỏ Chanh Vàng", "en": "15. Lemon Peel" },
        "description": { "vi": "Tông màu vàng chanh tươi sáng, hơi gắt, tràn đầy năng lượng.", "en": "Bright and slightly sharp lemon-yellow tone, energetic." },
        "type": "color", "contrast": "low", "saturation": "medium",
        "whiteBalance": "4200K, A7-G0.25",
        "settings": { "Black level": "+4", "Gamma": "Still", "Black Gamma": "Wide +7", "Knee": "Manual 75% +5", "Color Mode": "Still", "Saturation": "+20", "Color Phase": "-4" },
        "colorDepth": { "R": "-1", "G": "+7", "B": "0", "C": "-3", "M": "-4", "Y": "-2" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#FDD835", "coords": { "x": -5.5, "y": 5.0 }
    },
    {
        "id": "faded-chrome",
        "name": { "vi": "16. Nhạt Phai", "en": "16. Faded Chrome" },
        "description": { "vi": "Vùng tối được nâng tạo hiệu ứng bạc màu, hoài cổ, nhẹ nhàng.", "en": "Lifted shadows create a faded, nostalgic, and gentle effect." },
        "type": "bw", "contrast": "low", "saturation": "low",
        "whiteBalance": "AWB",
        "settings": { "Black level": "+3", "Gamma": "Still", "Black Gamma": "Middle -7", "Knee": "Manual 75% +2", "Color Mode": "Black & White", "Saturation": "0", "Color Phase": "0" },
        "colorDepth": { "R": "+5", "G": "+5", "B": "+7", "C": "+2", "M": "+7", "Y": "-4" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#E0E0E0", "coords": { "x": -7.8, "y": -5.5 }
    },
    {
        "id": "golden-era",
        "name": { "vi": "17. Ký Ức Vàng Son", "en": "17. Golden Era" },
        "description": { "vi": "Ánh vàng ấm áp đặc trưng, gợi nhớ thập niên 90.", "en": "A distinctive warm golden glow, reminiscent of the 90s." },
        "type": "color", "contrast": "medium", "saturation": "high",
        "whiteBalance": "8500K, B3-M1.75",
        "settings": { "Black level": "-5", "Gamma": "Movie", "Black Gamma": "Wide +7", "Knee": "Manual 75% +4", "Color Mode": "S-Gamut3/S-Gamut", "Saturation": "+32", "Color Phase": "+6" },
        "colorDepth": { "R": "-2", "G": "0", "B": "+5", "C": "+5", "M": "0", "Y": "+4" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#FFB74D", "coords": { "x": -0.5, "y": 7.9 }
    },
    {
        "id": "phoenix-fire",
        "name": { "vi": "18. Lửa Phượng Hoàng", "en": "18. Phoenix Fire" },
        "description": { "vi": "Màu sắc rực rỡ, đỏ và vàng, tương phản cao, mạnh mẽ.", "en": "Vibrant red and yellow, high contrast, powerful." },
        "type": "color", "contrast": "high", "saturation": "high",
        "whiteBalance": "8500K, B3.5-G1",
        "settings": { "Black level": "-15", "Gamma": "Still", "Black Gamma": "Wide -7", "Knee": "Manual 105% +5", "Color Mode": "S-Cinetone", "Saturation": "+32", "Color Phase": "+1" },
        "colorDepth": { "R": "+5", "G": "+7", "B": "+2", "C": "+5", "M": "+5", "Y": "+5" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#F44336", "coords": { "x": 9.6, "y": 9.2 }
    },
    {
        "id": "faded-rose",
        "name": { "vi": "19. Cánh Hồng Phai", "en": "19. Faded Rose" },
        "description": { "vi": "Tông màu hồng và đỏ tươi tắn, mềm mại, lý tưởng cho chân dung.", "en": "Fresh pink and red tone, soft, ideal for portraits." },
        "type": "color", "contrast": "low", "saturation": "high",
        "whiteBalance": "4600K, A7-M0.5",
        "settings": { "Black level": "+6", "Gamma": "Still", "Black Gamma": "Wide -7", "Knee": "Manual 75% +4", "Color Mode": "Pro", "Saturation": "+25", "Color Phase": "+2" },
        "colorDepth": { "R": "-1", "G": "0", "B": "0", "C": "-3", "M": "+5", "Y": "-1" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#E91E63", "coords": { "x": -7.0, "y": 7.2 }
    },
    {
        "id": "crisp-air",
        "name": { "vi": "20. Không Khí Trong Lành", "en": "20. Crisp Air" },
        "description": { "vi": "Tông xanh da trời và trắng sáng, tạo cảm giác trong lành.", "en": "Sky-blue and bright white tone, creating a fresh feeling." },
        "type": "color", "contrast": "medium", "saturation": "high",
        "whiteBalance": "AWB, B2-G2",
        "settings": { "Black level": "-5", "Gamma": "Cine4", "Black Gamma": "Wide +7", "Knee": "Auto", "Color Mode": "Still", "Saturation": "+30", "Color Phase": "+2" },
        "colorDepth": { "R": "+2", "G": "+7", "B": "+7", "C": "-5", "M": "-3", "Y": "-4" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#29B6F6", "coords": { "x": 3.5, "y": 2.0 }
    },
    {
        "id": "cotton-candy",
        "name": { "vi": "21. Kẹo Bông Gòn", "en": "21. Cotton Candy" },
        "description": { "vi": "Màu sắc rực rỡ, tươi sáng như kẹo, mang lại cảm giác vui tươi.", "en": "Bright, vibrant colors like candy, providing a cheerful feeling." },
        "type": "color", "contrast": "medium", "saturation": "high",
        "whiteBalance": "AWB, A2-M0.75",
        "settings": { "Black level": "-4", "Gamma": "Cine4", "Black Gamma": "Wide +7", "Knee": "Auto", "Color Mode": "Still", "Saturation": "+27", "Color Phase": "-3" },
        "colorDepth": { "R": "+2", "G": "+7", "B": "+1", "C": "+4", "M": "+2", "Y": "-5" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#EC407A", "coords": { "x": 6.0, "y": 9.0 }
    },
    {
        "id": "faded-sunshine",
        "name": { "vi": "22. Nắng Vàng Phai", "en": "22. Faded Sunshine" },
        "description": { "vi": "Tông màu ấm, ngả vàng, bão hòa thấp, tạo cảm giác hoài cổ.", "en": "Warm, yellowish tone, low saturation, creates a nostalgic feel." },
        "type": "color", "contrast": "low", "saturation": "medium",
        "whiteBalance": "4200K, A7-M2",
        "settings": { "Black level": "+5", "Gamma": "Still", "Black Gamma": "Narrow -7", "Knee": "Manual 75% +5", "Color Mode": "Still", "Saturation": "+14", "Color Phase": "-3" },
        "colorDepth": { "R": "-3", "G": "+7", "B": "-3", "C": "-7", "M": "-4", "Y": "-1" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#FFF176", "coords": { "x": -5.0, "y": 6.5 }
    },
    {
        "id": "graphite-sketch",
        "name": { "vi": "23. Than Chì", "en": "23. Graphite Sketch" },
        "description": { "vi": "Tương phản mạnh, chi tiết sắc nét, như bút than chì.", "en": "Strong contrast, sharp details, like a graphite sketch." },
        "type": "bw", "contrast": "high", "saturation": "low",
        "whiteBalance": "AWB",
        "settings": { "Black level": "-11", "Gamma": "Still", "Black Gamma": "Middle -3", "Knee": "Manual 85% +5", "Color Mode": "Black & White", "Saturation": "+15", "Color Phase": "0" },
        "colorDepth": { "R": "-1", "G": "+1", "B": "-1", "C": "+3", "M": "-3", "Y": "-1" },
           "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#9E9E9E", "coords": { "x": 8.2, "y": -7.5 }
    },
    {
        "id": "ember-glow",
        "name": { "vi": "24. Lửa Chiều Tàn", "en": "24. Ember Glow" },
        "description": { "vi": "Tái tạo sắc cam rực của lửa và vùng tối sâu thẳm.", "en": "Vibrant orange of fire and deep shadows." },
        "type": "color", "contrast": "high", "saturation": "high",
        "whiteBalance": "4000K, A5-M0.5",
        "settings": { "Black level": "-15", "Gamma": "Still", "Black Gamma": "Wide -7", "Knee": "Manual 92.5% +5", "Color Mode": "S-Gamut3.Cine", "Saturation": "+27", "Color Phase": "+6" },
        "colorDepth": { "R": "+5", "G": "+7", "B": "+5", "C": "+5", "M": "+2", "Y": "+1" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#E57373", "coords": { "x": 7.8, "y": 8.1 }
    },
    {
        "id": "daydream",
        "name": { "vi": "25. Giấc Mơ Trưa", "en": "25. Daydream" },
        "description": { "vi": "Màu sắc ấm áp, mềm mại, mang lại cảm giác mơ màng, lãng mạn.", "en": "Warm, soft colors, providing a dreamy, romantic feeling." },
        "type": "color", "contrast": "medium", "saturation": "high",
        "whiteBalance": "4500K, A7",
        "settings": { "Black level": "-5", "Gamma": "Cine1 or Cine4", "Black Gamma": "Middle -7", "Knee": "Auto", "Color Mode": "Still", "Saturation": "+25", "Color Phase": "+3" },
        "colorDepth": { "R": "-2", "G": "+5", "B": "-2", "C": "+3", "M": "+3", "Y": "-1" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#FFCC80", "coords": { "x": 3.0, "y": 8.5 }
    },
    {
        "id": "decisive-moment",
        "name": { "vi": "26. Khoảnh Khắc Quyết Định", "en": "26. Decisive Moment" },
        "description": { "vi": "Tương phản cao, phù hợp nhiếp ảnh tài liệu, nhấn mạnh cảm xúc.", "en": "High contrast for documentary, emphasizing emotion." },
        "type": "bw", "contrast": "high", "saturation": "low",
        "whiteBalance": "AWB, A3",
        "settings": { "Black level": "-12", "Gamma": "Movie", "Black Gamma": "Middle -5", "Knee": "Manual 75% +4", "Color Mode": "Black & White", "Saturation": "0", "Color Phase": "0" },
        "colorDepth": { "R": "0", "G": "+3", "B": "0", "C": "+2", "M": "+3", "Y": "0" },
        "detailSettings": { "Level": "0", "Mode": "Manual", "V/H Balance": "+2", "B/W Balance": "Type 3", "Limit": "7", "Crispening": "7", "Hi-Light Detail": "4" },
        "personalityColor": "#90A4AE", "coords": { "x": 7.6, "y": -1.8 }
    },
    {
        "id": "vibrant-vibe",
        "name": { "vi": "27. Sắc Màu Cực Đại", "en": "27. Vibrant Vibe" },
        "description": { "vi": "Độ bão hòa cao và màu sắc sống động cho những bức ảnh đầy năng lượng.", "en": "High saturation and vivid colors for energetic photos." },
        "type": "color", "contrast": "medium", "saturation": "high",
        "whiteBalance": "4500K, A7-M0.75",
        "settings": { "Black level": "+2", "Gamma": "Movie", "Black Gamma": "Wide -7", "Knee": "Manual 75% +4", "Color Mode": "Still", "Saturation": "+8", "Color Phase": "-1" },
        "colorDepth": { "R": "-4", "G": "+7", "B": "-3", "C": "-5", "M": "+5", "Y": "+4" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#EF5350", "coords": { "x": 1.0, "y": 7.0 }
    },
    {
        "id": "seventies-song",
        "name": { "vi": "28. Giai Điệu Thập Niên 70", "en": "28. Seventies Song" },
        "description": { "vi": "Màu sắc ấm áp, vùng tối mềm mại, mang lại cảm giác của những năm 70.", "en": "Warm colors, soft shadows, bringing a 70s vibe." },
        "type": "color", "contrast": "low", "saturation": "low",
        "whiteBalance": "4300K, A7-M0.25",
        "settings": { "Black level": "+2", "Gamma": "Movie", "Black Gamma": "Middle +2", "Knee": "Manual 75% +4", "Color Mode": "Still", "Saturation": "+3", "Color Phase": "+1" },
        "colorDepth": { "R": "+1", "G": "+7", "B": "+2", "C": "+2", "M": "+4", "Y": "+2" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#FFAB91", "coords": { "x": -5.2, "y": -2.1 }
    },
    {
        "id": "heritage",
        "name": { "vi": "29. Di Sản", "en": "29. Heritage" },
        "description": { "vi": "Tái tạo tông màu độc đáo của dòng phim Kodachrome huyền thoại.", "en": "Recreates the unique color tones of the legendary Kodachrome film." },
        "type": "color", "contrast": "medium", "saturation": "medium",
        "whiteBalance": "4200K, A7-M0.5",
        "settings": { "Black level": "+8", "Gamma": "Still", "Black Gamma": "Middle -7", "Knee": "Auto", "Color Mode": "Still", "Saturation": "+12", "Color Phase": "-2" },
        "colorDepth": { "R": "+2", "G": "+7", "B": "+4", "C": "+4", "M": "+5", "Y": "+3" },
           "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#F44336", "coords": { "x": 3.3, "y": 6.1 }
    },
    {
        "id": "crystal-clear",
        "name": { "vi": "30. Lam Ngọc Trong Trẻo", "en": "30. Crystal Clear" },
        "description": { "vi": "Màu sắc trong trẻo và sạch sẽ, đặc trưng của dòng phim dương bản.", "en": "Clean and clear colors, characteristic of slide films." },
        "type": "color", "contrast": "medium", "saturation": "medium",
        "whiteBalance": "3600K, A7-M1",
        "settings": { "Black level": "-4", "Gamma": "Movie", "Black Gamma": "Middle -7", "Knee": "Manual 80% +4", "Color Mode": "Still", "Saturation": "+10", "Color Phase": "-1" },
        "colorDepth": { "R": "+3", "G": "+5", "B": "-4", "C": "+2", "M": "+6", "Y": "+5" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#4FC3F7", "coords": { "x": 2.8, "y": -3.5 }
    },
    {
        "id": "infrared-world",
        "name": { "vi": "31. Thế Giới Hồng Ngoại", "en": "31. Infrared World" },
        "description": { "vi": "Tái tạo hiệu ứng phim hồng ngoại, tán lá trắng, bầu trời đen.", "en": "Recreates infrared film effect, white foliage, dark skies." },
        "type": "bw", "contrast": "high", "saturation": "high",
        "whiteBalance": "AWB, A3",
        "settings": { "Black level": "-10", "Gamma": "Still", "Black Gamma": "Wide -7", "Knee": "Manual 75% +4", "Color Mode": "Black & White", "Saturation": "+32", "Color Phase": "+4" },
        "colorDepth": { "R": "-7", "G": "-7", "B": "+7", "C": "+7", "M": "+7", "Y": "-5" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#FFFFFF", "coords": { "x": 8.9, "y": 0.5 }
    },
    {
        "id": "tropical-teal",
        "name": { "vi": "32. Biển Xanh Nhiệt Đới", "en": "32. Tropical Teal" },
        "description": { "vi": "Bão hòa cao, màu sắc rực rỡ, đặc biệt là xanh dương và xanh lá.", "en": "High saturation, vibrant colors, especially blues and greens." },
        "type": "color", "contrast": "high", "saturation": "high",
        "whiteBalance": "7000K, B2-M1",
        "settings": { "Black level": "-10", "Gamma": "Movie", "Black Gamma": "Wide +7", "Knee": "Manual 75% +4", "Color Mode": "Movie", "Saturation": "+25", "Color Phase": "+2" },
        "colorDepth": { "R": "+2", "G": "+7", "B": "+7", "C": "+7", "M": "+7", "Y": "+2" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#0091EA", "coords": { "x": 9.0, "y": 2.0 }
    },
    {
        "id": "kyoto-greens",
        "name": { "vi": "33. Phong Cảnh Kyoto", "en": "33. Kyoto Greens" },
        "description": { "vi": "Độ bão hòa màu cao, đặc biệt là màu xanh lá và xanh dương, lý tưởng cho phong cảnh.", "en": "High color saturation, especially greens and blues, ideal for landscapes." },
        "type": "color", "contrast": "medium", "saturation": "high",
        "whiteBalance": "3900K, A7-M0.25",
        "settings": { "Black level": "-8", "Gamma": "Still", "Black Gamma": "Middle -7", "Knee": "Manual 75% +4", "Color Mode": "Still", "Saturation": "+10", "Color Phase": "-1" },
        "colorDepth": { "R": "+2", "G": "+7", "B": "+1", "C": "+2", "M": "-7", "Y": "0" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#388E3C", "coords": { "x": 2.0, "y": -5.0 }
    },
    {
        "id": "neutral-canvas",
        "name": { "vi": "34. Tông Màu Trung Tính", "en": "34. Neutral Canvas" },
        "description": { "vi": "Tông màu trung tính, độ tương phản thấp, lý tưởng cho việc hậu kỳ.", "en": "Neutral tones, low contrast, ideal for post-processing." },
        "type": "color", "contrast": "low", "saturation": "low",
        "whiteBalance": "3900K, A7",
        "settings": { "Black level": "+2", "Gamma": "Still", "Black Gamma": "Wide -5", "Knee": "Manual 75% +3", "Color Mode": "Still", "Saturation": "-6", "Color Phase": "+1" },
        "colorDepth": { "R": "-2", "G": "+7", "B": "+3", "C": "-5", "M": "-4", "Y": "+2" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#CFD8DC", "coords": { "x": -7.3, "y": -8.8 }
    },
    {
        "id": "martian-red",
        "name": { "vi": "35. Lửa Sao Hỏa", "en": "35. Martian Red" },
        "description": { "vi": "Tông màu đỏ và cam bao trùm, tạo hiệu ứng độc đáo, nghệ thuật.", "en": "Dominant red and orange tone, creating a unique, artistic effect." },
        "type": "color", "contrast": "low", "saturation": "low",
        "whiteBalance": ">9900K, B3-G2",
        "notes": { "vi": "Đặt WB tùy chỉnh bằng thẻ màu Teal.", "en": "Set with Custom WB and a Teal Card." },
        "settings": { "Black level": "+5", "Gamma": "Still", "Black Gamma": "Middle -7", "Knee": "Manual 75% +4", "Color Mode": "ITU709Matrix", "Saturation": "+7", "Color Phase": "-1" },
        "colorDepth": { "R": "+5", "G": "+7", "B": "+5", "C": "+5", "M": "-7", "Y": "-2" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#FF5722", "coords": { "x": -8.0, "y": 6.8 }
    },
    {
        "id": "serene-sky",
        "name": { "vi": "36. Bầu Trời Tĩnh Lặng", "en": "36. Serene Sky" },
        "description": { "vi": "Phiên bản Kodachrome với tông màu xanh da trời nổi bật và cân bằng trắng ấm.", "en": "A Kodachrome version with prominent sky blue tones and warm white balance." },
        "type": "color", "contrast": "medium", "saturation": "medium",
        "whiteBalance": "4000K, A7-M2",
        "settings": { "Black level": "+6", "Gamma": "S-Cinetone", "Black Gamma": "Narrow -7", "Knee": "Auto", "Color Mode": "S-Cinetone", "Saturation": "+14", "Color Phase": "-3" },
        "colorDepth": { "R": "0", "G": "+7", "B": "+5", "C": "-2", "M": "+3", "Y": "+2" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#B71C1C", "coords": { "x": 3.8, "y": 5.9 }
    },
    {
        "id": "teal-nostalgia",
        "name": { "vi": "37. Hoài Niệm Xanh", "en": "37. Teal Nostalgia" },
        "description": { "vi": "Tông màu xanh lá và đỏ được xử lý đặc biệt, tạo cảm giác hoài cổ.", "en": "Specially treated green and red tones create a nostalgic feel." },
        "type": "color", "contrast": "medium", "saturation": "medium",
        "whiteBalance": "9900K, B6-M0.5",
        "settings": { "Black level": "+4", "Gamma": "Still", "Black Gamma": "Middle -7", "Knee": "Manual 75% +5", "Color Mode": "S-Cinetone/Still", "Saturation": "+5", "Color Phase": "+1" },
        "colorDepth": { "R": "+2", "G": "+7", "B": "-4", "C": "-4", "M": "-5", "Y": "+3" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#80CBC4", "coords": { "x": 1.8, "y": -4.2 }
    },
    {
        "id": "da-lat-mist",
        "name": { "vi": "38. Đà Lạt trong sương", "en": "38. Da Lat Mist" },
        "description": { "vi": "Màu lam lạnh và tương phản cao, gợi cảm giác mờ ảo.", "en": "Cool blue tone with high contrast, evoking a misty feeling." },
        "type": "color", "contrast": "high", "saturation": "medium",
        "whiteBalance": "8000K, B2-M2",
        "notes": { "vi": "Chế độ ban đêm: 2900K, A5-G1", "en": "Nighttime: 2900K, A5-G1" },
        "settings": { "Black level": "-15", "Gamma": "Cine3", "Black Gamma": "Wide +7", "Knee": "Manual 85% +4", "Color Mode": "S-Gamut3.Cine", "Saturation": "+20", "Color Phase": "+7" },
        "colorDepth": { "R": "-5", "G": "-1", "B": "+3", "C": "+4", "M": "+5", "Y": "+2" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#64B5F6", "coords": { "x": 8.5, "y": 1.2 }
    },
    {
        "id": "maximum-drama",
        "name": { "vi": "39. Kịch Tính Cực Đại", "en": "39. Maximum Drama" },
        "description": { "vi": "Tương phản, bão hòa tối đa, tạo cái nhìn đen trắng kịch tính.", "en": "Maximum contrast and saturation, creating a dramatic B&W look." },
        "type": "bw", "contrast": "high", "saturation": "high",
        "whiteBalance": "5500K",
        "settings": { "Black level": "-15", "Gamma": "Still", "Black Gamma": "Wide -7", "Knee": "Manual 75% +5", "Color Mode": "Black & White", "Saturation": "+32", "Color Phase": "0" },
        "colorDepth": { "R": "+4", "G": "+7", "B": "+7", "C": "+7", "M": "+7", "Y": "+7" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#212121", "coords": { "x": 9.8, "y": -9.8 }
    },
    {
        "id": "meadow-muse",
        "name": { "vi": "40. Đồng Cỏ Mộc Châu", "en": "40. Meadow Muse" },
        "description": { "vi": "Tôn vinh sắc xanh tươi mát của cỏ cây dưới nắng hạ.", "en": "Honors the fresh green tones of plants under the summer sun." },
        "type": "color", "contrast": "low", "saturation": "low",
        "whiteBalance": "3700K, A7-M0.5",
        "settings": { "Black level": "0", "Gamma": "Movie", "Black Gamma": "Wide +7", "Knee": "Manual 80% +4", "Color Mode": "Still", "Saturation": "+11", "Color Phase": "-3" },
        "colorDepth": { "R": "-4", "G": "+7", "B": "-3", "C": "-3", "M": "-5", "Y": "-3" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#81C784", "coords": { "x": -7.1, "y": -8.2 }
    },
    {
        "id": "prismatic",
        "name": { "vi": "41. Lăng Kính Huyền Ảo", "en": "41. Prismatic" },
        "description": { "vi": "Màu sắc bão hòa cao, độc đáo, tạo cái nhìn siêu thực.", "en": "Highly saturated, unique colors, creating a surreal look." },
        "type": "color", "contrast": "medium", "saturation": "high",
        "whiteBalance": "AWB, A3",
        "settings": { "Black level": "-5", "Gamma": "Cine1-4", "Black Gamma": "Wide +7", "Knee": "Manual 80% +4", "Color Mode": "Pro", "Saturation": "+25", "Color Phase": "0" },
        "colorDepth": { "R": "+2", "G": "+7", "B": "+7", "C": "+7", "M": "+5", "Y": "+4" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#9C27B0", "coords": { "x": 4.5, "y": 9.5 }
    },
    {
        "id": "classic-cadence",
        "name": { "vi": "42. Giai Điệu Cổ Điển", "en": "42. Classic Cadence" },
        "description": { "vi": "Tông màu xanh và đỏ được nhấn mạnh, tạo cảm giác cổ điển.", "en": "Emphasized blue and red tones, creating a classic feel." },
        "type": "color", "contrast": "high", "saturation": "medium",
        "whiteBalance": "4700K, A7-G0.5",
        "settings": { "Black level": "-15", "Gamma": "Cine1", "Black Gamma": "Wide -7", "Knee": "Manual 82.5% +4", "Color Mode": "S-Cinetone/Still", "Saturation": "+10", "Color Phase": "+2" },
        "colorDepth": { "R": "+2", "G": "+7", "B": "-7", "C": "-6", "M": "+3", "Y": "+3" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#C62828", "coords": { "x": 7.4, "y": 5.2 }
    },
    {
        "id": "soft-peach",
        "name": { "vi": "43. Phấn Hồng Dịu Dàng", "en": "43. Soft Peach" },
        "description": { "vi": "Tông màu mềm mại và tông da đẹp, phù hợp cho chụp ảnh thời trang và chân dung.", "en": "Soft tones and beautiful skin tones, suitable for fashion and portraits." },
        "type": "color", "contrast": "low", "saturation": "low",
        "whiteBalance": "4100K, A7-M0.25",
        "settings": { "Black level": "-8", "Gamma": "Movie", "Black Gamma": "Middle -7", "Knee": "Manual 75% +4", "Color Mode": "Still", "Saturation": "+5", "Color Phase": "0" },
        "colorDepth": { "R": "0", "G": "+2", "B": "+3", "C": "+2", "M": "-7", "Y": "0" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#FFE0B2", "coords": { "x": -5.8, "y": -3.2 }
    },
    {
        "id": "stone-gray",
        "name": { "vi": "44. Đá Cuội", "en": "44. Stone Gray" },
        "description": { "vi": "Dải tông màu xám phong phú với độ chuyển mượt mà.", "en": "Rich range of gray tones with smooth transitions." },
        "type": "bw", "contrast": "high", "saturation": "low",
        "whiteBalance": "AWB",
        "settings": { "Black level": "-10", "Gamma": "Still", "Black Gamma": "Middle -3", "Knee": "Manual 85% +4", "Color Mode": "Black & White", "Saturation": "+15", "Color Phase": "0" },
        "colorDepth": { "R": "-4", "G": "+1", "B": "+3", "C": "+3", "M": "-4", "Y": "-1" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#BDBDBD", "coords": { "x": 7.1, "y": -3.1 }
    },
    {
        "id": "cosmic-mono",
        "name": { "vi": "45. Vũ Trụ Đơn Sắc", "en": "45. Cosmic Mono" },
        "description": { "vi": "Vùng tối sâu, tương phản mạnh, mang lại cái nhìn kịch tính.", "en": "Deep blacks, strong contrast, for a dramatic look." },
        "type": "bw", "contrast": "high", "saturation": "low",
        "whiteBalance": "AWB",
        "settings": { "Black level": "-8", "Gamma": "Cine3", "Black Gamma": "Narrow -7", "Knee": "Manual 75% +3", "Color Mode": "Black & White", "Saturation": "0", "Color Phase": "-2" },
        "colorDepth": { "R": "-4", "G": "+3", "B": "+7", "C": "0", "M": "+7", "Y": "-5" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#616161", "coords": { "x": 8.3, "y": -4.0 }
    },
    {
        "id": "magic-spice",
        "name": { "vi": "46. Gia Vị Ma Thuật", "en": "46. Magic Spice" },
        "description": { "vi": "Tông màu ấm, ngả vàng đỏ, mang lại cảm giác ấm cúng.", "en": "Warm tone, yellow-red cast, providing a cozy feeling." },
        "type": "color", "contrast": "high", "saturation": "medium",
        "whiteBalance": "7000K, B4-M1.25",
        "settings": { "Black level": "-12", "Gamma": "Movie", "Black Gamma": "Middle -7", "Knee": "Manual 75% +5", "Color Mode": "Still", "Saturation": "+17", "Color Phase": "-1" },
        "colorDepth": { "R": "-4", "G": "+7", "B": "-3", "C": "-3", "M": "-5", "Y": "+4" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#BF360C", "coords": { "x": 6.8, "y": 6.8 }
    },
    {
        "id": "sahara-heat",
        "name": { "vi": "47. Sa Mạc Sahara", "en": "47. Sahara Heat" },
        "description": { "vi": "Tông màu vàng cam bão hòa, tái hiện cái nóng của sa mạc.", "en": "Saturated yellow-orange tone, recreating desert heat." },
        "type": "color", "contrast": "high", "saturation": "high",
        "whiteBalance": "4500K, A4-G4",
        "settings": { "Black level": "-12", "Gamma": "Cine4", "Black Gamma": "Middle -7", "Knee": "Manual 75% +4", "Color Mode": "S-Gamut3", "Saturation": "+32", "Color Phase": "+7" },
        "colorDepth": { "R": "+4", "G": "+5", "B": "0", "C": "0", "M": "-3", "Y": "+7" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#FF9800", "coords": { "x": 9.4, "y": 8.9 }
    },
    {
        "id": "timeless-tone",
        "name": { "vi": "48. Nét Cổ Điển", "en": "48. Timeless Tone" },
        "description": { "vi": "Tông màu da tự nhiên và độ bão hòa dịu nhẹ, một lựa chọn kinh điển.", "en": "Natural skin tones and mild saturation, a classic choice." },
        "type": "color", "contrast": "low", "saturation": "medium",
        "whiteBalance": "3900K, A7-M0.75",
        "settings": { "Black level": "+4", "Gamma": "Movie", "Black Gamma": "Narrow -7", "Knee": "Manual 80% +4", "Color Mode": "Still", "Saturation": "+14", "Color Phase": "-2" },
        "colorDepth": { "R": "-3", "G": "+5", "B": "-3", "C": "-3", "M": "-5", "Y": "-2" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#A1887F", "coords": { "x": -8.1, "y": 4.5 }
    },
    {
        "id": "saigon-sunset",
        "name": { "vi": "49. Hoàng Hôn Sài Gòn", "en": "49. Saigon Sunset" },
        "description": { "vi": "Sắc đỏ và cam đậm, bão hòa cao, tái hiện hoàng hôn.", "en": "Rich red and orange hues, high saturation, recreating sunsets." },
        "type": "color", "contrast": "low", "saturation": "high",
        "whiteBalance": "5000K, A2-M1",
        "settings": { "Black level": "+6", "Gamma": "Still", "Black Gamma": "Wide -7", "Knee": "Manual 75% +4", "Color Mode": "S-Gamut3.Cine", "Saturation": "+25", "Color Phase": "+2" },
        "colorDepth": { "R": "-3", "G": "+7", "B": "+5", "C": "+5", "M": "+5", "Y": "+1" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#FF8A65", "coords": { "x": -8.3, "y": 8.8 }
    },
    {
        "id": "gritty-reportage",
        "name": { "vi": "50. Phóng Sự Hạt Mịn", "en": "50. Gritty Reportage" },
        "description": { "vi": "Tái tạo cấu trúc hạt phim đặc trưng cho ảnh tài liệu thiếu sáng.", "en": "Recreates film grain structure for low-light documentary." },
        "type": "bw", "contrast": "medium", "saturation": "low",
        "whiteBalance": "AWB",
        "settings": { "Black level": "-11", "Gamma": "Cine4", "Black Gamma": "Wide +7", "Knee": "Manual 82.5% +0", "Color Mode": "Black & White", "Saturation": "0", "Color Phase": "-2" },
        "colorDepth": { "R": "+3", "G": "+2", "B": "+7", "C": "+7", "M": "+4", "Y": "-5" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#9E9E9E", "coords": { "x": 0.5, "y": -7.0 }
    },
    {
        "id": "emerald-punch",
        "name": { "vi": "51. Lục Bảo Sắc Nét", "en": "51. Emerald Punch" },
        "description": { "vi": "Một biến thể của Provia với độ tương phản cao hơn và màu sắc mạnh mẽ hơn.", "en": "A variation of Provia with higher contrast and stronger colors." },
        "type": "color", "contrast": "high", "saturation": "low",
        "whiteBalance": "4000K, A6.5-M1.75",
        "settings": { "Black level": "-10", "Gamma": "Movie", "Black Gamma": "Middle -7", "Knee": "Manual 80% +3", "Color Mode": "Still", "Saturation": "+5", "Color Phase": "-2" },
        "colorDepth": { "R": "-2", "G": "+7", "B": "+7", "C": "+5", "M": "+3", "Y": "+1" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#689F38", "coords": { "x": 7.2, "y": -6.8 }
    },
    {
        "id": "moonlit-nocturne",
        "name": { "vi": "52. Dạ Khúc Ánh Trăng", "en": "52. Moonlit Nocturne" },
        "description": { "vi": "Màu sắc lạnh, ám xanh tím, tĩnh lặng và bí ẩn của đêm trăng.", "en": "Cool colors, blue-purple cast, quiet and mysterious moonlight." },
        "type": "color", "contrast": "medium", "saturation": "low",
        "whiteBalance": "8600K, B2.5-M2",
        "settings": { "Black level": "-5", "Gamma": "Cine4", "Black Gamma": "Middle -7", "Knee": "Manual 82.5% +4", "Color Mode": "Still", "Saturation": "-8", "Color Phase": "+1" },
        "colorDepth": { "R": "-6", "G": "+7", "B": "+1", "C": "+3", "M": "+7", "Y": "+5" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#7986CB", "coords": { "x": -3.0, "y": 1.5 }
    },
    {
        "id": "true-life",
        "name": { "vi": "53. Đời Thường Chân Thực", "en": "53. True Life" },
        "description": { "vi": "Tái tạo màu sắc chân thực với độ bão hòa vừa phải.", "en": "Reproduces true-to-life colors with moderate saturation." },
        "type": "color", "contrast": "low", "saturation": "medium",
        "whiteBalance": "3900K, A7",
        "settings": { "Black level": "+2", "Gamma": "Still", "Black Gamma": "Wide +2", "Knee": "Auto", "Color Mode": "Still", "Saturation": "+10", "Color Phase": "-1" },
        "colorDepth": { "R": "-2", "G": "+7", "B": "+4", "C": "+2", "M": "-4", "Y": "+2" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#BDBDBD", "coords": { "x": -4.5, "y": 3.5 }
    },
    {
        "id": "pencil-sketch",
        "name": { "vi": "54. Phác Họa Chì", "en": "54. Pencil Sketch" },
        "description": { "vi": "Độ sắc nét cao, hạt phim mịn, tạo ảnh đen trắng chi tiết, sạch sẽ.", "en": "High sharpness, fine grain, creating detailed, clean B&W images." },
        "type": "bw", "contrast": "high", "saturation": "low",
        "whiteBalance": "AWB, B3-G0.25",
        "settings": { "Black level": "-12", "Gamma": "Still", "Black Gamma": "Middle -7", "Knee": "Manual 82% +5", "Color Mode": "Black & White", "Saturation": "0", "Color Phase": "0" },
        "colorDepth": { "R": "-1", "G": "-7", "B": "+7", "C": "+7", "M": "+7", "Y": "-4" },
           "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#BDBDBD", "coords": { "x": 7.9, "y": -9.0 }
    },
    {
        "id": "melancholy-mood",
        "name": { "vi": "55. Điệp Vụ U Sầu", "en": "55. Melancholy Mood" },
        "description": { "vi": "Màu sắc trầm, bão hòa rất thấp, tạo cảm giác điện ảnh.", "en": "Subdued colors, very low saturation for a cinematic feel." },
        "type": "color", "contrast": "low", "saturation": "low",
        "whiteBalance": "4000K, A7-M0.25",
        "settings": { "Black level": "+7", "Gamma": "Movie", "Black Gamma": "Wide -5", "Knee": "Manual 75% +4", "Color Mode": "Still", "Saturation": "-5", "Color Phase": "+1" },
        "colorDepth": { "R": "-3", "G": "+7", "B": "-2", "C": "+6", "M": "+4", "Y": "+2" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#A1887F", "coords": { "x": -9.2, "y": -9.1 }
    },
    {
        "id": "amethyst",
        "name": { "vi": "56. Thạch Anh Tím", "en": "56. Amethyst" },
        "description": { "vi": "Độ bão hòa và tương phản cao, tạo màu sắc sống động và chuẩn xác.", "en": "High saturation and contrast, creating vivid and accurate colors." },
        "type": "color", "contrast": "high", "saturation": "high",
        "whiteBalance": "3500K, A7-G0.5",
        "settings": { "Black level": "+1", "Gamma": "Still", "Black Gamma": "Middle -7", "Knee": "Manual 75% +4", "Color Mode": "S-Gamut3.Cine", "Saturation": "+32", "Color Phase": "+2" },
        "colorDepth": { "R": "+4", "G": "+1", "B": "+7", "C": "+1", "M": "+7", "Y": "+2" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#673AB7", "coords": { "x": 9.1, "y": 7.8 }
    },
    {
        "id": "blue-dream",
        "name": { "vi": "57. Giấc Mơ Lam", "en": "57. Blue Dream" },
        "description": { "vi": "Tông màu lạnh, ám xanh, bão hòa cao, siêu thực và mơ màng.", "en": "A cool, blue-tinted tone, high saturation, surreal and dreamy." },
        "type": "color", "contrast": "high", "saturation": "high",
        "whiteBalance": "4000K, A7-M1",
        "settings": { "Black level": "-5", "Gamma": "Cine4", "Black Gamma": "Wide -5", "Knee": "Manual 87.5% +3", "Color Mode": "S-Gamut3", "Saturation": "+32", "Color Phase": "+6" },
        "colorDepth": { "R": "-3", "G": "-2", "B": "+3", "C": "+7", "M": "-3", "Y": "-2" },
          "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#64B5F6", "coords": { "x": 8.0, "y": 9.0 }
    },
    {
        "id": "summer-verdure",
        "name": { "vi": "58. Xanh Mát Mùa Hè", "en": "58. Summer Verdure" },
        "description": { "vi": "Tái tạo màu sắc trung thực và sống động của phim Fuji Provia.", "en": "Recreates the true and vivid colors of Fuji Provia film." },
        "type": "color", "contrast": "low", "saturation": "low",
        "whiteBalance": "4000K, A7-M0.25",
        "settings": { "Black level": "+2", "Gamma": "Still", "Black Gamma": "Wide -7", "Knee": "Manual 75% +4", "Color Mode": "Still", "Saturation": "+2", "Color Phase": "+1" },
        "colorDepth": { "R": "+1", "G": "+7", "B": "0", "C": "+3", "M": "+2", "Y": "+1" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#81C784", "coords": { "x": -6.5, "y": -7.0 }
    },
    {
        "id": "pro-grade",
        "name": { "vi": "59. Sắc Màu Chuyên Nghiệp", "en": "59. Pro Grade" },
        "description": { "vi": "Màu sắc cân bằng, bão hòa tốt, cho kết quả chuyên nghiệp.", "en": "Well-balanced, saturated colors for professional results." },
        "type": "color", "contrast": "high", "saturation": "high",
        "whiteBalance": "3900K, A7-G0.5",
        "notes": { "vi": "Tắt Gamma Assist!", "en": "Turn Off Gamma Assist!" },
        "settings": { "Black level": "-15", "Gamma": "HLG3", "Black Gamma": "Wide 0", "Knee": "Auto 90% High", "Color Mode": "Rec.709", "Saturation": "+22", "Color Phase": "+1" },
        "colorDepth": { "R": "+2", "G": "+7", "B": "+3", "C": "-4", "M": "-2", "Y": "+5" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#03A9F4", "coords": { "x": 7.0, "y": 1.0 }
    },
    {
        "id": "morning-dew",
        "name": { "vi": "60. Nắng Ban Mai", "en": "60. Morning Dew" },
        "description": { "vi": "Màu sắc tinh tế và hạt mịn, hoàn hảo cho chụp chân dung ngoài trời.", "en": "Subtle colors and fine grain, perfect for outdoor portraits." },
        "type": "color", "contrast": "low", "saturation": "low",
        "whiteBalance": "4200K, A7-M1",
        "settings": { "Black level": "-10", "Gamma": "Movie", "Black Gamma": "Middle -7", "Knee": "Manual 75% +4", "Color Mode": "Still", "Saturation": "+7", "Color Phase": "+3" },
        "colorDepth": { "R": "-3", "G": "+7", "B": "-3", "C": "-3", "M": "-5", "Y": "+4" },
           "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#BCAAA4", "coords": { "x": -7.5, "y": -4.8 }
    },
    {
        "id": "noir-film",
        "name": { "vi": "61. Phim Đen Trắng Cũ", "en": "61. Noir Film" },
        "description": { "vi": "Tương phản cao, hạt phim rõ rệt, tái hiện cảm giác phim đen trắng cổ điển.", "en": "High contrast, distinct film grain, recreating the feel of classic B&W movies." },
        "type": "bw", "contrast": "high", "saturation": "high",
        "whiteBalance": "5500K",
        "settings": { "Black level": "-15", "Gamma": "Still", "Black Gamma": "Wide -7", "Knee": "Manual 75% +4", "Color Mode": "Black & White", "Saturation": "+32", "Color Phase": "0" },
        "colorDepth": { "R": "+2", "G": "+7", "B": "+1", "C": "+2", "M": "+7", "Y": "+1" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#757575", "coords": { "x": 8.8, "y": -5.0 }
    },
    {
        "id": "summer-vision",
        "name": { "vi": "62. Thị Giác Mùa Hè", "en": "62. Summer Vision" },
        "description": { "vi": "Màu sắc rực rỡ, ấm áp, hoàn hảo cho ánh sáng ban ngày.", "en": "Vibrant, warm colors, perfect for daylight." },
        "type": "color", "contrast": "high", "saturation": "high",
        "whiteBalance": "3300K, A7-G0.75",
        "settings": { "Black level": "-10", "Gamma": "Still", "Black Gamma": "Middle -7", "Knee": "Auto", "Color Mode": "Still", "Saturation": "+32", "Color Phase": "+2" },
        "colorDepth": { "R": "+4", "G": "+7", "B": "-6", "C": "+4", "M": "+6", "Y": "+5" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#FFEB3B", "coords": { "x": 8.6, "y": 9.3 }
    },
    {
        "id": "crimson-flashback",
        "name": { "vi": "63. Hồi Ức", "en": "63. Crimson Flashback" },
        "description": { "vi": "Một biến thể khác của Kodachrome với tông màu ấm và tương phản nhẹ.", "en": "Another variation of Kodachrome with warm tones and soft contrast." },
        "type": "color", "contrast": "high", "saturation": "medium",
        "whiteBalance": "4500K, A7-M0.5",
        "settings": { "Black level": "-10", "Gamma": "Cine1", "Black Gamma": "Middle +7", "Knee": "Manual 75% +4", "Color Mode": "Still", "Saturation": "+17", "Color Phase": "0" },
        "colorDepth": { "R": "+2", "G": "+6", "B": "+2", "C": "+7", "M": "+7", "Y": "+3" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#D32F2F", "coords": { "x": 7.0, "y": 6.8 }
    },
    {
        "id": "vintage-reel",
        "name": { "vi": "64. Thước Phim Cũ", "en": "64. Vintage Reel" },
        "description": { "vi": "Tông màu điện ảnh, vùng tối được nâng, màu sắc ám xanh.", "en": "Cinematic tone with lifted shadows and a blue cast." },
        "type": "color", "contrast": "medium", "saturation": "low",
        "whiteBalance": "AWB White Priority, A4-G1",
        "settings": { "Black level": "+15", "Gamma": "Movie", "Black Gamma": "Wide +7", "Knee": "Auto", "Color Mode": "Still", "Saturation": "+12", "Color Phase": "-3" },
        "colorDepth": { "R": "-3", "G": "+7", "B": "-5", "C": "+5", "M": "-5", "Y": "-2" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#A1887F", "coords": { "x": -2.0, "y": -8.5 }
    },
    {
        "id": "retro-memory",
        "name": { "vi": "65. Ký Ức Hoài Niệm", "en": "65. Retro Memory" },
        "description": { "vi": "Tông màu ấm áp và hoài cổ, gợi nhớ những cuộn phim xưa.", "en": "A warm and nostalgic tone, reminiscent of old film rolls." },
        "type": "color", "contrast": "medium", "saturation": "high",
        "whiteBalance": "4000K, A7-G1",
        "settings": { "Black level": "+2", "Gamma": "Still", "Black Gamma": "Middle +7", "Knee": "Manual 75% +5", "Color Mode": "S-Gamut3", "Saturation": "+32", "Color Phase": "+4" },
        "colorDepth": { "R": "+2", "G": "+7", "B": "+7", "C": "+7", "M": "+7", "Y": "+4" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#FFB74D", "coords": { "x": 2.5, "y": 8.5 }
    },
    {
        "id": "arctic-mint",
        "name": { "vi": "66. Bạc Hà Mát Lạnh", "en": "66. Arctic Mint" },
        "description": { "vi": "Tông màu lạnh, sắc xanh bạc hà đặc trưng, tươi mát, trong lành.", "en": "Cool tone, characteristic mint green hue, fresh and clean." },
        "type": "color", "contrast": "high", "saturation": "high",
        "whiteBalance": "4600K, A7-M1.5",
        "settings": { "Black level": "-8", "Gamma": "Cine1", "Black Gamma": "Wide +7", "Knee": "Auto", "Color Mode": "S-Cinetone", "Saturation": "+20", "Color Phase": "-4" },
        "colorDepth": { "R": "+2", "G": "+7", "B": "-5", "C": "-5", "M": "+3", "Y": "+2" },
           "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#00BCD4", "coords": { "x": 7.3, "y": -1.5 }
    },
    {
        "id": "festive-warmth",
        "name": { "vi": "67. Giáng Sinh Ấm Áp", "en": "67. Festive Warmth" },
        "description": { "vi": "Tông màu ấm, sắc đỏ và xanh lá đặc trưng, không khí lễ hội.", "en": "Warm tone, characteristic red and green hues, festive atmosphere." },
        "type": "color", "contrast": "high", "saturation": "medium",
        "whiteBalance": "AWB, A5-G0.25",
        "settings": { "Black level": "-7", "Gamma": "Cine3", "Black Gamma": "Narrow -7", "Knee": "105% +5", "Color Mode": "Still", "Saturation": "+13", "Color Phase": "+4" },
        "colorDepth": { "R": "+3", "G": "+7", "B": "-4", "C": "-5", "M": "+4", "Y": "+2" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#EF5350", "coords": { "x": 6.9, "y": 6.0 }
    },
    {
        "id": "street-wanderer",
        "name": { "vi": "68. Phố Đêm Không Ngủ", "en": "68. Street Wanderer" },
        "description": { "vi": "Độ tương phản cao, hạt rõ, hoàn hảo cho khoảnh khắc chân thực.", "en": "High contrast, pronounced grain, perfect for authentic moments." },
        "type": "bw", "contrast": "high", "saturation": "high",
        "whiteBalance": "5500K, A3-G2",
        "notes": { "vi": "Tắt Giảm nhiễu cho JPG. Chụp ISO 1600+ để tăng hạt.", "en": "Turn Off Noise Reduction for JPG. Shoot ISO 1600 or higher to increase Granularity." },
        "settings": { "Black level": "+5", "Gamma": "Still", "Black Gamma": "Wide -7", "Knee": "Manual 77.5% +2", "Color Mode": "Black & White", "Saturation": "+24", "Color Phase": "0" },
        "colorDepth": { "R": "-4", "G": "-1", "B": "+6", "C": "+5", "M": "-3", "Y": "-3" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#424242", "coords": { "x": 9.3, "y": -3.5 }
    },
    {
        "id": "mossy-earth",
        "name": { "vi": "69. Rêu Phong", "en": "69. Mossy Earth" },
        "description": { "vi": "Tông màu xanh rêu, nâu đất, tạo cảm giác cổ kính, trầm mặc.", "en": "Moss-green, earthy-brown tone, creating an ancient feel." },
        "type": "color", "contrast": "low", "saturation": "medium",
        "whiteBalance": "5300K, A7-M0.75",
        "settings": { "Black level": "+3", "Gamma": "Still", "Black Gamma": "Wide +7", "Knee": "Manual 75% +4", "Color Mode": "Still", "Saturation": "+10", "Color Phase": "0" },
        "colorDepth": { "R": "+3", "G": "+5", "B": "-3", "C": "-3", "M": "-3", "Y": "+3" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#795548", "coords": { "x": -6.8, "y": -7.8 }
    },
    {
        "id": "neon-night",
        "name": { "vi": "70. Ánh Đèn Neon", "en": "70. Neon Night" },
        "description": { "vi": "Tối ưu cho ánh sáng yếu, tạo quầng sáng và màu sắc đặc trưng của cảnh đêm.", "en": "Optimized for low light, creating halation and characteristic colors of night scenes." },
        "type": "color", "contrast": "low", "saturation": "low",
        "whiteBalance": "2700K, A7-M1.25",
        "settings": { "Black level": "+3", "Gamma": "Movie", "Black Gamma": "Wide +7", "Knee": "Auto", "Color Mode": "Still", "Saturation": "+2", "Color Phase": "+5" },
        "colorDepth": { "R": "-5", "G": "-7", "B": "-7", "C": "+3", "M": "-7", "Y": "-5" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#F06292", "coords": { "x": -9.0, "y": 4.0 }
    },
    {
        "id": "urban-grit",
        "name": { "vi": "71. Phố Xá Lạnh Lùng", "en": "71. Urban Grit" },
        "description": { "vi": "Tông màu trầm, bão hòa thấp, tương phản cao, gai góc.", "en": "Subdued tone, low saturation, high contrast for a gritty feel." },
        "type": "color", "contrast": "high", "saturation": "low",
        "whiteBalance": "4000K, A7-M0.5",
        "settings": { "Black level": "-7", "Gamma": "Still", "Black Gamma": "Middle -7", "Knee": "Manual 75% +4", "Color Mode": "Still", "Saturation": "-5", "Color Phase": "+2" },
        "colorDepth": { "R": "-4", "G": "+7", "B": "+2", "C": "+3", "M": "-6", "Y": "-1" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#78909C", "coords": { "x": 8.1, "y": -8.5 }
    },
    {
        "id": "indigo-night",
        "name": { "vi": "72. Đêm Lam Tím", "en": "72. Indigo Night" },
        "description": { "vi": "Màu xanh chàm, tím sâu, tối ưu cho cảnh đêm, huyền ảo.", "en": "Deep indigo and violet, optimized for night scenes, magical." },
        "type": "color", "contrast": "medium", "saturation": "low",
        "whiteBalance": "2500K, B4-G2.5",
        "settings": { "Black level": "-5", "Gamma": "Cine4", "Black Gamma": "Middle -7", "Knee": "Manual 82.5% +4", "Color Mode": "Still", "Saturation": "-10", "Color Phase": "+7" },
        "colorDepth": { "R": "-6", "G": "+7", "B": "+1", "C": "+3", "M": "+7", "Y": "+5" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#311B92", "coords": { "x": -2.5, "y": 0.5 }
    },
    {
        "id": "gilded-honey",
        "name": { "vi": "73. Mật Ong Hoàng Kim", "en": "73. Gilded Honey" },
        "description": { "vi": "Một phiên bản khác của Kodak Gold với tông màu ấm và độ bão hòa cao.", "en": "Another version of Kodak Gold with warm tones and high saturation." },
        "type": "color", "contrast": "medium", "saturation": "high",
        "whiteBalance": "4600K, A7-G1.25",
        "settings": { "Black level": "+2", "Gamma": "S-Cinetone", "Black Gamma": "Narrow -7", "Knee": "Auto", "Color Mode": "S-Cinetone", "Saturation": "+25", "Color Phase": "+5" },
        "colorDepth": { "R": "+3", "G": "-3", "B": "-5", "C": "-3", "M": "+3", "Y": "-2" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#FFC107", "coords": { "x": -1.5, "y": 8.2 }
    },
    {
        "id": "citrus-zest",
        "name": { "vi": "74. Trà Chanh Phố Cổ", "en": "74. Citrus Zest" },
        "description": { "vi": "Tông màu vàng chanh và xanh lá cây nhẹ, tạo cảm giác tươi mới.", "en": "Light lemon-yellow and green tone, creating a fresh feeling." },
        "type": "color", "contrast": "low", "saturation": "medium",
        "whiteBalance": "4500K, A7-M2",
        "settings": { "Black level": "+6", "Gamma": "Still", "Black Gamma": "Middle +7", "Knee": "Manual 80% +4", "Color Mode": "Still/Pro", "Saturation": "+14", "Color Phase": "-3" },
        "colorDepth": { "R": "+2", "G": "+5", "B": "-7", "C": "+4", "M": "-6", "Y": "+3" },
             "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#CDDC39", "coords": { "x": -6.0, "y": 6.0 }
    },
    {
        "id": "golden-dune",
        "name": { "vi": "75. Cồn Cát Vàng", "en": "75. Golden Dune" },
        "description": { "vi": "Màu vàng cát ấm áp, bão hòa cao, gợi hình ảnh cồn cát.", "en": "Warm, highly saturated sandy yellow, evoking dunes." },
        "type": "color", "contrast": "medium", "saturation": "high",
        "whiteBalance": "AWB, A2-G1.75",
        "settings": { "Black level": "+4", "Gamma": "S-Cinetone", "Black Gamma": "Middle -7", "Knee": "Auto", "Color Mode": "S-Cinetone", "Saturation": "+32", "Color Phase": "+3" },
        "colorDepth": { "R": "+3", "G": "+7", "B": "+4", "C": "-5", "M": "-3", "Y": "-3" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#FFA000", "coords": { "x": 4.0, "y": 8.0 }
    },
    {
        "id": "minimalist-mono",
        "name": { "vi": "76. Đơn Sắc Tối Giản", "en": "76. Minimalist Mono" },
        "description": { "vi": "Tương phản cao, vùng đen sâu, tập trung vào hình khối, đường nét.", "en": "High contrast, deep blacks, focusing on shapes and lines." },
        "type": "bw", "contrast": "high", "saturation": "high",
        "whiteBalance": "5500K",
        "settings": { "Black level": "-15", "Gamma": "S-Cinetone", "Black Gamma": "Narrow -7", "Knee": "Manual 75% +2", "Color Mode": "Black & White", "Saturation": "+28", "Color Phase": "0" },
        "colorDepth": { "R": "-3", "G": "+4", "B": "+3", "C": "+3", "M": "+3", "Y": "+2" },
            "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#616161", "coords": { "x": 8.7, "y": -6.8 }
    },
    {
        "id": "cinema-sun",
        "name": { "vi": "77. Nắng Vàng Điện Ảnh", "en": "77. Cinema Sun" },
        "description": { "vi": "Bão hòa cao, tông màu ấm, giả lập màu phim điện ảnh ban ngày.", "en": "High saturation, warm tone, simulates daylight cinematic film." },
        "type": "color", "contrast": "low", "saturation": "high",
        "whiteBalance": "3700K, A7-G1",
        "settings": { "Black level": "+9", "Gamma": "S-Cinetone", "Black Gamma": "Narrow -7", "Knee": "Auto", "Color Mode": "S-Cinetone", "Saturation": "+32", "Color Phase": "+3" },
        "colorDepth": { "R": "0", "G": "+3", "B": "+2", "C": "+2", "M": "-3", "Y": "+1" },
          "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#FF8F00", "coords": { "x": -6.0, "y": 8.3 }
    },
    {
        "id": "neo-noir",
        "name": { "vi": "78. Đơn Sắc Tương Lai", "en": "78. Neo Noir" },
        "description": { "vi": "Đen trắng hiện đại, tương phản cân bằng, vừa cổ điển vừa vị lai.", "en": "Modern B&W, balanced contrast, both classic and futuristic." },
        "type": "bw", "contrast": "medium", "saturation": "high",
        "whiteBalance": "6000K, B2.5-M1.5",
        "settings": { "Black level": "+2", "Gamma": "Cine1-4", "Black Gamma": "Middle -7", "Knee": "Manual 75% +4", "Color Mode": "Black & White", "Saturation": "+32", "Color Phase": "0" },
        "colorDepth": { "R": "-4", "G": "+5", "B": "+4", "C": "0", "M": "-5", "Y": "-3" },
           "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#757575", "coords": { "x": 2.0, "y": -6.0 }
    },
    {
        "id": "jade-whisper",
        "name": { "vi": "79. Ngọc Bích", "en": "79. Jade Whisper" },
        "description": { "vi": "Tông màu dịu mát với sắc xanh ngọc bích nổi bật.", "en": "A cool tone with prominent jade green hues." },
        "type": "color", "contrast": "low", "saturation": "low",
        "whiteBalance": "3600K, A7-G1",
        "settings": { "Black level": "+11", "Gamma": "Movie", "Black Gamma": "Narrow -7", "Knee": "Manual 85% +4", "Color Mode": "Still", "Saturation": "+11", "Color Phase": "-4" },
        "colorDepth": { "R": "-3", "G": "+7", "B": "-3", "C": "+2", "M": "+5", "Y": "+2" },
           "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#4DB6AC", "coords": { "x": -8.8, "y": -7.2 }
    },
    {
        "id": "24k-gold",
        "name": { "vi": "80. Vàng 24K", "en": "80. 24K Gold" },
        "description": { "vi": "Tông vàng kim loại ấm áp, sang trọng, cho cảnh đêm lấp lánh.", "en": "Warm, luxurious metallic gold tone for sparkling night scenes." },
        "type": "color", "contrast": "low", "saturation": "medium",
        "whiteBalance": "5500K, A7-M0.75",
        "settings": { "Black level": "+2", "Gamma": "Still", "Black Gamma": "Narrow -7", "Knee": "Manual 75% +4", "Color Mode": "S-Gamut3.Cine", "Saturation": "+18", "Color Phase": "+7" },
        "colorDepth": { "R": "+5", "G": "-1", "B": "+2", "C": "+5", "M": "+5", "Y": "-5" },
           "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#FFB300", "coords": { "x": -4.0, "y": 7.0 }
    },
    {
        "id": "muted-teal",
        "name": { "vi": "81. Xanh Trầm Lặng", "en": "81. Muted Teal" },
        "description": { "vi": "Tông màu teal trầm, bão hòa thấp, tạo cảm giác yên tĩnh.", "en": "A subdued, low-saturation teal tone, creating a quiet feel." },
        "type": "color", "contrast": "low", "saturation": "low",
        "whiteBalance": "7000K, B1-M1",
        "settings": { "Black level": "+7", "Gamma": "Still", "Black Gamma": "Middle +7", "Knee": "Manual 80% +4", "Color Mode": "S-Gamut3.Cine", "Saturation": "+10", "Color Phase": "+7" },
        "colorDepth": { "R": "0", "G": "+7", "B": "+5", "C": "+5", "M": "+5", "Y": "-3" },
           "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#4DB6AC", "coords": { "x": -8.5, "y": -2.5 }
    },
    {
        "id": "cinema-ruby",
        "name": { "vi": "82. Hồng Ngọc Điện Ảnh", "en": "82. Cinema Ruby" },
        "description": { "vi": "Màu sắc sống động, tương phản cao, mang lại cái nhìn điện ảnh hiện đại.", "en": "Vivid colors, high contrast, providing a modern cinematic look." },
        "type": "color", "contrast": "high", "saturation": "high",
        "whiteBalance": "3900K, A7",
        "notes": { "vi": "Tắt Gamma Assist!", "en": "Turn Off Gamma Assist!" },
        "settings": { "Black level": "-15", "Gamma": "HLG3", "Black Gamma": "Wide 0", "Knee": "Auto", "Color Mode": "BT.2020", "Saturation": "+32", "Color Phase": "+7" },
        "colorDepth": { "R": "-4", "G": "-1", "B": "+5", "C": "+4", "M": "+5", "Y": "+2" },
           "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#E91E63", "coords": { "x": 9.2, "y": 6.5 }
    },
    {
        "id": "golden-city",
        "name": { "vi": "83. Thành Phố Vàng", "en": "83. Golden City" },
        "description": { "vi": "Tông màu vàng ấm áp, tối ưu cho ánh sáng đèn tungsten.", "en": "Warm golden tone, optimized for tungsten lighting." },
        "type": "color", "contrast": "high", "saturation": "high",
        "whiteBalance": "4700K, A7-G1.25",
        "notes": { "vi": "Tắt Gamma Assist!", "en": "Turn Off Gamma Assist!" },
        "settings": { "Black level": "-15", "Gamma": "S-Log2 or S-Log3", "Black Gamma": "Middle -7", "Knee": "Manual 75% +4", "Color Mode": "ITU709Matrix", "Saturation": "+32", "Color Phase": "+5" },
        "colorDepth": { "R": "+1", "G": "+7", "B": "-7", "C": "-7", "M": "+5", "Y": "+3" },
           "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "0", "Crispening": "0", "Hi-Light Detail": "0" },
        "personalityColor": "#FFC107", "coords": { "x": 8.4, "y": 8.4 }
    },
      {
        "id": "Z-Vlog & Live Stream",
        "name": { "vi": "84. Z-Vlog & Live Stream", "en": "84. Z-Vlog & Live Stream" },
        "description": { "vi": "Tông màu tối ưu cho việc sáng tạo nội dung và live streaming, phù hợp với màu da và cảnh trí cho người Việt.", "en": "Optimal color palettes for content creation and live streaming, suitable for Vietnamese skin tones and scenery." },
        "type": "color", "contrast": "medium", "saturation": "medium",
        "whiteBalance": "AWB, B0.5-G0.25",
        "settings": { "Black level": "+3", "Gamma": "Movie", "Black Gamma": "Narrow -7", "Knee": "Auto", "Color Mode": "ITU709Matrix", "Saturation": "+5", "Color Phase": "-1" },
        "colorDepth": { "R": "-11", "G": "0", "B": "0", "C": "0", "M": "-1", "Y": "-1" },
           "detailSettings": { "Level": "0", "Mode": "Auto", "V/H Balance": "0", "B/W Balance": "Type 1", "Limit": "4", "Crispening": "2", "Hi-Light Detail": "2" },
        "personalityColor": "#FFC107", "coords": { "x": 0, "y": 0 }
    }
];

    </script>
</body>
</html>
